[
  {
    "id": 24,
    "author": "user",
    "payload": {
      "type": "text",
      "text": "change nothing else, change the upolad icon in each card to a calendar, also: if the resource is uploaded by admin then show nothing below the uploaded date and dont leave space(at the middle of the bottom), if someone else uploaded then look like now",
      "files": [],
      "fileUploads": [],
      "cssBlocks": [],
      "cMarkNode": {}
    },
    "createdTimestamp": {
      "seconds": 1770185550,
      "nanos": 900000000
    }
  },
  {
    "id": 25,
    "author": "model",
    "payload": {
      "type": "thinking",
      "text": "**Refining Component Visuals**\n\nI'm currently focused on the `ResourceCard` component within `HEORepo`. My primary objective is to alter the visual representation of uploaded resources. The current \"upload\" icon is being replaced with a calendar icon, for a more accurate visual cue. If the contributor is an admin, the contributor information might be hidden.\n\n\n**Adjusting Card Layout**\n\nI've made progress on the `ResourceCard` component. The calendar icon is now implemented. I'm focusing on layout adjustments within `components/ResourceCard.tsx`. I've removed the fixed height on the contributor name container, making it conditional to prevent empty space when hiding contributor information. My next step involves verifying the graceful collapse.\n\n\n**Refining Contributor Display**\n\nI've been examining the `ResourceCard` component again. I've streamlined the contributor display within `components/ResourceCard.tsx`. The fixed-height wrapper around the contributor info is gone. My changes adjust a few minor spacing properties to prevent empty space. The removal of the fixed height container means it should collapse automatically when the contributor info is hidden. I will look at this code.\n\n\n",
      "cMarkNode": {}
    },
    "createdTimestamp": {
      "seconds": 1770185550,
      "nanos": 900000000
    },
    "doneTimestamp": {
      "seconds": 1770185560,
      "nanos": 105000000
    }
  },
  {
    "id": 26,
    "author": "model",
    "payload": {
      "type": "generationTable",
      "entries": [
        {
          "path": "components/ResourceCard.tsx",
          "generationType": 1,
          "isDone": true,
          "description": "Changed upload icon to a calendar icon and adjusted contributor visibility logic to remove empty space when the contributor is hidden (Admin/Anonymous).",
          "diffs": [
            {
              "target": "",
              "replacement": "\nimport React, { useState, useEffect } from 'react';\nimport { Resource } from '../types';\n\ninterface ResourceCardProps {\n  resource: Resource;\n  index: number;\n}\n\nconst DARK_NAVY = '#111827';\nconst LIGHT_SLATE = '#94A3B8';\nconst THEME_BLUE = '#2563EB';\n\nconst ResourceCard: React.FC<ResourceCardProps> = ({ resource, index }) => {\n  // Initialize bookmark state from localStorage\n  const [bookmarked, setBookmarked] = useState(() => {\n    try {\n      const saved = localStorage.getItem('heo_bookmarks');\n      if (!saved) return resource.isBookmarked || false;\n      const list = JSON.parse(saved);\n      return Array.isArray(list) ? list.includes(resource.id) : false;\n    } catch {\n      return false;\n    }\n  });\n\n  const [imgSrc, setImgSrc] = useState(`https://s0.wp.com/mshots/v1/${encodeURIComponent(resource.url)}?w=600`);\n  const [hasFallback, setHasFallback] = useState(false);\n  \n  const handleCardClick = (e: React.MouseEvent) => {\n    e.stopPropagation();\n    if (resource.url) {\n      window.open(resource.url, '_blank', 'noopener,noreferrer');\n    }\n  };\n\n  const handleImageError = () => {\n    if (!hasFallback) {\n      setImgSrc(resource.imageUrl);\n      setHasFallback(true);\n    }\n  };\n\n  const toggleBookmark = (e: React.MouseEvent) => {\n    e.preventDefault();\n    e.stopPropagation();\n    \n    const newStatus = !bookmarked;\n    setBookmarked(newStatus);\n    \n    try {\n      const saved = localStorage.getItem('heo_bookmarks');\n      let list = saved ? JSON.parse(saved) : [];\n      if (!Array.isArray(list)) list = [];\n      \n      if (newStatus) {\n        if (!list.includes(resource.id)) {\n          list.push(resource.id);\n        }\n      } else {\n        list = list.filter((id: string) => id !== resource.id);\n      }\n      \n      localStorage.setItem('heo_bookmarks', JSON.stringify(list));\n    } catch (err) {\n      console.error(\"Failed to save bookmark\", err);\n    }\n  };\n\n  const shouldHideContributor = \n    resource.contributor === 'Admin' || \n    resource.contributor === 'System Admin' || \n    resource.contributor === 'Anonymous';\n\n  return (\n    <div \n      onClick={handleCardClick}\n      className=\"bg-white rounded-[24px] border border-[#E5E7EB] flex flex-col overflow-hidden group transition-all duration-500 cubic-bezier(0.16, 1, 0.3, 1) hover:shadow-[0_25px_50px_-12px_rgba(0,0,0,0.1)] hover:-translate-y-1 relative w-full max-w-[320px] mx-auto cursor-pointer animate-card-entry\"\n      style={{ animationDelay: `${index * 0.05}s` }}\n    >\n      {/* Image Section */}\n      <div className=\"h-48 relative overflow-hidden shrink-0 bg-slate-100\">\n        <img \n          src={imgSrc} \n          onError={handleImageError}\n          alt={resource.title} \n          loading=\"lazy\"\n          className=\"w-full h-full object-cover transition-transform duration-1000 group-hover:scale-105\" \n        />\n        \n        {/* Modern Hover Overlay */}\n        <div className=\"absolute inset-0 bg-[#0F172A]/20 opacity-0 group-hover:opacity-100 transition-opacity duration-300 ease-out\" />\n        \n        {/* Visit Resource Button Overlay */}\n        <div className=\"absolute bottom-6 left-1/2 -translate-x-1/2 bg-[#2563EB] px-6 py-3 rounded-full flex items-center justify-center gap-2.5 opacity-0 translate-y-4 group-hover:translate-y-0 group-hover:opacity-100 transition-all duration-300 cubic-bezier(0.23, 1, 0.32, 1) z-10 shadow-2xl border border-white/20\">\n          <span className=\"text-white font-[900] text-[11px] tracking-[0.1em] uppercase antialiased whitespace-nowrap\">Visit Resource</span>\n          <svg className=\"w-4 h-4 text-white\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n            <path d=\"M7 17L17 7M17 7H7M17 7V17\" stroke=\"currentColor\" strokeWidth=\"3.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n          </svg>\n        </div>\n      </div>\n\n      <div className=\"p-[24px] flex flex-col flex-1\">\n        {/* Title */}\n        <h3 className=\"font-[800] leading-[1.3] mb-3 group-hover:text-[#2563EB] transition-colors duration-500\" style={{ color: DARK_NAVY, fontSize: '19px' }}>\n          {resource.title}\n        </h3>\n        \n        {/* Description Container */}\n        <div \n          className=\"h-[84px] overflow-y-auto mb-6 scrollbar-hide cursor-text group/desc\"\n          onClick={(e) => e.stopPropagation()}\n        >\n          <p className=\"leading-[1.6] font-normal transition-colors duration-500 text-slate-500\" style={{ fontSize: '14px' }}>\n            {resource.description}\n          </p>\n        </div>\n\n        <div className=\"mt-auto pt-6 border-t border-slate-50 flex items-center justify-between\">\n          <div className=\"flex items-center gap-4\">\n            {/* CALENDAR ICON */}\n            <div className=\"w-12 h-12 rounded-2xl bg-[#F8FAFC] border border-[#F1F5F9] flex items-center justify-center text-[#94A3B8] group-hover:border-blue-100 group-hover:bg-blue-50 group-hover:text-[#2563EB] transition-all duration-500 shadow-sm\">\n              <svg width=\"22\" height=\"22\" viewBox=\"0 0 24 24\" fill=\"none\" xmlns=\"http://www.w3.org/2000/svg\">\n                <path d=\"M8 2V5M16 2V5M3.5 9.09H20.5M21 8.5V17C21 20 19.5 22 16 22H8C4.5 22 3 20 3 17V8.5C3 5.5 4.5 3.5 8 3.5H16C19.5 3.5 21 5.5 21 8.5Z\" stroke=\"currentColor\" strokeWidth=\"2.5\" strokeLinecap=\"round\" strokeLinejoin=\"round\"/>\n              </svg>\n            </div>\n            \n            <div className=\"flex flex-col\">\n              <span className=\"font-[800] uppercase tracking-[0.18em] leading-tight mb-0.5\" style={{ color: LIGHT_SLATE, fontSize: '10px' }}>UPLOADED</span>\n              <span className=\"font-[900] leading-tight text-[#0F172A] tracking-[-0.01em]\" style={{ fontSize: '16px' }}>{resource.addedDate}</span>\n              \n              {!shouldHideContributor && (\n                <div className=\"font-[700] antialiased mt-1\" style={{ color: THEME_BLUE, fontSize: '11.5px' }}>\n                  by {resource.contributor}\n                </div>\n              )}\n            </div>\n          </div>\n          \n          <div className=\"flex items-center gap-2\">\n            <button \n              onClick={toggleBookmark}\n              className=\"focus:outline-none transition-all duration-300 hover:scale-110 p-2 rounded-xl hover:bg-slate-50 active:scale-90\"\n              title=\"Bookmark\"\n            >\n              <svg className={`w-6 h-6 transition-all duration-500 ${bookmarked ? 'text-[#2563EB]' : 'text-[#CBD5E1]'}`} viewBox=\"0 0 24 24\" fill=\"currentColor\">\n                <path d=\"M17 3H7c-1.1 0-1.99.9-1.99 2L5 21l7-3 7 3V5c0-1.1-.9-2-2-2z\" />\n              </svg>\n            </button>\n          </div>\n        </div>\n      </div>\n    </div>\n  );\n};\n\nexport default ResourceCard;\n"
            }
          ]
        }
      ]
    },
    "createdTimestamp": {
      "seconds": 1770185560,
      "nanos": 106000000
    },
    "doneTimestamp": {
      "seconds": 1770185572,
      "nanos": 50000000
    }
  },
  {
    "id": 27,
    "author": "user",
    "payload": {
      "type": "text",
      "text": "change nothing else, focus on the contribute to HEORepo function.\n1. delete the mailbox and associated functions in admin mode\n2. in public user's screen, after clicking the contributeto HEORepo:\n2.1 make users can suggest multiple resources at a time\n2.2 instead of submit, change it to export a csv file as same format as the admin mode input\n2.3 at the top of the contribute function, a introduction line of this function: users input the suggested resources, then send the exported csv to the email",
      "files": [],
      "fileUploads": [],
      "cssBlocks": [],
      "cMarkNode": {}
    },
    "createdTimestamp": {
      "seconds": 1770186112,
      "nanos": 552000000
    }
  },
  {
    "id": 28,
    "author": "model",
    "payload": {
      "type": "thinking",
      "text": "**Refining HEORepo's Features**\n\nI'm currently focused on streamlining the \"Contribute to HEORepo\" feature and the Admin dashboard. The `mailbox` tab, along with all associated submission handling, will be removed. I've also implemented the functionality for users to submit multiple resource suggestions simultaneously within the modal interface, improving the workflow.\n\n\n**Revising Submission Workflow**\n\nI've shifted my attention to refining the user submission process. I'm replacing the \"Submit\" action with an \"Export CSV\" functionality. This CSV will match the admin input format, creating a streamlined export for email submission. I am now working on modifications to the `AdminDashboard` and related files to remove the `mailbox` and its associated components, effectively removing the submission handling within the application.\n\n\n**Improving Submission UI**\n\nI'm currently focused on the modal for submitting resources. I've switched the single resource input to a list, which users can expand using an \"Add another resource\" button. I've also added the introduction text and implemented `handleExportCSV` to create a CSV from the list. Furthermore, I've updated the translations and removed the `notificationCount` from `SidebarProps`, and taken away the red dot logic. Finally, the `Submission` interface has been removed.\n\n\n",
      "cMarkNode": {}
    },
    "createdTimestamp": {
      "seconds": 1770186112,
      "nanos": 552000000
    },
    "doneTimestamp": {
      "seconds": 1770186136,
      "nanos": 419000000
    }
  },
  {
    "id": 29,
    "author": "model",
    "payload": {
      "type": "generationTable",
      "entries": [
        {
          "path": "types.ts",
          "generationType": 1,
          "isDone": true,
          "description": "Removed Submission interface as the mailbox feature is being replaced by direct CSV export.",
          "diffs": [
            {
              "target": "",
              "replacement": "\nexport interface Resource {\n  id: string;\n  title: string;\n  description: string;\n  url: string;\n  domain: string;\n  imageUrl: string;\n  addedDate: string;\n  contributor: string;\n  category: string;\n  subCategory?: string;\n  fileType?: string;\n  status?: 'verified' | 'warning' | 'new';\n  isBookmarked?: boolean;\n}\n\nexport interface Collection {\n  id: string;\n  name: string;\n  icon: string;\n  description: string;\n  subCategories?: string[];\n}\n\nexport enum Theme {\n  ALL = 'all',\n  GENERAL = 'general',\n  ECONOMIC_MODELING = 'modelling',\n  SYSTEMATIC_REVIEWS = 'meta-analysis',\n  SURVIVAL_ANALYSIS = 'survival-analysis',\n  NEWS = 'news'\n}\n"
            }
          ]
        },
        {
          "path": "components/Sidebar.tsx",
          "generationType": 1,
          "isDone": true,
          "description": "Removed notificationCount related logic and props following the deletion of the mailbox feature.",
          "diffs": [
            {
              "target": "",
              "replacement": "\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Collection, Theme } from '../types';\n\ninterface SidebarProps {\n  collections: Collection[];\n  activeTheme: string;\n  onThemeSelect: (id: string) => void;\n  isOpen: boolean;\n  onClose: () => void;\n  onAdminClick: () => void;\n  isAdminActive: boolean;\n  taglineWords: string[];\n}\n\nconst BRAND_BLUE = '#2563EB';\nconst DARK_NAVY = '#121A26';\nconst SLATE_LIGHTER = '#94A3B8'; \nconst SLATE_EXTRA_LIGHTER = '#CBD5E1'; \n\nconst t = {\n  home: \"Welcome\",\n  collections: \"COLLECTIONS\",\n  adminConsole: \"ADMIN CONSOLE\",\n  adminDeck: \"Admin Deck\",\n  exitAdminMode: \"Exit Admin Mode\",\n  adminPortal: \"Admin Portal\",\n  repository: \"REPOSITORY\",\n  for: \"FOR\"\n};\n\nconst TypingTagline: React.FC<{ words: string[] }> = ({ words }) => {\n  const [index, setIndex] = useState(0);\n  const [subIndex, setSubIndex] = useState(0);\n  const [reverse, setReverse] = useState(false);\n  const [pause, setPause] = useState(false);\n\n  // Constants for typing speed\n  const TYPE_SPEED = 80;\n  const DELETE_SPEED = 40;\n  const PAUSE_TIME = 1500;\n\n  useEffect(() => {\n    if (!words || words.length === 0) return;\n\n    if (index >= words.length) {\n      setIndex(0);\n      setSubIndex(0);\n      setReverse(false);\n      setPause(false);\n      return;\n    }\n\n    if (pause) {\n      const timeout = setTimeout(() => {\n        setPause(false);\n        setReverse(true);\n      }, PAUSE_TIME);\n      return () => clearTimeout(timeout);\n    }\n\n    if (reverse && subIndex === 0) {\n      setReverse(false);\n      setIndex((prev) => (prev + 1) % words.length);\n      return;\n    }\n\n    const currentWord = words[index];\n    if (!reverse && subIndex === currentWord.length) {\n      setPause(true);\n      return;\n    }\n\n    const timeout = setTimeout(() => {\n      setSubIndex((prev) => prev + (reverse ? -1 : 1));\n    }, reverse ? DELETE_SPEED : TYPE_SPEED);\n\n    return () => clearTimeout(timeout);\n  }, [subIndex, index, reverse, pause, words]);\n\n  if (!words || words.length === 0) return null;\n\n  const currentWord = words[index % words.length] || '';\n  const displayText = currentWord.substring(0, subIndex);\n\n  return (\n    <div className=\"flex items-center gap-[3px] h-full\">\n      <span style={{ color: BRAND_BLUE, fontWeight: 900, display: 'inline-block' }}>\n        {displayText || '\\u00A0'}\n      </span>\n      <div \n        style={{ \n          backgroundColor: BRAND_BLUE, \n          width: '4px', \n          height: '4px',\n          flexShrink: 0\n        }}\n      ></div>\n    </div>\n  );\n};\n\nconst Sidebar: React.FC<SidebarProps> = ({ \n  collections, \n  activeTheme, \n  onThemeSelect, \n  isOpen, \n  onClose, \n  onAdminClick, \n  isAdminActive, \n  taglineWords\n}) => {\n  const isLandingActive = activeTheme === 'landing';\n\n  return (\n    <>\n      {isOpen && (\n        <div className=\"fixed inset-0 bg-black/10 backdrop-blur-sm z-40 lg:hidden transition-opacity duration-500\" onClick={onClose} />\n      )}\n\n      <aside className={`\n        fixed inset-y-0 left-0 z-50 w-[280px] lg:w-1/6 lg:min-w-[240px] bg-white border-r border-[#E5E7EB] transform transition-transform duration-500 cubic-bezier(0.16, 1, 0.3, 1) lg:relative lg:translate-x-0 will-change-transform\n        ${isOpen ? 'translate-x-0' : '-translate-x-full'} flex flex-col\n      `}>\n        <div className=\"p-8 pb-4\">\n          <div className=\"flex flex-col items-start select-none cursor-pointer\" onClick={() => onThemeSelect('landing')}>\n            <div className=\"flex items-center font-[900] text-[32px] tracking-[-0.04em] shadow-blue-500/10 leading-none antialiased\">\n              <span style={{ color: DARK_NAVY }}>HEO</span>\n              <span style={{ \n                backgroundImage: `linear-gradient(to right, ${DARK_NAVY} 50%, ${BRAND_BLUE} 50%)`,\n                WebkitBackgroundClip: 'text',\n                WebkitTextFillColor: 'transparent',\n                display: 'inline-block',\n                position: 'relative',\n                padding: '0 0.2em',\n                margin: '0 -0.2em'\n              }}>R</span>\n              <span style={{ color: BRAND_BLUE }}>epo</span>\n              <div \n                className=\"ml-[2px] self-end\" \n                style={{ \n                  backgroundColor: BRAND_BLUE, \n                  width: '8px', \n                  height: '8px',\n                  marginBottom: '4px' \n                }}\n              ></div>\n            </div>\n            \n            <div className=\"flex flex-col gap-[5px] uppercase mt-4 antialiased leading-none\" style={{ fontSize: '10px' }}>\n              <div className=\"flex items-center\" style={{ height: '12px' }}>\n                <span style={{ color: SLATE_LIGHTER, fontWeight: 900, letterSpacing: '0.45em' }}>{t.repository}</span>\n              </div>\n              <div className=\"flex items-center\" style={{ height: '12px' }}>\n                <span style={{ color: SLATE_EXTRA_LIGHTER, fontWeight: 900, letterSpacing: '0.25em' }}>{t.for}</span>\n              </div>\n              <div style={{ letterSpacing: '0.25em', height: '12px', display: 'flex', alignItems: 'center' }}>\n                <TypingTagline words={taglineWords} />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <nav className=\"flex-1 mt-8 px-4 space-y-10 overflow-y-auto scrollbar-hide pb-10\">\n          <div>\n            <div className=\"space-y-2.5\">\n               <button\n                onClick={() => { onThemeSelect('landing'); onClose(); }}\n                className={`w-full flex items-center gap-4 px-4 py-3.5 rounded-[20px] transition-all duration-500 cubic-bezier(0.16, 1, 0.3, 1) group ${\n                  isLandingActive \n                  ? 'bg-[#05070a] text-white shadow-[0_12px_24px_rgba(0,0,0,0.18)]' \n                  : 'text-[#334155] hover:bg-[#f8fafc] hover:translate-x-1'\n                }`}\n              >\n                <div className={`w-8 h-8 rounded-[11px] flex items-center justify-center shrink-0 transition-all duration-500 ${\n                  isLandingActive ? 'bg-white/15' : 'bg-[#f1f5f9] group-hover:bg-[#e2e8f0]'\n                }`}>\n                  <svg className={`w-4 h-4 ${isLandingActive ? 'text-white' : 'text-[#475569]'}`} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth=\"2.5\">\n                    <path d=\"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\" />\n                  </svg>\n                </div>\n                <span className=\"text-[14.5px] font-[800] tracking-tight truncate\">{t.home}</span>\n              </button>\n            </div>\n          </div>\n\n          <div>\n            <h3 className=\"px-4 text-[11px] font-[800] text-[#64748B] uppercase tracking-[0.12em] mb-5\">\n              {t.collections}\n            </h3>\n            <div className=\"space-y-2.5\">\n              {collections.map((col) => {\n                const isActive = activeTheme === col.id;\n                \n                return (\n                  <button\n                    key={col.id}\n                    onClick={() => { onThemeSelect(col.id); onClose(); }}\n                    className={`w-full flex items-center gap-4 px-4 py-3.5 rounded-[20px] transition-all duration-500 cubic-bezier(0.16, 1, 0.3, 1) group ${\n                      isActive \n                      ? 'bg-[#05070a] text-white shadow-[0_12px_24px_rgba(0,0,0,0.18)]' \n                      : 'text-[#334155] hover:bg-[#f8fafc] hover:translate-x-1'\n                    }`}\n                  >\n                    <div className={`w-8 h-8 rounded-[11px] flex items-center justify-center shrink-0 transition-all duration-500 ${\n                      isActive ? 'bg-white/15' : 'bg-[#f1f5f9] group-hover:bg-[#e2e8f0]'\n                    }`}>\n                      {col.id === Theme.GENERAL ? (\n                        <svg className={`w-4 h-4 ${isActive ? 'text-white' : 'text-[#475569]'}`} viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2.5\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4\" />\n                        </svg>\n                      ) : col.id === Theme.ECONOMIC_MODELING ? (\n                        <svg className={`w-4 h-4 ${isActive ? 'text-white' : 'text-[#475569]'}`} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth=\"2.5\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z\" />\n                        </svg>\n                      ) : col.id === Theme.SYSTEMATIC_REVIEWS ? (\n                        <svg className={`w-4 h-4 ${isActive ? 'text-white' : 'text-[#475569]'}`} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth=\"2.5\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7\" />\n                        </svg>\n                      ) : col.id === Theme.NEWS ? (\n                        <svg className={`w-4 h-4 ${isActive ? 'text-white' : 'text-[#475569]'}`} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth=\"2.5\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9\" />\n                        </svg>\n                      ) : (\n                        <svg className={`w-4 h-4 ${isActive ? 'text-white' : 'text-[#475569]'}`} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth=\"2.5\"><rect x=\"3\" y=\"3\" width=\"7\" height=\"7\" rx=\"1\"/><rect x=\"14\" y=\"3\" width=\"7\" height=\"7\" rx=\"1\"/><rect x=\"14\" y=\"14\" width=\"7\" height=\"7\" rx=\"1\"/><rect x=\"3\" y=\"14\" width=\"7\" height=\"7\" rx=\"1\"/></svg>\n                      )}\n                    </div>\n                    <span className=\"text-[14.5px] font-[800] tracking-tight truncate\">{col.name}</span>\n                  </button>\n                );\n              })}\n            </div>\n          </div>\n\n          {isAdminActive && (\n            <div className=\"animate-card-entry\">\n              <h3 className=\"px-4 text-[11px] font-[800] text-[#64748b] uppercase tracking-[0.12em] mb-5\">\n                {t.adminConsole}\n              </h3>\n              <div className=\"space-y-2.5\">\n                <button\n                  onClick={() => { onThemeSelect('admin-deck'); onClose(); }}\n                  className={`w-full flex items-center gap-4 px-4 py-3.5 rounded-[20px] transition-all duration-500 cubic-bezier(0.16, 1, 0.3, 1) group relative ${\n                    activeTheme === 'admin-deck' \n                    ? 'bg-[#2563EB] text-white shadow-[0_12px_24px_rgba(37,99,235,0.25)]' \n                    : 'text-[#334155] hover:bg-slate-50 hover:translate-x-1'\n                  }`}\n                >\n                  <div className={`w-8 h-8 rounded-full flex items-center justify-center shrink-0 transition-all duration-500 ${\n                    activeTheme === 'admin-deck' ? 'bg-white/20' : 'bg-slate-100 group-hover:bg-slate-200'\n                  }`}>\n                    <svg className={`w-4 h-4 ${activeTheme === 'admin-deck' ? 'text-white' : 'text-slate-500'}`} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth=\"2.5\">\n                      <path d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\n                    </svg>\n                  </div>\n                  <span className=\"text-[14.5px] font-[900] tracking-tight\">{t.adminDeck}</span>\n                </button>\n              </div>\n            </div>\n          )}\n        </nav>\n\n        {isAdminActive && (\n          <div className=\"p-4 border-t border-[#E5E7EB]/40 bg-white\">\n            <button \n              onClick={onAdminClick}\n              className=\"w-full flex items-center gap-2.5 px-4 py-3.5 text-red-500 hover:bg-red-50 cursor-pointer transition-all duration-300 group rounded-[20px]\"\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-[18px] h-[18px] transition-transform group-hover:scale-110\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth=\"2.5\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\" />\n              </svg>\n              <span className=\"text-[14px] font-[800] tracking-tight antialiased uppercase\">\n                {t.exitAdminMode}\n              </span>\n            </button>\n          </div>\n        )}\n      </aside>\n    </>\n  );\n};\n\nexport default Sidebar;\n"
            }
          ]
        },
        {
          "path": "components/AdminDashboard.tsx",
          "generationType": 1,
          "isDone": true,
          "description": "Deleted mailbox and related approval/rejection logic. Cleaned up tabs and props.",
          "diffs": [
            {
              "target": "",
              "replacement": "\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Resource, Collection, Theme } from '../types';\nimport { REPO_VERSION } from '../data';\n\ninterface AdminDashboardProps {\n  resources: Resource[];\n  setResources: React.Dispatch<React.SetStateAction<Resource[]>>;\n  collections: Collection[];\n  setCollections: React.Dispatch<React.SetStateAction<Collection[]>>;\n  taglineWords: string[];\n  setTaglineWords: React.Dispatch<React.SetStateAction<string[]>>;\n  initialTab?: 'resources' | 'collections' | 'settings';\n}\n\nconst sanitizeInput = (str: string): string => {\n  if (typeof str !== 'string') return '';\n  return str.replace(/<[^>]*>?/gm, '').trim();\n};\n\nconst parseCSV = (text: string): string[][] => {\n  const result: string[][] = [];\n  let row: string[] = [];\n  let cell = '';\n  let inQuotes = false;\n\n  for (let i = 0; i < text.length; i++) {\n    const char = text[i];\n    const nextChar = text[i + 1];\n\n    if (inQuotes) {\n      if (char === '\"' && nextChar === '\"') {\n        cell += '\"';\n        i++;\n      } else if (char === '\"') {\n        inQuotes = false;\n      } else {\n        cell += char;\n      }\n    } else {\n      if (char === '\"') {\n        inQuotes = true;\n      } else if (char === ',') {\n        row.push(cell);\n        cell = '';\n      } else if (char === '\\n' || char === '\\r') {\n        if (cell !== '' || row.length > 0) {\n          row.push(cell);\n          result.push(row);\n        }\n        row = [];\n        cell = '';\n        if (char === '\\r' && nextChar === '\\n') i++;\n      } else {\n        cell += char;\n      }\n    }\n  }\n  if (cell !== '' || row.length > 0) {\n    row.push(cell);\n    result.push(row);\n  }\n  return result;\n};\n\nconst escapeCSV = (val: string | undefined): string => {\n  if (!val) return '\"\"';\n  const str = val.toString().replace(/\"/g, '\"\"');\n  return `\"${str}\"`;\n};\n\nconst AdminDashboard: React.FC<AdminDashboardProps> = ({ \n  resources, \n  setResources, \n  collections, \n  setCollections, \n  taglineWords, \n  setTaglineWords, \n  initialTab = 'resources' \n}) => {\n  const [editingId, setEditingId] = useState<string | null>(null);\n  const [editingCollectionId, setEditingCollectionId] = useState<string | null>(null);\n  const [activeTab, setActiveTab] = useState<'resources' | 'collections' | 'settings'>(initialTab as any);\n  const [newTaglineWord, setNewTaglineWord] = useState('');\n  const [newSubCategory, setNewSubCategory] = useState('');\n  const [statusMessage, setStatusMessage] = useState<{ text: string, type: 'success' | 'error' } | null>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const localVersion = localStorage.getItem('heo_repo_version') || '0';\n  const sourceVersion = (REPO_VERSION || 0).toString();\n  const isOutOfSync = parseInt(sourceVersion) > parseInt(localVersion);\n\n  useEffect(() => {\n    if (initialTab && activeTab !== initialTab) {\n      setActiveTab(initialTab as any);\n    }\n  }, [initialTab]);\n\n  const showStatus = (text: string, type: 'success' | 'error' = 'success') => {\n    setStatusMessage({ text, type });\n    setTimeout(() => setStatusMessage(null), 6000);\n  };\n\n  const handleExportDataFile = () => {\n    try {\n      if (collections.length === 0 || resources.length === 0) {\n        showStatus(\"Cannot export empty repository.\", \"error\");\n        return;\n      }\n\n      const collectionsStr = JSON.stringify(collections, null, 2);\n      const resourcesStr = JSON.stringify(resources, null, 2);\n      const taglineStr = JSON.stringify(taglineWords, null, 2);\n      const currentTimestamp = Date.now();\n\n      const fileContent = `import { Collection, Resource, Theme } from './types';\n\n/**\n * HEORepo Repository Data\n * Generated: ${new Date().toLocaleString()}\n * REPO_VERSION is used to trigger cache resets for all users when you push to GitHub.\n */\n\nexport const REPO_VERSION = ${currentTimestamp};\n\nexport const COLLECTIONS: Collection[] = ${collectionsStr};\n\nexport const RESOURCES: Resource[] = ${resourcesStr};\n\nexport const TAGLINE_WORDS: string[] = ${taglineStr};\n`;\n\n      const blob = new Blob([fileContent], { type: 'text/typescript' });\n      const url = URL.createObjectURL(blob);\n      const link = document.createElement(\"a\");\n      link.setAttribute(\"href\", url);\n      link.setAttribute(\"download\", \"data.ts\");\n      link.click();\n      showStatus(\"data.ts exported with new version timestamp. Push this to GitHub now!\");\n    } catch (err) {\n      showStatus(\"Export failed.\", \"error\");\n      console.error(err);\n    }\n  };\n\n  const handleResetCache = () => {\n    if (window.confirm(\"This will clear your local edits and revert to the data currently in your repository (data.ts). Continue?\")) {\n      localStorage.removeItem('heo_collections');\n      localStorage.removeItem('heo_resources');\n      localStorage.removeItem('heo_tagline');\n      localStorage.removeItem('heo_repo_version');\n      window.location.reload();\n    }\n  };\n\n  const moveResource = (index: number, direction: 'up' | 'down') => {\n    const newResources = [...resources];\n    const targetIndex = direction === 'up' ? index - 1 : index + 1;\n    if (targetIndex >= 0 && targetIndex < newResources.length) {\n      [newResources[index], newResources[targetIndex]] = [newResources[targetIndex], newResources[index]];\n      setResources(newResources);\n    }\n  };\n\n  const moveCollection = (index: number, direction: 'up' | 'down') => {\n    const newCollections = [...collections];\n    const targetIndex = direction === 'up' ? index - 1 : index + 1;\n    if (targetIndex >= 0 && targetIndex < newCollections.length) {\n      [newCollections[index], newCollections[targetIndex]] = [newCollections[targetIndex], newCollections[index]];\n      setCollections(newCollections);\n    }\n  };\n\n  const moveSubCategory = (colId: string, index: number, direction: 'left' | 'right') => {\n    setCollections(prev => prev.map(col => {\n      if (col.id === colId) {\n        const newSubs = [...(col.subCategories || [])];\n        const targetIndex = direction === 'left' ? index - 1 : index + 1;\n        if (targetIndex >= 0 && targetIndex < newSubs.length) {\n          [newSubs[index], newSubs[targetIndex]] = [newSubs[targetIndex], newSubs[index]];\n          return { ...col, subCategories: newSubs };\n        }\n      }\n      return col;\n    }));\n  };\n\n  const handleDownloadTemplate = () => {\n    const headers = ['Title', 'Description', 'URL', 'Contributor', 'Category', 'SubCategory'];\n    const example = ['Example Analysis', 'Resource description.', 'https://example.com', 'Admin', Theme.GENERAL, 'Basics'];\n    const csvContent = [headers.join(\",\"), example.map(v => escapeCSV(v)).join(\",\")].join(\"\\n\");\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement(\"a\");\n    link.setAttribute(\"href\", url);\n    link.setAttribute(\"download\", \"heorepo_template.csv\");\n    link.click();\n  };\n\n  const handleImportCSV = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n    const reader = new FileReader();\n    reader.onload = (e) => {\n      try {\n        const text = e.target?.result as string;\n        const rows = parseCSV(text);\n        if (rows.length < 2) {\n          showStatus(\"CSV has no data rows.\", \"error\");\n          return;\n        }\n\n        const importedResources: Resource[] = [];\n        const existingUrls = new Set(resources.map(r => r.url.toLowerCase()));\n        let skipped = 0;\n\n        for (let i = 1; i < rows.length; i++) {\n          const row = rows[i];\n          if (row.length < 3) continue;\n\n          const title = row[0]?.trim();\n          const desc = row[1]?.trim();\n          const urlStr = row[2]?.trim();\n          const contributor = row[3]?.trim() || 'Admin';\n          const catId = row[4]?.trim() || Theme.GENERAL;\n          const subCat = row[5]?.trim() || 'all';\n\n          if (!title || !urlStr || existingUrls.has(urlStr.toLowerCase())) {\n            skipped++;\n            continue;\n          }\n\n          let domain = 'UNKNOWN';\n          try {\n            const urlToTest = urlStr.startsWith('http') ? urlStr : `https://${urlStr}`;\n            domain = new URL(urlToTest).hostname.toUpperCase();\n          } catch (e) {}\n\n          importedResources.push({\n            id: Math.random().toString(36).substr(2, 9),\n            title,\n            description: desc || '',\n            url: urlStr,\n            domain,\n            imageUrl: 'https://images.unsplash.com/photo-1460925895917-afdab827c52f?auto=format&fit=crop&q=80&w=600',\n            addedDate: new Date().toLocaleDateString('en-GB'),\n            contributor,\n            category: collections.some(c => c.id === catId) ? catId : (collections[0]?.id || Theme.GENERAL),\n            subCategory: subCat\n          });\n        }\n\n        if (importedResources.length > 0) {\n          setResources(prev => [...importedResources, ...prev]);\n          showStatus(`Imported ${importedResources.length} resources. Skipped ${skipped} (duplicates/invalid).`);\n        } else {\n          showStatus(`No new resources were found in the CSV.`, \"error\");\n        }\n      } catch (err) {\n        showStatus(\"Error parsing CSV. Check file formatting.\", \"error\");\n      }\n    };\n    reader.readAsText(file);\n    if (fileInputRef.current) fileInputRef.current.value = '';\n  };\n\n  const handleUpdateResource = (id: string, field: keyof Resource, value: any) => {\n    setResources(prev => prev.map(res => {\n      if (res.id === id) {\n        let finalValue = value;\n        if (typeof value === 'string' && (field === 'title' || field === 'description' || field === 'contributor')) {\n          finalValue = value.replace(/<[^>]*>?/gm, '');\n        }\n        const updated = { ...res, [field]: finalValue };\n        if (field === 'url') {\n          try {\n            const urlToTest = value.startsWith('http') ? value : `https://${value}`;\n            updated.domain = new URL(urlToTest).hostname.toUpperCase();\n          } catch (e) {}\n        }\n        return updated;\n      }\n      return res;\n    }));\n  };\n\n  const handleDeleteResource = (id: string) => {\n    if (!window.confirm(\"Delete this resource?\")) return;\n    setResources(prev => prev.filter(res => res.id !== id));\n    if (editingId === id) setEditingId(null);\n  };\n\n  const handleAddResource = () => {\n    const defaultCategory = collections.length > 0 ? collections[0].id : Theme.GENERAL;\n    const newRes: Resource = {\n      id: Math.random().toString(36).substr(2, 9),\n      title: 'New Resource',\n      description: 'Enter description...',\n      contributor: 'Admin',\n      url: 'https://',\n      domain: 'NEW.COM',\n      imageUrl: 'https://images.unsplash.com/photo-1551288049-bbda38a594a0?auto=format&fit=crop&q=80&w=600',\n      addedDate: new Date().toLocaleDateString('en-GB'),\n      category: defaultCategory,\n      subCategory: 'all'\n    };\n    setResources(prev => [newRes, ...prev]);\n    setEditingId(newRes.id);\n    setActiveTab('resources');\n  };\n\n  const handleUpdateCollection = (id: string, field: keyof Collection, value: any) => {\n    setCollections(prev => prev.map(col => {\n      if (col.id === id) {\n        let finalValue = value;\n        if (typeof value === 'string' && (field === 'name' || field === 'description')) {\n          finalValue = value.replace(/<[^>]*>?/gm, '');\n        }\n        return { ...col, [field]: finalValue };\n      }\n      return col;\n    }));\n  };\n\n  const handleUpdateSubCategoryName = (colId: string, index: number, newName: string) => {\n    setCollections(prev => prev.map(col => {\n      if (col.id === colId) {\n        const newSubs = [...(col.subCategories || [])];\n        newSubs[index] = newName.replace(/<[^>]*>?/gm, '');\n        return { ...col, subCategories: newSubs };\n      }\n      return col;\n    }));\n  };\n\n  const handleAddSubCategory = (colId: string) => {\n    const cleanSub = sanitizeInput(newSubCategory).trim();\n    if (!cleanSub) return;\n    if (cleanSub.toLowerCase() === 'all') {\n      alert(\"'All' is a reserved system filter and cannot be added as a custom subcategory.\");\n      return;\n    }\n    setCollections(prev => prev.map(col => {\n      if (col.id === colId) {\n        const subs = col.subCategories || [];\n        if (subs.includes(cleanSub)) return col;\n        return { ...col, subCategories: [...subs, cleanSub] };\n      }\n      return col;\n    }));\n    setNewSubCategory('');\n  };\n\n  const handleRemoveSubCategory = (colId: string, index: number) => {\n    setCollections(prev => prev.map(col => {\n      if (col.id === colId) {\n        const subName = (col.subCategories || [])[index];\n        setResources(r => r.map(res => res.category === colId && res.subCategory === subName ? { ...res, subCategory: 'all' } : res));\n        return { ...col, subCategories: (col.subCategories || []).filter((_, i) => i !== index) };\n      }\n      return col;\n    }));\n  };\n\n  const handleDeleteCollection = (id: string) => {\n    if (!window.confirm(\"Move resources to General and delete?\")) return;\n    setCollections(prev => prev.filter(c => c.id !== id));\n    setResources(prev => prev.map(res => res.category === id ? { ...res, category: Theme.GENERAL, subCategory: 'all' } : res));\n    if (editingCollectionId === id) setEditingCollectionId(null);\n  };\n\n  const handleAddCollection = () => {\n    const newId = `custom-${Math.random().toString(36).substr(2, 5)}`;\n    const newCol: Collection = { id: newId, name: 'New Category', icon: 'ðŸ“', description: '', subCategories: ['General'] };\n    setCollections(prev => [...prev, newCol]);\n    setEditingCollectionId(newId);\n    setActiveTab('collections');\n  };\n\n  const handleAddTagline = () => {\n    const cleanWord = sanitizeInput(newTaglineWord).trim();\n    if (cleanWord) {\n      setTaglineWords(prev => [...prev, cleanWord]);\n      setNewTaglineWord('');\n    }\n  };\n\n  const handleRemoveTagline = (index: number) => {\n    if (taglineWords.length > 1) setTaglineWords(prev => prev.filter((_, i) => i !== index));\n  };\n\n  return (\n    <div className=\"bg-white rounded-[24px] md:rounded-[32px] border border-slate-200 shadow-xl overflow-hidden animate-card-entry ring-1 ring-black/5\">\n      <div className=\"flex bg-slate-50/50 border-b border-slate-200 p-2 gap-1.5 md:gap-2 overflow-x-auto scrollbar-hide\">\n        {['resources', 'collections', 'settings'].map((tab) => (\n          <button \n            key={tab}\n            onClick={() => setActiveTab(tab as any)} \n            className={`flex-1 py-2.5 md:py-3 px-4 md:px-6 rounded-xl md:rounded-2xl text-[10px] md:text-[12px] font-[800] uppercase tracking-wider transition-all duration-300 whitespace-nowrap relative ${activeTab === tab ? 'bg-white text-[#2563EB] shadow-sm border border-slate-200' : 'text-slate-500 hover:text-slate-700'}`}\n          >\n            {tab === 'resources' ? 'Vault' : tab.charAt(0).toUpperCase() + tab.slice(1)}\n          </button>\n        ))}\n      </div>\n\n      <div className=\"p-4 md:p-10\">\n        {activeTab === 'resources' && (\n          <div className=\"space-y-6 md:space-y-8\">\n            <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\n              <div>\n                <h2 className=\"text-[24px] md:text-[28px] font-[900] text-[#0F172A] tracking-tight\">Management</h2>\n                <div className=\"flex items-center gap-2 mt-1 min-h-[24px]\">\n                  {statusMessage ? (\n                    <span className={`text-[11px] font-black px-3 py-1 rounded-full animate-pulse uppercase tracking-widest ${statusMessage.type === 'success' ? 'bg-emerald-50 text-emerald-600' : 'bg-red-50 text-red-600'}`}>\n                      {statusMessage.text}\n                    </span>\n                  ) : (\n                    <p className=\"text-slate-500 text-xs md:text-sm\">Manage resources locally. Click 'Export data.ts' to update the GitHub repository.</p>\n                  )}\n                </div>\n              </div>\n              <div className=\"flex flex-wrap items-center gap-2 w-full sm:w-auto\">\n                <input type=\"file\" ref={fileInputRef} onChange={handleImportCSV} accept=\".csv\" className=\"hidden\" />\n                <div className=\"flex bg-slate-100 p-1 rounded-full border border-slate-200\">\n                   <button onClick={handleDownloadTemplate} className=\"px-4 py-2 hover:bg-white hover:shadow-sm rounded-full text-[9px] md:text-[10px] font-black uppercase tracking-widest text-slate-500 transition-all\">CSV Temp</button>\n                   <button onClick={() => fileInputRef.current?.click()} className=\"px-4 py-2 hover:bg-white hover:shadow-sm rounded-full text-[9px] md:text-[10px] font-black uppercase tracking-widest text-slate-500 transition-all\">CSV Imp</button>\n                   <button onClick={handleExportDataFile} className=\"px-4 py-2 bg-emerald-50 text-emerald-600 hover:bg-emerald-100 rounded-full text-[9px] md:text-[10px] font-black uppercase tracking-widest transition-all\">Export data.ts</button>\n                </div>\n                <button onClick={handleAddResource} className=\"bg-[#2563EB] text-white px-6 md:px-8 py-2.5 md:py-3 rounded-full text-[11px] md:text-[12px] font-black uppercase tracking-widest shadow-lg hover:opacity-90 active:scale-95 transition-all\">Add New</button>\n              </div>\n            </div>\n            \n            <div className=\"rounded-[16px] md:rounded-[24px] border border-slate-200 overflow-hidden shadow-sm\">\n              <div className=\"overflow-x-auto\">\n                <table className=\"w-full text-left border-collapse min-w-[900px]\">\n                  <thead className=\"bg-[#F8FAFC] border-b border-slate-200\">\n                    <tr className=\"text-[9px] md:text-[11px] font-black uppercase tracking-widest text-slate-400\">\n                      <th className=\"px-4 md:px-8 py-4\">Resource</th>\n                      <th className=\"px-4 md:px-8 py-4\">Link (URL)</th>\n                      <th className=\"px-4 md:px-8 py-4 w-[180px]\">Category</th>\n                      <th className=\"px-4 md:px-8 py-4 w-[180px]\">Sub-Category</th>\n                      <th className=\"px-4 md:px-8 py-4 text-right w-[160px]\">Actions</th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"divide-y divide-slate-100 bg-white\">\n                    {resources.map((res, idx) => {\n                      const isEditing = editingId === res.id;\n                      const activeCol = collections.find(c => c.id === res.category);\n                      const availableSubCategories = activeCol?.subCategories || [];\n                      return (\n                        <tr key={res.id} className={`group transition-colors ${isEditing ? 'bg-blue-50/40' : 'hover:bg-slate-50/50'}`}>\n                          <td className=\"px-4 md:px-8 py-5\">\n                            {isEditing ? (\n                              <div className=\"space-y-1.5 max-w-xs\">\n                                <input className=\"w-full font-bold text-[#0F172A] text-sm outline-none border-b-2 border-blue-400 bg-transparent py-0.5\" value={res.title} onChange={e => handleUpdateResource(res.id, 'title', e.target.value)} />\n                                <textarea className=\"w-full text-[11px] text-slate-500 bg-transparent outline-none resize-none\" value={res.description} onChange={e => handleUpdateResource(res.id, 'description', e.target.value)} rows={2} />\n                              </div>\n                            ) : (\n                              <div className=\"max-w-[180px] md:max-w-xs\">\n                                <div className=\"font-bold text-[#0F172A] text-sm group-hover:text-blue-600 transition-colors truncate\">{res.title}</div>\n                                <div className=\"text-[10px] md:text-[11px] text-slate-400 font-medium line-clamp-1\">{res.description}</div>\n                              </div>\n                            )}\n                          </td>\n                          <td className=\"px-4 md:px-8 py-5\">\n                            {isEditing ? (\n                              <div className=\"space-y-1.5\">\n                                <input className=\"w-full text-[11px] text-blue-500 font-bold outline-none bg-white border border-blue-100 rounded px-2 py-1\" value={res.url} onChange={e => handleUpdateResource(res.id, 'url', e.target.value)} />\n                                <div className=\"text-[9px] text-slate-400 font-black uppercase\">{res.domain}</div>\n                              </div>\n                            ) : (\n                              <div className=\"max-w-[150px] md:max-w-[200px]\">\n                                <div className=\"text-[11px] text-blue-600 font-bold truncate\">{res.url}</div>\n                                <div className=\"text-[9px] text-slate-400 font-bold uppercase tracking-wider\">{res.domain}</div>\n                              </div>\n                            )}\n                          </td>\n                          <td className=\"px-4 md:px-8 py-5 w-[180px]\">\n                            {isEditing ? (\n                              <select className=\"text-[10px] font-black px-2 py-1.5 rounded bg-white border border-blue-200 text-blue-600 uppercase tracking-widest outline-none w-full shadow-sm\" value={res.category} onChange={e => { handleUpdateResource(res.id, 'category', e.target.value); handleUpdateResource(res.id, 'subCategory', 'all'); }}>\n                                {collections.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}\n                              </select>\n                            ) : (\n                              <span className=\"text-[9px] md:text-[10px] font-black px-2 py-1.5 rounded bg-slate-100 text-slate-500 uppercase tracking-widest inline-block w-full text-center\">{activeCol?.name || 'General'}</span>\n                            )}\n                          </td>\n                          <td className=\"px-4 md:px-8 py-5 w-[180px]\">\n                            {isEditing ? (\n                              <select className=\"text-[10px] font-black px-2 py-1.5 rounded bg-white border border-blue-200 text-blue-600 uppercase tracking-widest outline-none w-full shadow-sm\" value={res.subCategory || 'all'} onChange={e => handleUpdateResource(res.id, 'subCategory', e.target.value)}>\n                                <option value=\"all\">ALL</option>\n                                {availableSubCategories.map(s => <option key={s} value={s}>{s.toUpperCase()}</option>)}\n                              </select>\n                            ) : (\n                              <span className=\"text-[9px] md:text-[10px] font-black px-2 py-1.5 rounded bg-slate-100 text-slate-500 uppercase tracking-widest inline-block w-full text-center\">{res.subCategory?.toUpperCase() || 'ALL'}</span>\n                            )}\n                          </td>\n                          <td className=\"px-4 md:px-8 py-5 text-right w-[160px]\">\n                            <div className=\"flex justify-end items-center gap-1.5 md:gap-2\">\n                              <div className=\"flex flex-col gap-1 mr-1\">\n                                <button onClick={() => moveResource(idx, 'up')} disabled={idx === 0} className=\"p-1 hover:bg-slate-100 rounded text-slate-300 hover:text-[#2563EB] disabled:opacity-20 transition-all cursor-pointer\"><svg className=\"w-3 h-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={4}><path d=\"M5 15l7-7 7 7\" /></svg></button>\n                                <button onClick={() => moveResource(idx, 'down')} disabled={idx === resources.length - 1} className=\"p-1 hover:bg-slate-100 rounded text-slate-300 hover:text-[#2563EB] disabled:opacity-20 transition-all cursor-pointer\"><svg className=\"w-3 h-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={4}><path d=\"M19 9l-7 7-7-7\" /></svg></button>\n                              </div>\n                              <button onClick={() => setEditingId(isEditing ? null : res.id)} className={`flex items-center gap-1.5 px-3 md:px-4 py-1.5 md:py-2 rounded-xl text-[10px] md:text-[12px] font-bold transition-all ${isEditing ? 'bg-emerald-500 text-white shadow-md' : 'bg-slate-50 text-slate-400 hover:bg-slate-100'}`}>{isEditing ? 'Save' : 'Adjust'}</button>\n                              <button onClick={() => handleDeleteResource(res.id)} className=\"p-1.5 md:p-2.5 bg-slate-50 text-slate-300 hover:text-red-500 hover:bg-red-50 transition-all rounded-xl cursor-pointer\"><svg className=\"w-4 h-4 md:w-5 md:h-5 pointer-events-none\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}><path d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" /></svg></button>\n                            </div>\n                          </td>\n                        </tr>\n                      );\n                    })}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {activeTab === 'collections' && (\n          <div className=\"space-y-6 md:space-y-8\">\n            <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\n              <h2 className=\"text-[24px] md:text-[28px] font-[900] text-[#0F172A] tracking-tight\">Organization</h2>\n              <button onClick={handleAddCollection} className=\"w-full sm:w-auto bg-[#2563EB] text-white px-6 md:px-8 py-2.5 md:py-3 rounded-full text-[11px] md:text-[12px] font-black uppercase tracking-widest shadow-lg hover:opacity-90 transition-all\">New Collection</button>\n            </div>\n            <div className=\"grid grid-cols-1 gap-4 md:gap-6\">\n              {collections.map((col, idx) => {\n                const isEditing = editingCollectionId === col.id;\n                return (\n                  <div key={col.id} className={`p-5 md:p-8 rounded-[20px] md:rounded-[32px] border transition-all ${isEditing ? 'border-blue-400 bg-blue-50/10 ring-4 ring-blue-50 shadow-sm' : 'border-slate-100 bg-white hover:border-blue-200'}`}>\n                    <div className=\"flex flex-col gap-6\">\n                      <div className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center gap-3 md:gap-5\">\n                          <div className=\"text-xl md:text-2xl w-10 h-10 md:w-14 md:h-14 flex items-center justify-center bg-slate-50 rounded-[14px] md:rounded-[20px] shadow-sm\">\n                            {isEditing ? <input className=\"w-6 text-center bg-transparent border-b border-blue-400 outline-none\" value={col.icon} onChange={e => handleUpdateCollection(col.id, 'icon', e.target.value)} maxLength={2} /> : col.icon}\n                          </div>\n                          <div>\n                            {isEditing ? <input className=\"text-[16px] md:text-[20px] font-black text-[#0F172A] bg-transparent border-b-2 border-blue-400 outline-none\" value={col.name} onChange={e => handleUpdateCollection(col.id, 'name', e.target.value)} /> : <div className=\"text-[16px] md:text-[20px] font-black text-[#0F172A]\">{col.name}</div>}\n                            <div className=\"text-[9px] md:text-[11px] font-bold text-slate-400 uppercase tracking-widest mt-0.5 md:mt-1\">ID: {col.id}</div>\n                          </div>\n                        </div>\n                        <div className=\"flex items-center gap-1.5 md:gap-2\">\n                          <div className=\"flex items-center bg-slate-50 p-1 rounded-xl border border-slate-100 gap-1\">\n                            <button onClick={() => moveCollection(idx, 'up')} disabled={idx === 0} className=\"p-2 text-slate-400 hover:text-[#2563EB] hover:bg-white rounded-lg transition-all disabled:opacity-10 cursor-pointer\"><svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={3}><path d=\"M5 15l7-7 7 7\" /></svg></button>\n                            <button onClick={() => moveCollection(idx, 'down')} disabled={idx === collections.length - 1} className=\"p-2 text-slate-400 hover:text-[#2563EB] hover:bg-white rounded-lg transition-all disabled:opacity-10 cursor-pointer\"><svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={3}><path d=\"M19 9l-7 7-7-7\" /></svg></button>\n                          </div>\n                          <button onClick={() => setEditingCollectionId(isEditing ? null : col.id)} className={`px-3 md:px-5 py-1.5 md:py-2.5 rounded-xl text-[10px] md:text-[12px] font-bold transition-all ${isEditing ? 'bg-emerald-500 text-white' : 'bg-slate-50 text-slate-500 hover:bg-slate-100'}`}>{isEditing ? 'Save' : 'Adjust'}</button>\n                          <button onClick={() => handleDeleteCollection(col.id)} className=\"p-1.5 md:p-2.5 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-xl transition-all cursor-pointer\"><svg className=\"w-4 h-4 md:w-5 md:h-5 pointer-events-none\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}><path d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" /></svg></button>\n                        </div>\n                      </div>\n                      <div className=\"border-t border-slate-100 pt-4\">\n                        <div className=\"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3\">Sub-categories</div>\n                        <div className=\"flex flex-wrap gap-2 mb-4\">\n                          {(col.subCategories || []).map((sub, index) => (\n                            <div key={`${col.id}-sub-${index}`} className=\"flex items-center gap-2 bg-slate-50 border border-slate-100 px-3 py-1.5 rounded-full group/sub transition-all\">\n                              {isEditing && (\n                                <button \n                                  onClick={() => moveSubCategory(col.id, index, 'left')} \n                                  disabled={index === 0}\n                                  className=\"text-slate-300 hover:text-blue-500 disabled:opacity-20 cursor-pointer\"\n                                >\n                                  <svg className=\"w-3 h-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={4}><path d=\"M15 19l-7-7 7-7\" /></svg>\n                                </button>\n                              )}\n                              \n                              {isEditing ? (\n                                <input \n                                  className=\"text-[11px] font-bold text-blue-600 bg-transparent outline-none w-24 tracking-tight\" \n                                  value={sub} \n                                  onChange={(e) => handleUpdateSubCategoryName(col.id, index, e.target.value)} \n                                />\n                              ) : (\n                                <span className=\"text-[11px] font-bold text-slate-600 tracking-tight\">{sub}</span>\n                              )}\n\n                              {isEditing && (\n                                <div className=\"flex items-center gap-1.5 ml-1\">\n                                  <button \n                                    onClick={() => moveSubCategory(col.id, index, 'right')} \n                                    disabled={index === (col.subCategories?.length || 0) - 1}\n                                    className=\"text-slate-300 hover:text-blue-500 disabled:opacity-20 cursor-pointer\"\n                                  >\n                                    <svg className=\"w-3 h-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={4}><path d=\"M9 5l7 7-7 7\" /></svg>\n                                  </button>\n                                  <button onClick={() => handleRemoveSubCategory(col.id, index)} className=\"text-slate-300 hover:text-red-500 transition-colors cursor-pointer\">\n                                    <svg className=\"w-3 h-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={3}><path d=\"M6 18L18 6M6 6l12 12\" /></svg>\n                                  </button>\n                                </div>\n                              )}\n                            </div>\n                          ))}\n                        </div>\n                        {isEditing && (\n                          <div className=\"flex gap-2 max-w-sm\">\n                            <input className=\"flex-1 px-4 py-2 rounded-xl bg-white border border-slate-200 outline-none focus:ring-4 focus:ring-[#2563EB]/10 transition-all font-bold text-xs\" placeholder=\"Add sub-category...\" value={newSubCategory} onChange={(e) => setNewSubCategory(e.target.value)} onKeyDown={(e) => e.key === 'Enter' && handleAddSubCategory(col.id)} />\n                            <button onClick={() => handleAddSubCategory(col.id)} className=\"px-4 py-2 bg-slate-800 text-white rounded-xl text-[10px] font-black uppercase tracking-widest hover:bg-black transition-all\">Add</button>\n                          </div>\n                        )}\n                        <p className=\"mt-4 text-[11px] text-slate-400 font-medium italic\">\"All\" is a system-default filter and is always visible in the vault.</p>\n                      </div>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n        )}\n\n        {activeTab === 'settings' && (\n          <div className=\"space-y-6 md:space-y-8\">\n            <h2 className=\"text-[24px] md:text-[28px] font-[900] text-[#0F172A] tracking-tight\">Sync & Repository Settings</h2>\n            \n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div className=\"bg-slate-50 rounded-[20px] md:rounded-[32px] p-6 md:p-10 border border-slate-100 flex flex-col h-full\">\n                <div className=\"flex justify-between items-start mb-4\">\n                  <div>\n                    <h3 className=\"text-lg md:text-xl font-black text-[#0F172A] mb-1.5\">GitHub Synchronization</h3>\n                    <p className=\"text-slate-500 text-[13px] md:text-sm\">Download the current project state as a <strong>data.ts</strong> file.</p>\n                  </div>\n                  <div className={`px-3 py-1.5 rounded-full text-[9px] font-black uppercase tracking-widest ${isOutOfSync ? 'bg-amber-100 text-amber-600 animate-pulse' : 'bg-emerald-100 text-emerald-600'}`}>\n                    {isOutOfSync ? 'Sync Needed' : 'In Sync'}\n                  </div>\n                </div>\n\n                <div className=\"bg-white/50 p-4 rounded-2xl border border-slate-200 mb-6 space-y-3\">\n                  <div className=\"flex justify-between items-center text-[10px] font-black uppercase tracking-widest\">\n                    <span className=\"text-slate-400\">Source (data.ts):</span>\n                    <span className=\"text-slate-800\">{sourceVersion}</span>\n                  </div>\n                  <div className=\"flex justify-between items-center text-[10px] font-black uppercase tracking-widest\">\n                    <span className=\"text-slate-400\">Local (Browser):</span>\n                    <span className=\"text-slate-800\">{localVersion}</span>\n                  </div>\n                </div>\n\n                <p className=\"text-slate-500 text-[13px] md:text-sm mb-6 flex-1\">\n                  Replace the file of the same name in your GitHub repository. This triggers a cache reset for all users.\n                </p>\n                <div className=\"flex flex-col gap-3\">\n                  <button onClick={handleExportDataFile} className=\"w-full bg-[#0F172A] text-white px-8 py-4 rounded-2xl text-[12px] font-black uppercase tracking-widest shadow-lg hover:bg-black transition-all flex items-center justify-center gap-2 group\">\n                    <svg className=\"w-4 h-4 group-hover:translate-y-0.5 transition-transform\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth=\"3\"><path d=\"M4 16v1a3 3 0 003 3h10a3 3 0 003-3v-1m-4-4l-4 4m0 0l-4-4m4 4V4\" /></svg>\n                    Export data.ts for GitHub\n                  </button>\n                  <button onClick={handleResetCache} className=\"w-full bg-white border border-red-200 text-red-500 px-8 py-4 rounded-2xl text-[11px] font-black uppercase tracking-widest hover:bg-red-50 transition-all flex items-center justify-center gap-2\">\n                    <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth=\"3\"><path d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" /></svg>\n                    Reset Browser Cache\n                  </button>\n                </div>\n              </div>\n\n              <div className=\"bg-slate-50 rounded-[20px] md:rounded-[32px] p-6 md:p-10 border border-slate-100\">\n                <h3 className=\"text-lg md:text-xl font-black text-[#0F172A] mb-1.5 md:mb-2\">Tagline Keywords</h3>\n                <p className=\"text-slate-500 text-[13px] md:text-sm mb-6 md:mb-8\">Customize the cycling terms in the sidebar.</p>\n                <div className=\"flex flex-wrap gap-2 md:gap-3 mb-6 md:mb-8\">\n                  {taglineWords.map((word, idx) => (\n                    <div key={idx} className=\"flex items-center gap-2 md:gap-3 bg-white px-4 md:px-6 py-2 md:py-3 rounded-xl md:rounded-2xl border border-slate-200 shadow-sm group hover:border-blue-300 transition-all\">\n                      <span className=\"text-[13px] md:text-[15px] font-black text-slate-800 tracking-tight\">{word}</span>\n                      <button onClick={() => handleRemoveTagline(idx)} className=\"text-slate-300 hover:text-red-500 transition-colors cursor-pointer\"><svg className=\"w-4 h-4 md:w-5 md:h-5 pointer-events-none\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={3}><path d=\"M6 18L18 6M6 6l12 12\" /></svg></button>\n                    </div>\n                  ))}\n                </div>\n                <div className=\"flex flex-col sm:flex-row gap-2 md:gap-3\">\n                  <input className=\"flex-1 px-5 md:px-6 py-3 md:py-4 rounded-xl md:rounded-2xl bg-white border border-slate-200 outline-none focus:ring-4 focus:ring-[#2563EB]/10 transition-all font-bold text-sm md:text-base\" placeholder=\"Add Keyword...\" value={newTaglineWord} onChange={(e) => setNewTaglineWord(e.target.value)} onKeyDown={(e) => e.key === 'Enter' && handleAddTagline()} />\n                  <button onClick={handleAddTagline} className=\"px-6 md:px-8 py-3 md:py-4 bg-[#0F172A] text-white rounded-xl md:rounded-2xl text-[12px] md:text-[14px] font-black uppercase tracking-widest hover:bg-black transition-all\">Add</button>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default AdminDashboard;\n"
            }
          ]
        },
        {
          "path": "App.tsx",
          "generationType": 1,
          "isDone": true,
          "description": "Overhauled Contribute modal to support multiple suggestions and CSV export. Removed mailbox state and logic. Updated sidebar notifications to none.",
          "diffs": [
            {
              "target": "",
              "replacement": "\nimport React, { useState, useMemo, useEffect } from 'react';\nimport Sidebar from './components/Sidebar';\nimport ResourceCard from './components/ResourceCard';\nimport AdminDashboard from './components/AdminDashboard';\nimport { COLLECTIONS as initialCollections, RESOURCES as initialResources, TAGLINE_WORDS as initialTaglines, REPO_VERSION } from './data';\nimport { Resource, Collection, Theme } from './types';\n\nconst BRAND_BLUE = '#2563EB';\nconst DARK_NAVY = '#121A26';\n\nconst t = {\n  welcome: \"Welcome to\",\n  intro: \"The repository of open-source tools & resources for Health Economics and Outcomes Research\",\n  select: \"Select a collection to begin ðŸ‘‡\",\n  contributeBtn: \"Contribute to HEORepo\",\n  archive: \"Archive\",\n  vault: \"Vault\",\n  deck: \"Deck\",\n  search: \"Search...\",\n  items: \"ITEMS\",\n  adminPanel: \"ADMIN CONTROL PANEL\",\n  fullRepo: \"FULL REPOSITORY\",\n  exitAdmin: \"Exit Admin\",\n  management: \"Management\",\n  emptyTitle: \"Empty Archive\",\n  emptyDesc: \"Adjust your filters or try a different search term.\",\n  version: \"VERSION\",\n  adminMode: \"ADMIN MODE\",\n  adminPortal: \"Admin Portal\",\n  adminPortalDesc: \"Enter system password to access management tools.\",\n  password: \"Password\",\n  incorrectPassword: \"Incorrect Password\",\n  cancel: \"Cancel\",\n  confirm: \"Confirm\",\n  contributeTitle: \"Contribute\",\n  contributeDesc: \"Suggest high-quality HEOR resources. Please input your suggestions below, then click 'Export CSV' and email the resulting file to contact@heorepo.com for review.\",\n  title: \"Title\",\n  url: \"URL\",\n  suggestedCol: \"Suggested Collection\",\n  description: \"Description\",\n  yourName: \"Your Name\",\n  creditName: \"Credit my name\",\n  addToList: \"Add to List\",\n  exportCsv: \"Export CSV\",\n  subReceived: \"Export Successful\",\n  subReceivedDesc: \"CSV exported. Please email it to contact@heorepo.com\",\n  allResources: \"All Resources\"\n};\n\nconst sanitizeData = (str: string): string => {\n  if (typeof str !== 'string') return '';\n  return str.replace(/<[^>]*>?/gm, '').trim();\n};\n\nconst isValidLink = (url: string): boolean => {\n  try {\n    const parsed = new URL(url.startsWith('http') ? url : `https://${url}`);\n    return parsed.protocol === 'http:' || parsed.protocol === 'https:';\n  } catch {\n    return false;\n  }\n};\n\nconst escapeCSV = (val: string | undefined): string => {\n  if (!val) return '\"\"';\n  const str = val.toString().replace(/\"/g, '\"\"');\n  return `\"${str}\"`;\n};\n\nconst App: React.FC = () => {\n  const [activeTheme, setActiveTheme] = useState<string>('landing');\n  const [activeSubCategory, setActiveSubCategory] = useState<string>('all');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [isSidebarOpen, setIsSidebarOpen] = useState(false);\n  \n  const [isAdmin, setIsAdmin] = useState(false);\n  const [showLoginModal, setShowLoginModal] = useState(false);\n  const [password, setPassword] = useState('');\n  const [loginError, setLoginError] = useState(false);\n\n  // VERSION SYNC LOGIC\n  const shouldResetCache = useMemo(() => {\n    const savedVersionStr = localStorage.getItem('heo_repo_version');\n    const savedVersion = savedVersionStr ? parseInt(savedVersionStr) : 0;\n    const currentVersion = REPO_VERSION || 0;\n    return currentVersion > savedVersion;\n  }, []);\n\n  const [collections, setCollections] = useState<Collection[]>(() => {\n    try {\n      if (shouldResetCache) return initialCollections;\n      const saved = localStorage.getItem('heo_collections');\n      return saved ? JSON.parse(saved) : initialCollections;\n    } catch { return initialCollections; }\n  });\n  \n  const [resources, setResources] = useState<Resource[]>(() => {\n    try {\n      if (shouldResetCache) return initialResources;\n      const saved = localStorage.getItem('heo_resources');\n      return saved ? JSON.parse(saved) : initialResources;\n    } catch { return initialResources; }\n  });\n  \n  const [taglineWords, setTaglineWords] = useState<string[]>(() => {\n    try {\n      if (shouldResetCache) return initialTaglines;\n      const saved = localStorage.getItem('heo_tagline');\n      return saved ? JSON.parse(saved) : initialTaglines;\n    } catch { return initialTaglines; }\n  });\n\n  // Magic Keyword Trigger for Admin Portal\n  useEffect(() => {\n    if (searchQuery.toLowerCase() === 'admin') {\n      setSearchQuery('');\n      setShowLoginModal(true);\n    }\n  }, [searchQuery]);\n\n  useEffect(() => {\n    try {\n      localStorage.setItem('heo_collections', JSON.stringify(collections));\n      localStorage.setItem('heo_resources', JSON.stringify(resources));\n      localStorage.setItem('heo_tagline', JSON.stringify(taglineWords));\n      localStorage.setItem('heo_repo_version', (REPO_VERSION || 0).toString());\n    } catch (e) {\n      console.error(\"Storage Error: Local persistence failed.\", e);\n    }\n  }, [collections, resources, taglineWords]);\n\n  useEffect(() => {\n    setActiveSubCategory('all');\n  }, [activeTheme]);\n\n  const handleLogin = () => {\n    if (password.trim() === '123456') {\n      setIsAdmin(true);\n      setShowLoginModal(false);\n      setPassword('');\n      setLoginError(false);\n      setActiveTheme('admin-deck');\n    } else {\n      setLoginError(true);\n    }\n  };\n\n  const handleLogout = () => {\n    setIsAdmin(false);\n    if (activeTheme === 'admin-deck') {\n      setActiveTheme('landing');\n    }\n  };\n\n  const [showContributeModal, setShowContributeModal] = useState(false);\n  const [suggestionList, setSuggestionList] = useState<any[]>([]);\n  const [contributionData, setContributionData] = useState({ \n    title: '', \n    url: '', \n    description: '', \n    userName: '', \n    category: Theme.GENERAL, \n    wantsCredit: true \n  });\n  const [contributionSuccess, setContributionSuccess] = useState(false);\n\n  const handleAddSuggestionToList = () => {\n    if (!contributionData.title || !contributionData.url) {\n      alert(\"Please provide at least a title and a valid URL.\");\n      return;\n    }\n    if (!isValidLink(contributionData.url)) {\n      alert(\"Please provide a secure and valid URL.\");\n      return;\n    }\n\n    setSuggestionList(prev => [...prev, {\n      title: sanitizeData(contributionData.title),\n      url: contributionData.url,\n      description: sanitizeData(contributionData.description),\n      userName: sanitizeData(contributionData.userName),\n      category: contributionData.category,\n      wantsCredit: contributionData.wantsCredit\n    }]);\n\n    setContributionData({ \n      title: '', \n      url: '', \n      description: '', \n      userName: contributionData.userName, \n      category: Theme.GENERAL, \n      wantsCredit: contributionData.wantsCredit \n    });\n  };\n\n  const handleRemoveFromList = (idx: number) => {\n    setSuggestionList(prev => prev.filter((_, i) => i !== idx));\n  };\n\n  const handleExportCSV = () => {\n    if (suggestionList.length === 0) {\n      alert(\"Add at least one suggestion to the list before exporting.\");\n      return;\n    }\n\n    const headers = ['Title', 'Description', 'URL', 'Contributor', 'Category', 'SubCategory'];\n    const csvRows = suggestionList.map(item => [\n      escapeCSV(item.title),\n      escapeCSV(item.description),\n      escapeCSV(item.url),\n      escapeCSV(item.wantsCredit ? item.userName : 'Anonymous'),\n      escapeCSV(item.category),\n      escapeCSV('all')\n    ].join(\",\"));\n\n    const csvContent = [headers.join(\",\"), ...csvRows].join(\"\\n\");\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement(\"a\");\n    link.setAttribute(\"href\", url);\n    link.setAttribute(\"download\", `heorepo_suggestions_${new Date().getTime()}.csv`);\n    link.click();\n\n    setContributionSuccess(true);\n    setTimeout(() => {\n      setShowContributeModal(false);\n      setContributionSuccess(false);\n      setSuggestionList([]);\n    }, 3000);\n  };\n\n  const filteredResources = useMemo(() => {\n    return resources.filter(res => {\n      const matchesTheme = activeTheme === 'all' || res.category === activeTheme;\n      const matchesSubCategory = activeSubCategory === 'all' || res.subCategory?.toLowerCase() === activeSubCategory.toLowerCase();\n      const matchesSearch = res.title.toLowerCase().includes(searchQuery.toLowerCase()) || \n                            res.description.toLowerCase().includes(searchQuery.toLowerCase());\n      return matchesTheme && matchesSubCategory && matchesSearch;\n    });\n  }, [activeTheme, activeSubCategory, searchQuery, resources]);\n\n  const currentCollection = useMemo(() => \n    collections.find(c => c.id === activeTheme), \n    [activeTheme, collections]\n  );\n\n  const isAdminDeckActive = activeTheme === 'admin-deck' && isAdmin;\n  const isLandingActive = activeTheme === 'landing';\n  const collectionName = isAdminDeckActive ? t.management : (activeTheme === 'all' ? t.archive : currentCollection?.name || t.archive);\n  \n  const subCategoryFilters = useMemo(() => {\n    if (!currentCollection) return [];\n    return [...(currentCollection.subCategories || []), 'All'];\n  }, [currentCollection]);\n\n  return (\n    <div className=\"flex h-screen bg-[#FCFDFF] text-slate-900 overflow-hidden font-['Inter'] antialiased relative\">\n      <Sidebar \n        collections={collections} \n        activeTheme={activeTheme} \n        onThemeSelect={setActiveTheme} \n        isOpen={isSidebarOpen}\n        onClose={() => setIsSidebarOpen(false)}\n        onAdminClick={() => isAdmin ? handleLogout() : null}\n        isAdminActive={isAdmin}\n        taglineWords={taglineWords}\n      />\n\n      <main className=\"flex-1 flex flex-col overflow-hidden\">\n        {!isLandingActive && (\n          <header className=\"bg-white px-4 md:px-8 pt-4 md:pt-8 pb-5 border-b border-[#F1F5F9]/60 relative z-30\">\n            <div className=\"max-w-[1440px] mx-auto\">\n              <div className=\"flex items-center justify-between mb-4 lg:hidden\">\n                <div className=\"flex items-center font-[900] text-[26px] tracking-[-0.04em] leading-none select-none cursor-pointer\" onClick={() => setActiveTheme('landing')}>\n                  <span style={{ color: DARK_NAVY }}>HEO</span>\n                  <span style={{ backgroundImage: `linear-gradient(to right, ${DARK_NAVY} 50%, ${BRAND_BLUE} 50%)`, WebkitBackgroundClip: 'text', WebkitTextFillColor: 'transparent', display: 'inline-block', position: 'relative', padding: '0 0.2em', margin: '0 -0.2em' }}>R</span>\n                  <span style={{ color: BRAND_BLUE }}>epo</span>\n                  <div className=\"ml-[2px] self-end\" style={{ backgroundColor: BRAND_BLUE, width: '6.5px', height: '6.5px', marginBottom: '3px' }}></div>\n                </div>\n                <button onClick={() => setIsSidebarOpen(true)} className=\"p-2 hover:bg-slate-50 rounded-xl transition-colors\"><svg className=\"w-6 h-6 text-slate-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2.5}><path d=\"M4 6h16M4 12h16M4 18h16\" /></svg></button>\n              </div>\n\n              <div className=\"flex flex-col md:flex-row md:items-end justify-between gap-4 md:gap-8 mb-6\">\n                <div className=\"flex flex-col gap-2 md:gap-3\">\n                  <div className=\"flex items-center gap-3 md:gap-4\">\n                    <div className=\"px-3 py-1 rounded-full bg-[#EFF6FF] border border-[#2563EB]/20 text-[9px] md:text-[10px] font-[800] tracking-[0.12em] md:tracking-[0.15em] text-[#2563EB] uppercase\">\n                      {isAdminDeckActive ? t.adminPanel : (activeTheme === 'all' ? t.fullRepo : (currentCollection?.name.toUpperCase() || 'UNKNOWN'))}\n                    </div>\n                    {!isAdminDeckActive && <div className=\"text-[9px] md:text-[10px] font-[800] tracking-[0.12em] md:tracking-[0.15em] text-[#64748B] uppercase\">{filteredResources.length} {t.items}</div>}\n                  </div>\n                  <h1 className=\"text-[32px] md:text-[48px] font-[900] tracking-[-0.04em] leading-[0.9] text-[#0F172A]\">{collectionName} <span className=\"text-[#D1D5DB] font-[900]\">{isAdminDeckActive ? t.deck : t.vault}</span></h1>\n                </div>\n\n                <div className=\"flex flex-col sm:flex-row items-stretch sm:items-center gap-3 md:gap-6 pb-1\">\n                  {!isAdminDeckActive && (\n                    <div className=\"relative w-full sm:w-[280px] md:w-[380px]\">\n                      <div className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-[#94A3B8]\"><svg className=\"h-4 w-4 md:h-5 md:w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2.5}><path d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" /></svg></div>\n                      <input type=\"text\" placeholder={t.search} className=\"block w-full pl-10 md:pl-12 pr-6 py-2.5 md:py-3.5 bg-[#F8FAFC] border border-[#F1F5F9] rounded-full text-[14px] md:text-[15px] font-medium text-[#1E293B] focus:ring-1 focus:ring-[#4F46E5] focus:bg-white outline-none shadow-sm transition-all placeholder-[#94A3B8]\" value={searchQuery} onChange={(e) => setSearchQuery(e.target.value)} />\n                    </div>\n                  )}\n                  <button onClick={() => isAdmin ? handleLogout() : setShowContributeModal(true)} className={`flex items-center justify-center gap-2 px-6 md:px-8 py-2.5 md:py-3.5 ${isAdminDeckActive ? 'bg-[#0F172A]' : 'bg-[#2563EB]'} text-white text-[14px] md:text-[15px] font-[700] rounded-full hover:opacity-90 transition-all shadow-md active:scale-[0.96]`}><svg className=\"w-4 h-4 md:w-5 md:h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={3}><path d={isAdminDeckActive ? \"M15 19l-7-7 7-7\" : \"M12 4v16m8-8H4\"} /></svg><span className=\"whitespace-nowrap\">{isAdminDeckActive ? t.exitAdmin : t.contributeBtn}</span></button>\n                </div>\n              </div>\n\n              {!isAdminDeckActive && subCategoryFilters.length > 0 && (\n                <div className=\"min-h-[48px] flex items-center overflow-hidden\">\n                  <div className=\"flex items-center gap-2 md:gap-3 overflow-x-auto pb-2 -mx-4 px-4 scrollbar-hide snap-x snap-mandatory\">\n                    {subCategoryFilters.map((sub) => {\n                      const filterValue = sub.toLowerCase() === 'all' ? 'all' : sub;\n                      const isSelected = activeSubCategory === filterValue;\n                      \n                      return (\n                        <button \n                          key={sub} \n                          onClick={() => setActiveSubCategory(filterValue)} \n                          className={`px-5 md:px-6 py-2 md:py-2.5 rounded-full text-[10px] md:text-[11px] font-[800] tracking-[0.1em] uppercase whitespace-nowrap active:scale-95 border transition-all duration-300 snap-center ${\n                            isSelected \n                            ? 'bg-[#0F172A] text-white border-[#0F172A] shadow-lg shadow-slate-200' \n                            : 'bg-white text-[#475569] border-[#E2E8F0] hover:border-[#CBD5E1]'\n                          }`}\n                        >\n                          {sub}\n                        </button>\n                      );\n                    })}\n                  </div>\n                </div>\n              )}\n            </div>\n          </header>\n        )}\n\n        <div className=\"flex-1 overflow-y-auto px-4 md:px-8 py-6 md:py-10 scroll-smooth\">\n          <div className=\"max-w-[1440px] mx-auto h-full\">\n            {isLandingActive ? (\n              <div className=\"flex flex-col items-center justify-center h-full text-center animate-card-entry pb-20 select-none relative overflow-visible\">\n                <div className=\"absolute inset-0 pointer-events-none overflow-visible\">\n                   <span className=\"absolute top-[20%] left-[15%] text-4xl animate-float opacity-40 md:opacity-100\">ðŸŽ‰</span>\n                   <span className=\"absolute top-[15%] right-[20%] text-4xl animate-float opacity-40 md:opacity-100\">ðŸ“Š</span>\n                   <span className=\"absolute bottom-[30%] left-[20%] text-4xl animate-float opacity-40 md:opacity-100\">ðŸš€</span>\n                   <span className=\"absolute bottom-[40%] right-[15%] text-4xl animate-float opacity-40 md:opacity-100\">ðŸ’Š</span>\n                   <span className=\"absolute top-[45%] left-[5%] text-3xl animate-float opacity-30 md:opacity-80\" style={{ animationDelay: '0.2s' }}>ðŸ“ˆ</span>\n                   <span className=\"absolute top-[35%] right-[5%] text-3xl animate-float opacity-30 md:opacity-80\" style={{ animationDelay: '0.7s' }}>ðŸ’‰</span>\n                </div>\n                <span className=\"text-lg md:text-2xl font-[600] text-slate-400 mb-2 md:mb-4 block tracking-tight relative z-10\">{t.welcome}</span>\n                <div className=\"flex flex-col items-center mb-6 md:mb-10 relative z-10\">\n                  <div className=\"flex items-center justify-center font-[900] text-[56px] md:text-[110px] tracking-[-0.04em] leading-none\">\n                    <span style={{ color: DARK_NAVY }}>HEO</span>\n                    <span style={{ backgroundImage: `linear-gradient(to right, ${DARK_NAVY} 50%, ${BRAND_BLUE} 50%)`, WebkitBackgroundClip: 'text', WebkitTextFillColor: 'transparent', display: 'inline-block', position: 'relative', padding: '0 0.2em', margin: '0 -0.2em' }}>R</span>\n                    <span style={{ color: BRAND_BLUE }}>epo</span>\n                    <div className=\"ml-[4px] md:ml-[10px] self-end\" style={{ backgroundColor: BRAND_BLUE, width: '14px', height: '14px', marginBottom: '8px' }}></div>\n                  </div>\n                  <div className=\"max-w-3xl flex flex-col items-center px-4\">\n                    <p className=\"text-[14px] md:text-[19px] text-slate-500 font-medium mt-4 md:mt-6 leading-relaxed\">The repository of open-source tools & resources <br className=\"hidden md:block\" /> for <span style={{ color: BRAND_BLUE, fontWeight: 900 }}>H</span>ealth <span style={{ color: BRAND_BLUE, fontWeight: 900 }}>E</span>conomics and <span style={{ color: BRAND_BLUE, fontWeight: 900 }}>O</span>utcomes <span style={{ color: BRAND_BLUE, fontWeight: 900 }}>R</span>esearch.</p>\n                  </div>\n                  <div className=\"mt-12 flex flex-col items-center gap-6 w-full max-w-xl px-4 relative z-10\">\n                    <p className=\"text-slate-400 font-bold text-xs uppercase tracking-[0.2em]\">{t.select}</p>\n                    <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-4 w-full\">\n                      {collections.map(col => (\n                        <button key={col.id} onClick={() => setActiveTheme(col.id)} className=\"flex flex-col items-center justify-center p-6 bg-white border border-slate-100 rounded-[24px] hover:border-blue-400 hover:shadow-xl hover:-translate-y-1 transition-all duration-300 group\">\n                          <span className=\"text-3xl mb-3 group-hover:scale-110 transition-transform\">{col.icon}</span>\n                          <span className=\"text-[11px] font-black uppercase tracking-widest text-slate-600 group-hover:text-blue-600\">{col.name}</span>\n                        </button>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ) : isAdminDeckActive ? (\n              <AdminDashboard \n                resources={resources} setResources={setResources}\n                collections={collections} setCollections={setCollections}\n                taglineWords={taglineWords} setTaglineWords={setTaglineWords}\n              />\n            ) : (\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 md:gap-8 auto-rows-fr\">\n                {filteredResources.length > 0 ? filteredResources.map((res, idx) => (<ResourceCard key={res.id} resource={res} index={idx} />)) : (\n                  <div className=\"col-span-full py-20 text-center\">\n                    <div className=\"w-20 h-20 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-6\"><svg className=\"w-10 h-10 text-slate-300\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}><path d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" /></svg></div>\n                    <h3 className=\"text-xl font-black text-slate-800 mb-2\">{t.emptyTitle}</h3>\n                    <p className=\"text-slate-500 max-w-md mx-auto\">{t.emptyDesc}</p>\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n        </div>\n      </main>\n\n      {showLoginModal && (\n        <div className=\"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300\">\n          <div className=\"bg-white rounded-[32px] p-8 md:p-10 w-full max-w-md shadow-2xl border border-white/20 animate-in zoom-in-95 duration-300\">\n            <h2 className=\"text-2xl font-black text-slate-900 mb-2\">{t.adminPortal}</h2>\n            <p className=\"text-slate-500 text-sm mb-6\">{t.adminPortalDesc}</p>\n            <div className=\"space-y-4\">\n              <div>\n                <label className=\"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1\">{t.password}</label>\n                <input \n                  type=\"text\" \n                  value={password} \n                  onChange={(e) => setPassword(e.target.value)} \n                  onKeyDown={(e) => e.key === 'Enter' && handleLogin()} \n                  className={`w-full px-6 py-4 rounded-2xl bg-slate-50 border ${loginError ? 'border-red-500' : 'border-slate-100'} focus:ring-4 focus:ring-blue-500/10 focus:bg-white outline-none transition-all font-bold`} \n                  placeholder=\"Enter Password\" \n                  autoFocus \n                />\n                {loginError && <p className=\"text-red-500 text-[11px] font-bold mt-2 ml-1\">{t.incorrectPassword}</p>}\n              </div>\n              <div className=\"flex gap-3 pt-2\">\n                <button onClick={() => setShowLoginModal(false)} className=\"flex-1 px-6 py-4 rounded-2xl bg-slate-100 text-slate-600 font-bold hover:bg-slate-200 transition-all\">{t.cancel}</button>\n                <button onClick={handleLogin} className=\"flex-1 px-6 py-4 rounded-2xl bg-[#2563EB] text-white font-bold hover:opacity-90 shadow-lg shadow-blue-500/20 transition-all\">{t.confirm}</button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {showContributeModal && (\n        <div className=\"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300 overflow-y-auto\">\n          <div className=\"bg-white rounded-[32px] p-8 md:p-10 w-full max-w-2xl shadow-2xl border border-white/20 animate-in zoom-in-95 duration-300 my-8\">\n            {contributionSuccess ? (\n              <div className=\"text-center py-10 animate-in zoom-in duration-500\">\n                <div className=\"w-20 h-20 bg-emerald-100 text-emerald-600 rounded-full flex items-center justify-center mx-auto mb-6\"><svg className=\"w-10 h-10\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={3}><path d=\"M5 13l4 4L19 7\" /></svg></div>\n                <h2 className=\"text-2xl font-black text-slate-900 mb-2\">{t.subReceived}</h2>\n                <p className=\"text-slate-500\">{t.subReceivedDesc}</p>\n              </div>\n            ) : (\n              <>\n                <div className=\"flex justify-between items-start mb-6\">\n                  <div>\n                    <h2 className=\"text-2xl font-black text-slate-900 mb-1\">{t.contributeTitle}</h2>\n                    <p className=\"text-slate-500 text-sm leading-relaxed\">{t.contributeDesc}</p>\n                  </div>\n                  <button onClick={() => setShowContributeModal(false)} className=\"p-2 hover:bg-slate-100 rounded-full text-slate-400 transition-colors\"><svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2.5}><path d=\"M6 18L18 6M6 6l12 12\" /></svg></button>\n                </div>\n\n                <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n                  {/* LEFT: Input Form */}\n                  <div className=\"space-y-4\">\n                    <div className=\"bg-slate-50/50 p-6 rounded-[24px] border border-slate-100 space-y-4\">\n                      <div className=\"grid grid-cols-1 gap-4\">\n                        <div>\n                          <label className=\"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1\">{t.title}</label>\n                          <input className=\"w-full px-5 py-3 rounded-xl bg-white border border-slate-200 focus:ring-4 focus:ring-blue-500/10 outline-none font-bold text-sm\" value={contributionData.title} onChange={e => setContributionData({...contributionData, title: e.target.value})} placeholder=\"Resource name\" />\n                        </div>\n                        <div>\n                          <label className=\"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1\">{t.url}</label>\n                          <input className=\"w-full px-5 py-3 rounded-xl bg-white border border-slate-200 focus:ring-4 focus:ring-blue-500/10 outline-none font-bold text-sm\" value={contributionData.url} onChange={e => setContributionData({...contributionData, url: e.target.value})} placeholder=\"https://...\" />\n                        </div>\n                      </div>\n                      <div>\n                        <label className=\"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1\">{t.suggestedCol}</label>\n                        <select className=\"w-full px-5 py-3 rounded-xl bg-white border border-slate-200 focus:ring-4 focus:ring-blue-500/10 outline-none font-bold text-sm\" value={contributionData.category} onChange={e => setContributionData({...contributionData, category: e.target.value as any})}>\n                          {collections.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}\n                        </select>\n                      </div>\n                      <div>\n                        <label className=\"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1\">{t.description}</label>\n                        <textarea rows={2} className=\"w-full px-5 py-3 rounded-xl bg-white border border-slate-200 focus:ring-4 focus:ring-blue-500/10 outline-none font-bold text-sm resize-none\" value={contributionData.description} onChange={e => setContributionData({...contributionData, description: e.target.value})} placeholder=\"Briefly describe the resource...\" />\n                      </div>\n                      <div>\n                        <label className=\"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1\">{t.yourName}</label>\n                        <input className=\"w-full px-5 py-3 rounded-xl bg-white border border-slate-200 focus:ring-4 focus:ring-blue-500/10 outline-none font-bold text-sm mb-3\" value={contributionData.userName} onChange={e => setContributionData({...contributionData, userName: e.target.value})} placeholder=\"Your Name\" />\n                        <label className=\"flex items-center gap-2 cursor-pointer select-none\">\n                          <input type=\"checkbox\" className=\"w-4 h-4 rounded border-slate-300 text-blue-600\" checked={contributionData.wantsCredit} onChange={e => setContributionData({...contributionData, wantsCredit: e.target.checked})} />\n                          <span className=\"text-xs font-bold text-slate-500\">{t.creditName}</span>\n                        </label>\n                      </div>\n                      <button onClick={handleAddSuggestionToList} className=\"w-full bg-[#0F172A] text-white py-3 rounded-xl font-black uppercase tracking-widest text-[11px] hover:bg-black transition-all shadow-sm\">\n                        {t.addToList}\n                      </button>\n                    </div>\n                  </div>\n\n                  {/* RIGHT: List Preview & Export */}\n                  <div className=\"flex flex-col h-full\">\n                    <div className=\"flex-1 overflow-y-auto max-h-[400px] pr-2 space-y-3 scrollbar-hide\">\n                      <div className=\"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1 flex justify-between items-center\">\n                        <span>List of Suggestions</span>\n                        <span className=\"text-blue-600 bg-blue-50 px-2 py-0.5 rounded-full\">{suggestionList.length}</span>\n                      </div>\n                      {suggestionList.length === 0 ? (\n                        <div className=\"h-40 border-2 border-dashed border-slate-100 rounded-[24px] flex items-center justify-center text-slate-300 font-bold text-xs italic\">\n                          No suggestions added yet.\n                        </div>\n                      ) : (\n                        suggestionList.map((item, idx) => (\n                          <div key={idx} className=\"p-4 bg-white border border-slate-100 rounded-2xl shadow-sm relative group animate-card-entry\">\n                            <button onClick={() => handleRemoveFromList(idx)} className=\"absolute top-2 right-2 p-1 text-slate-300 hover:text-red-500 transition-colors opacity-0 group-hover:opacity-100\">\n                              <svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path d=\"M6 18L18 6M6 6l12 12\" /></svg>\n                            </button>\n                            <div className=\"font-black text-slate-800 text-[13px] truncate pr-6\">{item.title}</div>\n                            <div className=\"text-[10px] text-blue-500 font-bold truncate\">{item.url}</div>\n                          </div>\n                        ))\n                      )}\n                    </div>\n                    \n                    <button \n                      onClick={handleExportCSV} \n                      disabled={suggestionList.length === 0}\n                      className={`w-full mt-6 py-4 rounded-2xl font-black uppercase tracking-widest shadow-lg transition-all ${\n                        suggestionList.length > 0 \n                        ? 'bg-[#2563EB] text-white shadow-blue-500/20 hover:opacity-90 active:scale-[0.98]' \n                        : 'bg-slate-100 text-slate-400 cursor-not-allowed shadow-none'\n                      }`}\n                    >\n                      {t.exportCsv}\n                    </button>\n                  </div>\n                </div>\n              </>\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default App;\n"
            }
          ]
        }
      ]
    },
    "createdTimestamp": {
      "seconds": 1770186136,
      "nanos": 419000000
    },
    "doneTimestamp": {
      "seconds": 1770186137,
      "nanos": 394000000
    }
  },
  {
    "id": 30,
    "author": "model",
    "payload": {
      "type": "error",
      "error": "An internal error occurred.",
      "metadata": {
        "message": "Failed to run code assistant. Please try again."
      },
      "isCancelError": false,
      "isLoopingError": false
    },
    "createdTimestamp": {
      "seconds": 1770186265,
      "nanos": 52000000
    },
    "doneTimestamp": {
      "seconds": 1770186265,
      "nanos": 52000000
    }
  },
  {
    "id": 31,
    "author": "user",
    "payload": {
      "type": "text",
      "text": "There was an unexpected error. Finish what you were doing.",
      "files": [],
      "fileUploads": [],
      "cssBlocks": [],
      "cMarkNode": {}
    },
    "createdTimestamp": {
      "seconds": 1770186267,
      "nanos": 843000000
    }
  },
  {
    "id": 32,
    "author": "model",
    "payload": {
      "type": "thinking",
      "text": "**Refining User Contribution**\n\nI'm now focused on refining the user contribution process. Specifically, I've decided to remove the mailbox and related admin functions. Furthermore, I'll modify the \"Contribute\" modal to allow multiple resource suggestions and change the \"Submit\" button to \"Export\" for enhanced clarity and user experience.\n\n\n**Streamlining Export Process**\n\nI'm now implementing the export functionality for user contributions. I'll add an introduction line to instruct users to send the generated CSV to `contact@heorepo.com`. I am also planning to remove any existing submission-related interfaces in `types.ts`, and update the `t` object for translations in `App.tsx`. Furthermore, I'll modify `showContributeModal`, add state for `suggestionList`, and update functions to build and export the CSV file. Finally, I will remove existing \"mailbox\" logic.\n\n\n**Implementing UI Cleanup**\n\nI'm now streamlining the user interface and removing old features. Specifically, I've removed the \"Mailbox\" tab and its associated logic from `AdminDashboard.tsx`. Additionally, I removed any notification badge logic related to the mailbox from `Sidebar.tsx`. I'm focusing on cleaning up the `types.ts` file. Finally, I've added a multiple suggestion UI and CSV export function to the contribution modal in `App.tsx`, and I'm ensuring the output matches the expected CSV format.\n\n\n",
      "cMarkNode": {}
    },
    "createdTimestamp": {
      "seconds": 1770186267,
      "nanos": 843000000
    },
    "doneTimestamp": {
      "seconds": 1770186284,
      "nanos": 248000000
    }
  },
  {
    "id": 33,
    "author": "model",
    "payload": {
      "type": "generationTable",
      "entries": [
        {
          "path": "types.ts",
          "generationType": 1,
          "isDone": true,
          "description": "Cleaned up types.ts to ensure no submission-related interfaces are present.",
          "diffs": [
            {
              "target": "",
              "replacement": "\nexport interface Resource {\n  id: string;\n  title: string;\n  description: string;\n  url: string;\n  domain: string;\n  imageUrl: string;\n  addedDate: string;\n  contributor: string;\n  category: string;\n  subCategory?: string;\n  fileType?: string;\n  status?: 'verified' | 'warning' | 'new';\n  isBookmarked?: boolean;\n}\n\nexport interface Collection {\n  id: string;\n  name: string;\n  icon: string;\n  description: string;\n  subCategories?: string[];\n}\n\nexport enum Theme {\n  ALL = 'all',\n  GENERAL = 'general',\n  ECONOMIC_MODELING = 'modelling',\n  SYSTEMATIC_REVIEWS = 'meta-analysis',\n  SURVIVAL_ANALYSIS = 'survival-analysis',\n  NEWS = 'news'\n}\n"
            }
          ]
        },
        {
          "path": "components/Sidebar.tsx",
          "generationType": 1,
          "isDone": true,
          "description": "Removed any logic related to mailbox notifications from the Sidebar.",
          "diffs": [
            {
              "target": "",
              "replacement": "\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Collection, Theme } from '../types';\n\ninterface SidebarProps {\n  collections: Collection[];\n  activeTheme: string;\n  onThemeSelect: (id: string) => void;\n  isOpen: boolean;\n  onClose: () => void;\n  onAdminClick: () => void;\n  isAdminActive: boolean;\n  taglineWords: string[];\n}\n\nconst BRAND_BLUE = '#2563EB';\nconst DARK_NAVY = '#121A26';\nconst SLATE_LIGHTER = '#94A3B8'; \nconst SLATE_EXTRA_LIGHTER = '#CBD5E1'; \n\nconst t = {\n  home: \"Welcome\",\n  collections: \"COLLECTIONS\",\n  adminConsole: \"ADMIN CONSOLE\",\n  adminDeck: \"Admin Deck\",\n  exitAdminMode: \"Exit Admin Mode\",\n  adminPortal: \"Admin Portal\",\n  repository: \"REPOSITORY\",\n  for: \"FOR\"\n};\n\nconst TypingTagline: React.FC<{ words: string[] }> = ({ words }) => {\n  const [index, setIndex] = useState(0);\n  const [subIndex, setSubIndex] = useState(0);\n  const [reverse, setReverse] = useState(false);\n  const [pause, setPause] = useState(false);\n\n  const TYPE_SPEED = 80;\n  const DELETE_SPEED = 40;\n  const PAUSE_TIME = 1500;\n\n  useEffect(() => {\n    if (!words || words.length === 0) return;\n    if (index >= words.length) {\n      setIndex(0);\n      setSubIndex(0);\n      setReverse(false);\n      setPause(false);\n      return;\n    }\n    if (pause) {\n      const timeout = setTimeout(() => {\n        setPause(false);\n        setReverse(true);\n      }, PAUSE_TIME);\n      return () => clearTimeout(timeout);\n    }\n    if (reverse && subIndex === 0) {\n      setReverse(false);\n      setIndex((prev) => (prev + 1) % words.length);\n      return;\n    }\n    const currentWord = words[index];\n    if (!reverse && subIndex === currentWord.length) {\n      setPause(true);\n      return;\n    }\n    const timeout = setTimeout(() => {\n      setSubIndex((prev) => prev + (reverse ? -1 : 1));\n    }, reverse ? DELETE_SPEED : TYPE_SPEED);\n    return () => clearTimeout(timeout);\n  }, [subIndex, index, reverse, pause, words]);\n\n  if (!words || words.length === 0) return null;\n  const currentWord = words[index % words.length] || '';\n  const displayText = currentWord.substring(0, subIndex);\n\n  return (\n    <div className=\"flex items-center gap-[3px] h-full\">\n      <span style={{ color: BRAND_BLUE, fontWeight: 900, display: 'inline-block' }}>\n        {displayText || '\\u00A0'}\n      </span>\n      <div style={{ backgroundColor: BRAND_BLUE, width: '4px', height: '4px', flexShrink: 0 }}></div>\n    </div>\n  );\n};\n\nconst Sidebar: React.FC<SidebarProps> = ({ \n  collections, \n  activeTheme, \n  onThemeSelect, \n  isOpen, \n  onClose, \n  onAdminClick, \n  isAdminActive, \n  taglineWords\n}) => {\n  const isLandingActive = activeTheme === 'landing';\n\n  return (\n    <>\n      {isOpen && (\n        <div className=\"fixed inset-0 bg-black/10 backdrop-blur-sm z-40 lg:hidden transition-opacity duration-500\" onClick={onClose} />\n      )}\n\n      <aside className={`\n        fixed inset-y-0 left-0 z-50 w-[280px] lg:w-1/6 lg:min-w-[240px] bg-white border-r border-[#E5E7EB] transform transition-transform duration-500 cubic-bezier(0.16, 1, 0.3, 1) lg:relative lg:translate-x-0 will-change-transform\n        ${isOpen ? 'translate-x-0' : '-translate-x-full'} flex flex-col\n      `}>\n        <div className=\"p-8 pb-4\">\n          <div className=\"flex flex-col items-start select-none cursor-pointer\" onClick={() => onThemeSelect('landing')}>\n            <div className=\"flex items-center font-[900] text-[32px] tracking-[-0.04em] shadow-blue-500/10 leading-none antialiased\">\n              <span style={{ color: DARK_NAVY }}>HEO</span>\n              <span style={{ \n                backgroundImage: `linear-gradient(to right, ${DARK_NAVY} 50%, ${BRAND_BLUE} 50%)`,\n                WebkitBackgroundClip: 'text',\n                WebkitTextFillColor: 'transparent',\n                display: 'inline-block',\n                position: 'relative',\n                padding: '0 0.2em',\n                margin: '0 -0.2em'\n              }}>R</span>\n              <span style={{ color: BRAND_BLUE }}>epo</span>\n              <div className=\"ml-[2px] self-end\" style={{ backgroundColor: BRAND_BLUE, width: '8px', height: '8px', marginBottom: '4px' }}></div>\n            </div>\n            \n            <div className=\"flex flex-col gap-[5px] uppercase mt-4 antialiased leading-none\" style={{ fontSize: '10px' }}>\n              <div className=\"flex items-center\" style={{ height: '12px' }}>\n                <span style={{ color: SLATE_LIGHTER, fontWeight: 900, letterSpacing: '0.45em' }}>{t.repository}</span>\n              </div>\n              <div className=\"flex items-center\" style={{ height: '12px' }}>\n                <span style={{ color: SLATE_EXTRA_LIGHTER, fontWeight: 900, letterSpacing: '0.25em' }}>{t.for}</span>\n              </div>\n              <div style={{ letterSpacing: '0.25em', height: '12px', display: 'flex', alignItems: 'center' }}>\n                <TypingTagline words={taglineWords} />\n              </div>\n            </div>\n          </div>\n        </div>\n\n        <nav className=\"flex-1 mt-8 px-4 space-y-10 overflow-y-auto scrollbar-hide pb-10\">\n          <div>\n            <div className=\"space-y-2.5\">\n               <button\n                onClick={() => { onThemeSelect('landing'); onClose(); }}\n                className={`w-full flex items-center gap-4 px-4 py-3.5 rounded-[20px] transition-all duration-500 cubic-bezier(0.16, 1, 0.3, 1) group ${\n                  isLandingActive \n                  ? 'bg-[#05070a] text-white shadow-[0_12px_24px_rgba(0,0,0,0.18)]' \n                  : 'text-[#334155] hover:bg-[#f8fafc] hover:translate-x-1'\n                }`}\n              >\n                <div className={`w-8 h-8 rounded-[11px] flex items-center justify-center shrink-0 transition-all duration-500 ${\n                  isLandingActive ? 'bg-white/15' : 'bg-[#f1f5f9] group-hover:bg-[#e2e8f0]'\n                }`}>\n                  <svg className={`w-4 h-4 ${isLandingActive ? 'text-white' : 'text-[#475569]'}`} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth=\"2.5\">\n                    <path d=\"M3 12l2-2m0 0l7-7 7 7M5 10v10a1 1 0 001 1h3m10-11l2 2m-2-2v10a1 1 0 01-1 1h-3m-6 0a1 1 0 001-1v-4a1 1 0 011-1h2a1 1 0 011 1v4a1 1 0 001 1m-6 0h6\" />\n                  </svg>\n                </div>\n                <span className=\"text-[14.5px] font-[800] tracking-tight truncate\">{t.home}</span>\n              </button>\n            </div>\n          </div>\n\n          <div>\n            <h3 className=\"px-4 text-[11px] font-[800] text-[#64748B] uppercase tracking-[0.12em] mb-5\">\n              {t.collections}\n            </h3>\n            <div className=\"space-y-2.5\">\n              {collections.map((col) => {\n                const isActive = activeTheme === col.id;\n                return (\n                  <button\n                    key={col.id}\n                    onClick={() => { onThemeSelect(col.id); onClose(); }}\n                    className={`w-full flex items-center gap-4 px-4 py-3.5 rounded-[20px] transition-all duration-500 cubic-bezier(0.16, 1, 0.3, 1) group ${\n                      isActive \n                      ? 'bg-[#05070a] text-white shadow-[0_12px_24px_rgba(0,0,0,0.18)]' \n                      : 'text-[#334155] hover:bg-[#f8fafc] hover:translate-x-1'\n                    }`}\n                  >\n                    <div className={`w-8 h-8 rounded-[11px] flex items-center justify-center shrink-0 transition-all duration-500 ${\n                      isActive ? 'bg-white/15' : 'bg-[#f1f5f9] group-hover:bg-[#e2e8f0]'\n                    }`}>\n                      {col.id === Theme.GENERAL ? (\n                        <svg className={`w-4 h-4 ${isActive ? 'text-white' : 'text-[#475569]'}`} viewBox=\"0 0 24 24\" fill=\"none\" stroke=\"currentColor\" strokeWidth=\"2.5\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M19 21V5a2 2 0 00-2-2H7a2 2 0 00-2 2v16m14 0h2m-2 0h-5m-9 0H3m2 0h5M9 7h1m-1 4h1m4-4h1m-1 4h1m-5 10v-5a1 1 0 011-1h2a1 1 0 011 1v5m-4 0h4\" />\n                        </svg>\n                      ) : col.id === Theme.ECONOMIC_MODELING ? (\n                        <svg className={`w-4 h-4 ${isActive ? 'text-white' : 'text-[#475569]'}`} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth=\"2.5\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M7 12l3-3 3 3 4-4M8 21l4-4 4 4M3 4h18M4 4h16v12a1 1 0 01-1 1H5a1 1 0 01-1-1V4z\" />\n                        </svg>\n                      ) : col.id === Theme.SYSTEMATIC_REVIEWS ? (\n                        <svg className={`w-4 h-4 ${isActive ? 'text-white' : 'text-[#475569]'}`} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth=\"2.5\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0zM10 7v3m0 0v3m0-3h3m-3 0H7\" />\n                        </svg>\n                      ) : col.id === Theme.NEWS ? (\n                        <svg className={`w-4 h-4 ${isActive ? 'text-white' : 'text-[#475569]'}`} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth=\"2.5\">\n                          <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M15 17h5l-1.405-1.405A2.032 2.032 0 0118 14.158V11a6.002 6.002 0 00-4-5.659V5a2 2 0 10-4 0v.341C7.67 6.165 6 8.388 6 11v3.159c0 .538-.214 1.055-.595 1.436L4 17h5m6 0v1a3 3 0 11-6 0v-1m6 0H9\" />\n                        </svg>\n                      ) : (\n                        <svg className={`w-4 h-4 ${isActive ? 'text-white' : 'text-[#475569]'}`} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth=\"2.5\"><rect x=\"3\" y=\"3\" width=\"7\" height=\"7\" rx=\"1\"/><rect x=\"14\" y=\"3\" width=\"7\" height=\"7\" rx=\"1\"/><rect x=\"14\" y=\"14\" width=\"7\" height=\"7\" rx=\"1\"/><rect x=\"3\" y=\"14\" width=\"7\" height=\"7\" rx=\"1\"/></svg>\n                      )}\n                    </div>\n                    <span className=\"text-[14.5px] font-[800] tracking-tight truncate\">{col.name}</span>\n                  </button>\n                );\n              })}\n            </div>\n          </div>\n\n          {isAdminActive && (\n            <div className=\"animate-card-entry\">\n              <h3 className=\"px-4 text-[11px] font-[800] text-[#64748b] uppercase tracking-[0.12em] mb-5\">\n                {t.adminConsole}\n              </h3>\n              <div className=\"space-y-2.5\">\n                <button\n                  onClick={() => { onThemeSelect('admin-deck'); onClose(); }}\n                  className={`w-full flex items-center gap-4 px-4 py-3.5 rounded-[20px] transition-all duration-500 cubic-bezier(0.16, 1, 0.3, 1) group relative ${\n                    activeTheme === 'admin-deck' \n                    ? 'bg-[#2563EB] text-white shadow-[0_12px_24px_rgba(37,99,235,0.25)]' \n                    : 'text-[#334155] hover:bg-slate-50 hover:translate-x-1'\n                  }`}\n                >\n                  <div className={`w-8 h-8 rounded-full flex items-center justify-center shrink-0 transition-all duration-500 ${\n                    activeTheme === 'admin-deck' ? 'bg-white/20' : 'bg-slate-100 group-hover:bg-slate-200'\n                  }`}>\n                    <svg className={`w-4 h-4 ${activeTheme === 'admin-deck' ? 'text-white' : 'text-slate-500'}`} fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth=\"2.5\">\n                      <path d=\"M12 15v2m-6 4h12a2 2 0 002-2v-6a2 2 0 00-2-2H6a2 2 0 00-2 2v6a2 2 0 002 2zm10-10V7a4 4 0 00-8 0v4h8z\" />\n                    </svg>\n                  </div>\n                  <span className=\"text-[14.5px] font-[900] tracking-tight\">{t.adminDeck}</span>\n                </button>\n              </div>\n            </div>\n          )}\n        </nav>\n\n        {isAdminActive && (\n          <div className=\"p-4 border-t border-[#E5E7EB]/40 bg-white\">\n            <button \n              onClick={onAdminClick}\n              className=\"w-full flex items-center gap-2.5 px-4 py-3.5 text-red-500 hover:bg-red-50 cursor-pointer transition-all duration-300 group rounded-[20px]\"\n            >\n              <svg xmlns=\"http://www.w3.org/2000/svg\" className=\"w-[18px] h-[18px] transition-transform group-hover:scale-110\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth=\"2.5\">\n                <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M17 16l4-4m0 0l-4-4m4 4H7m6 4v1a3 3 0 01-3 3H6a3 3 0 01-3-3V7a3 3 0 013-3h4a3 3 0 013 3v1\" />\n              </svg>\n              <span className=\"text-[14px] font-[800] tracking-tight antialiased uppercase\">\n                {t.exitAdminMode}\n              </span>\n            </button>\n          </div>\n        )}\n      </aside>\n    </>\n  );\n};\n\nexport default Sidebar;\n"
            }
          ]
        },
        {
          "path": "components/AdminDashboard.tsx",
          "generationType": 1,
          "isDone": true,
          "description": "Removed the Mailbox tab from AdminDashboard. Mailbox functionality is no longer needed since contributions are via direct CSV export by users.",
          "diffs": [
            {
              "target": "",
              "replacement": "\nimport React, { useState, useEffect, useRef } from 'react';\nimport { Resource, Collection, Theme } from '../types';\nimport { REPO_VERSION } from '../data';\n\ninterface AdminDashboardProps {\n  resources: Resource[];\n  setResources: React.Dispatch<React.SetStateAction<Resource[]>>;\n  collections: Collection[];\n  setCollections: React.Dispatch<React.SetStateAction<Collection[]>>;\n  taglineWords: string[];\n  setTaglineWords: React.Dispatch<React.SetStateAction<string[]>>;\n  initialTab?: 'resources' | 'collections' | 'settings';\n}\n\nconst sanitizeInput = (str: string): string => {\n  if (typeof str !== 'string') return '';\n  return str.replace(/<[^>]*>?/gm, '').trim();\n};\n\nconst parseCSV = (text: string): string[][] => {\n  const result: string[][] = [];\n  let row: string[] = [];\n  let cell = '';\n  let inQuotes = false;\n\n  for (let i = 0; i < text.length; i++) {\n    const char = text[i];\n    const nextChar = text[i + 1];\n\n    if (inQuotes) {\n      if (char === '\"' && nextChar === '\"') {\n        cell += '\"';\n        i++;\n      } else if (char === '\"') {\n        inQuotes = false;\n      } else {\n        cell += char;\n      }\n    } else {\n      if (char === '\"') {\n        inQuotes = true;\n      } else if (char === ',') {\n        row.push(cell);\n        cell = '';\n      } else if (char === '\\n' || char === '\\r') {\n        if (cell !== '' || row.length > 0) {\n          row.push(cell);\n          result.push(row);\n        }\n        row = [];\n        cell = '';\n        if (char === '\\r' && nextChar === '\\n') i++;\n      } else {\n        cell += char;\n      }\n    }\n  }\n  if (cell !== '' || row.length > 0) {\n    row.push(cell);\n    result.push(row);\n  }\n  return result;\n};\n\nconst escapeCSV = (val: string | undefined): string => {\n  if (!val) return '\"\"';\n  const str = val.toString().replace(/\"/g, '\"\"');\n  return `\"${str}\"`;\n};\n\nconst AdminDashboard: React.FC<AdminDashboardProps> = ({ \n  resources, \n  setResources, \n  collections, \n  setCollections, \n  taglineWords, \n  setTaglineWords, \n  initialTab = 'resources' \n}) => {\n  const [editingId, setEditingId] = useState<string | null>(null);\n  const [editingCollectionId, setEditingCollectionId] = useState<string | null>(null);\n  const [activeTab, setActiveTab] = useState<'resources' | 'collections' | 'settings'>(initialTab as any);\n  const [newTaglineWord, setNewTaglineWord] = useState('');\n  const [newSubCategory, setNewSubCategory] = useState('');\n  const [statusMessage, setStatusMessage] = useState<{ text: string, type: 'success' | 'error' } | null>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const localVersion = localStorage.getItem('heo_repo_version') || '0';\n  const sourceVersion = (REPO_VERSION || 0).toString();\n  const isOutOfSync = parseInt(sourceVersion) > parseInt(localVersion);\n\n  useEffect(() => {\n    if (initialTab && activeTab !== initialTab) {\n      setActiveTab(initialTab as any);\n    }\n  }, [initialTab]);\n\n  const showStatus = (text: string, type: 'success' | 'error' = 'success') => {\n    setStatusMessage({ text, type });\n    setTimeout(() => setStatusMessage(null), 6000);\n  };\n\n  const handleExportDataFile = () => {\n    try {\n      if (collections.length === 0 || resources.length === 0) {\n        showStatus(\"Cannot export empty repository.\", \"error\");\n        return;\n      }\n\n      const collectionsStr = JSON.stringify(collections, null, 2);\n      const resourcesStr = JSON.stringify(resources, null, 2);\n      const taglineStr = JSON.stringify(taglineWords, null, 2);\n      const currentTimestamp = Date.now();\n\n      const fileContent = `import { Collection, Resource, Theme } from './types';\n\nexport const REPO_VERSION = ${currentTimestamp};\n\nexport const COLLECTIONS: Collection[] = ${collectionsStr};\n\nexport const RESOURCES: Resource[] = ${resourcesStr};\n\nexport const TAGLINE_WORDS: string[] = ${taglineStr};\n`;\n\n      const blob = new Blob([fileContent], { type: 'text/typescript' });\n      const url = URL.createObjectURL(blob);\n      const link = document.createElement(\"a\");\n      link.setAttribute(\"href\", url);\n      link.setAttribute(\"download\", \"data.ts\");\n      link.click();\n      showStatus(\"data.ts exported with new version timestamp. Push this to GitHub now!\");\n    } catch (err) {\n      showStatus(\"Export failed.\", \"error\");\n      console.error(err);\n    }\n  };\n\n  const handleResetCache = () => {\n    if (window.confirm(\"This will clear your local edits and revert to the data currently in your repository (data.ts). Continue?\")) {\n      localStorage.removeItem('heo_collections');\n      localStorage.removeItem('heo_resources');\n      localStorage.removeItem('heo_tagline');\n      localStorage.removeItem('heo_repo_version');\n      window.location.reload();\n    }\n  };\n\n  const moveResource = (index: number, direction: 'up' | 'down') => {\n    const newResources = [...resources];\n    const targetIndex = direction === 'up' ? index - 1 : index + 1;\n    if (targetIndex >= 0 && targetIndex < newResources.length) {\n      [newResources[index], newResources[targetIndex]] = [newResources[targetIndex], newResources[index]];\n      setResources(newResources);\n    }\n  };\n\n  const moveCollection = (index: number, direction: 'up' | 'down') => {\n    const newCollections = [...collections];\n    const targetIndex = direction === 'up' ? index - 1 : index + 1;\n    if (targetIndex >= 0 && targetIndex < newCollections.length) {\n      [newCollections[index], newCollections[targetIndex]] = [newCollections[targetIndex], newCollections[index]];\n      setCollections(newCollections);\n    }\n  };\n\n  const moveSubCategory = (colId: string, index: number, direction: 'left' | 'right') => {\n    setCollections(prev => prev.map(col => {\n      if (col.id === colId) {\n        const newSubs = [...(col.subCategories || [])];\n        const targetIndex = direction === 'left' ? index - 1 : index + 1;\n        if (targetIndex >= 0 && targetIndex < newSubs.length) {\n          [newSubs[index], newSubs[targetIndex]] = [newSubs[targetIndex], newSubs[index]];\n          return { ...col, subCategories: newSubs };\n        }\n      }\n      return col;\n    }));\n  };\n\n  const handleDownloadTemplate = () => {\n    const headers = ['Title', 'Description', 'URL', 'Contributor', 'Category', 'SubCategory'];\n    const example = ['Example Analysis', 'Resource description.', 'https://example.com', 'Admin', Theme.GENERAL, 'Basics'];\n    const csvContent = [headers.join(\",\"), example.map(v => escapeCSV(v)).join(\",\")].join(\"\\n\");\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement(\"a\");\n    link.setAttribute(\"href\", url);\n    link.setAttribute(\"download\", \"heorepo_template.csv\");\n    link.click();\n  };\n\n  const handleImportCSV = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n    const reader = new FileReader();\n    reader.onload = (e) => {\n      try {\n        const text = e.target?.result as string;\n        const rows = parseCSV(text);\n        if (rows.length < 2) {\n          showStatus(\"CSV has no data rows.\", \"error\");\n          return;\n        }\n\n        const importedResources: Resource[] = [];\n        const existingUrls = new Set(resources.map(r => r.url.toLowerCase()));\n        let skipped = 0;\n\n        for (let i = 1; i < rows.length; i++) {\n          const row = rows[i];\n          if (row.length < 3) continue;\n\n          const title = row[0]?.trim();\n          const desc = row[1]?.trim();\n          const urlStr = row[2]?.trim();\n          const contributor = row[3]?.trim() || 'Admin';\n          const catId = row[4]?.trim() || Theme.GENERAL;\n          const subCat = row[5]?.trim() || 'all';\n\n          if (!title || !urlStr || existingUrls.has(urlStr.toLowerCase())) {\n            skipped++;\n            continue;\n          }\n\n          let domain = 'UNKNOWN';\n          try {\n            const urlToTest = urlStr.startsWith('http') ? urlStr : `https://${urlStr}`;\n            domain = new URL(urlToTest).hostname.toUpperCase();\n          } catch (e) {}\n\n          importedResources.push({\n            id: Math.random().toString(36).substr(2, 9),\n            title,\n            description: desc || '',\n            url: urlStr,\n            domain,\n            imageUrl: 'https://images.unsplash.com/photo-1460925895917-afdab827c52f?auto=format&fit=crop&q=80&w=600',\n            addedDate: new Date().toLocaleDateString('en-GB'),\n            contributor,\n            category: collections.some(c => c.id === catId) ? catId : (collections[0]?.id || Theme.GENERAL),\n            subCategory: subCat\n          });\n        }\n\n        if (importedResources.length > 0) {\n          setResources(prev => [...importedResources, ...prev]);\n          showStatus(`Imported ${importedResources.length} resources. Skipped ${skipped} (duplicates/invalid).`);\n        } else {\n          showStatus(`No new resources were found in the CSV.`, \"error\");\n        }\n      } catch (err) {\n        showStatus(\"Error parsing CSV. Check file formatting.\", \"error\");\n      }\n    };\n    reader.readAsText(file);\n    if (fileInputRef.current) fileInputRef.current.value = '';\n  };\n\n  const handleUpdateResource = (id: string, field: keyof Resource, value: any) => {\n    setResources(prev => prev.map(res => {\n      if (res.id === id) {\n        let finalValue = value;\n        if (typeof value === 'string' && (field === 'title' || field === 'description' || field === 'contributor')) {\n          finalValue = value.replace(/<[^>]*>?/gm, '');\n        }\n        const updated = { ...res, [field]: finalValue };\n        if (field === 'url') {\n          try {\n            const urlToTest = value.startsWith('http') ? value : `https://${value}`;\n            updated.domain = new URL(urlToTest).hostname.toUpperCase();\n          } catch (e) {}\n        }\n        return updated;\n      }\n      return res;\n    }));\n  };\n\n  const handleDeleteResource = (id: string) => {\n    if (!window.confirm(\"Delete this resource?\")) return;\n    setResources(prev => prev.filter(res => res.id !== id));\n    if (editingId === id) setEditingId(null);\n  };\n\n  const handleAddResource = () => {\n    const defaultCategory = collections.length > 0 ? collections[0].id : Theme.GENERAL;\n    const newRes: Resource = {\n      id: Math.random().toString(36).substr(2, 9),\n      title: 'New Resource',\n      description: 'Enter description...',\n      contributor: 'Admin',\n      url: 'https://',\n      domain: 'NEW.COM',\n      imageUrl: 'https://images.unsplash.com/photo-1551288049-bbda38a594a0?auto=format&fit=crop&q=80&w=600',\n      addedDate: new Date().toLocaleDateString('en-GB'),\n      category: defaultCategory,\n      subCategory: 'all'\n    };\n    setResources(prev => [newRes, ...prev]);\n    setEditingId(newRes.id);\n    setActiveTab('resources');\n  };\n\n  const handleUpdateCollection = (id: string, field: keyof Collection, value: any) => {\n    setCollections(prev => prev.map(col => {\n      if (col.id === id) {\n        let finalValue = value;\n        if (typeof value === 'string' && (field === 'name' || field === 'description')) {\n          finalValue = value.replace(/<[^>]*>?/gm, '');\n        }\n        return { ...col, [field]: finalValue };\n      }\n      return col;\n    }));\n  };\n\n  const handleUpdateSubCategoryName = (colId: string, index: number, newName: string) => {\n    setCollections(prev => prev.map(col => {\n      if (col.id === colId) {\n        const newSubs = [...(col.subCategories || [])];\n        newSubs[index] = newName.replace(/<[^>]*>?/gm, '');\n        return { ...col, subCategories: newSubs };\n      }\n      return col;\n    }));\n  };\n\n  const handleAddSubCategory = (colId: string) => {\n    const cleanSub = sanitizeInput(newSubCategory).trim();\n    if (!cleanSub) return;\n    if (cleanSub.toLowerCase() === 'all') {\n      alert(\"'All' is a reserved system filter and cannot be added as a custom subcategory.\");\n      return;\n    }\n    setCollections(prev => prev.map(col => {\n      if (col.id === colId) {\n        const subs = col.subCategories || [];\n        if (subs.includes(cleanSub)) return col;\n        return { ...col, subCategories: [...subs, cleanSub] };\n      }\n      return col;\n    }));\n    setNewSubCategory('');\n  };\n\n  const handleRemoveSubCategory = (colId: string, index: number) => {\n    setCollections(prev => prev.map(col => {\n      if (col.id === colId) {\n        const subName = (col.subCategories || [])[index];\n        setResources(r => r.map(res => res.category === colId && res.subCategory === subName ? { ...res, subCategory: 'all' } : res));\n        return { ...col, subCategories: (col.subCategories || []).filter((_, i) => i !== index) };\n      }\n      return col;\n    }));\n  };\n\n  const handleDeleteCollection = (id: string) => {\n    if (!window.confirm(\"Move resources to General and delete?\")) return;\n    setCollections(prev => prev.filter(c => c.id !== id));\n    setResources(prev => prev.map(res => res.category === id ? { ...res, category: Theme.GENERAL, subCategory: 'all' } : res));\n    if (editingCollectionId === id) setEditingCollectionId(null);\n  };\n\n  const handleAddCollection = () => {\n    const newId = `custom-${Math.random().toString(36).substr(2, 5)}`;\n    const newCol: Collection = { id: newId, name: 'New Category', icon: 'ðŸ“', description: '', subCategories: ['General'] };\n    setCollections(prev => [...prev, newCol]);\n    setEditingCollectionId(newId);\n    setActiveTab('collections');\n  };\n\n  const handleAddTagline = () => {\n    const cleanWord = sanitizeInput(newTaglineWord).trim();\n    if (cleanWord) {\n      setTaglineWords(prev => [...prev, cleanWord]);\n      setNewTaglineWord('');\n    }\n  };\n\n  const handleRemoveTagline = (index: number) => {\n    if (taglineWords.length > 1) setTaglineWords(prev => prev.filter((_, i) => i !== index));\n  };\n\n  return (\n    <div className=\"bg-white rounded-[24px] md:rounded-[32px] border border-slate-200 shadow-xl overflow-hidden animate-card-entry ring-1 ring-black/5\">\n      <div className=\"flex bg-slate-50/50 border-b border-slate-200 p-2 gap-1.5 md:gap-2 overflow-x-auto scrollbar-hide\">\n        {['resources', 'collections', 'settings'].map((tab) => (\n          <button \n            key={tab}\n            onClick={() => setActiveTab(tab as any)} \n            className={`flex-1 py-2.5 md:py-3 px-4 md:px-6 rounded-xl md:rounded-2xl text-[10px] md:text-[12px] font-[800] uppercase tracking-wider transition-all duration-300 whitespace-nowrap relative ${activeTab === tab ? 'bg-white text-[#2563EB] shadow-sm border border-slate-200' : 'text-slate-500 hover:text-slate-700'}`}\n          >\n            {tab === 'resources' ? 'Vault' : tab.charAt(0).toUpperCase() + tab.slice(1)}\n          </button>\n        ))}\n      </div>\n\n      <div className=\"p-4 md:p-10\">\n        {activeTab === 'resources' && (\n          <div className=\"space-y-6 md:space-y-8\">\n            <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\n              <div>\n                <h2 className=\"text-[24px] md:text-[28px] font-[900] text-[#0F172A] tracking-tight\">Management</h2>\n                <div className=\"flex items-center gap-2 mt-1 min-h-[24px]\">\n                  {statusMessage ? (\n                    <span className={`text-[11px] font-black px-3 py-1 rounded-full animate-pulse uppercase tracking-widest ${statusMessage.type === 'success' ? 'bg-emerald-50 text-emerald-600' : 'bg-red-50 text-red-600'}`}>\n                      {statusMessage.text}\n                    </span>\n                  ) : (\n                    <p className=\"text-slate-500 text-xs md:text-sm\">Manage resources locally. Click 'Export data.ts' to update the GitHub repository.</p>\n                  )}\n                </div>\n              </div>\n              <div className=\"flex flex-wrap items-center gap-2 w-full sm:w-auto\">\n                <input type=\"file\" ref={fileInputRef} onChange={handleImportCSV} accept=\".csv\" className=\"hidden\" />\n                <div className=\"flex bg-slate-100 p-1 rounded-full border border-slate-200\">\n                   <button onClick={handleDownloadTemplate} className=\"px-4 py-2 hover:bg-white hover:shadow-sm rounded-full text-[9px] md:text-[10px] font-black uppercase tracking-widest text-slate-500 transition-all\">CSV Temp</button>\n                   <button onClick={() => fileInputRef.current?.click()} className=\"px-4 py-2 hover:bg-white hover:shadow-sm rounded-full text-[9px] md:text-[10px] font-black uppercase tracking-widest text-slate-500 transition-all\">CSV Imp</button>\n                   <button onClick={handleExportDataFile} className=\"px-4 py-2 bg-emerald-50 text-emerald-600 hover:bg-emerald-100 rounded-full text-[9px] md:text-[10px] font-black uppercase tracking-widest transition-all\">Export data.ts</button>\n                </div>\n                <button onClick={handleAddResource} className=\"bg-[#2563EB] text-white px-6 md:px-8 py-2.5 md:py-3 rounded-full text-[11px] md:text-[12px] font-black uppercase tracking-widest shadow-lg hover:opacity-90 active:scale-95 transition-all\">Add New</button>\n              </div>\n            </div>\n            \n            <div className=\"rounded-[16px] md:rounded-[24px] border border-slate-200 overflow-hidden shadow-sm\">\n              <div className=\"overflow-x-auto\">\n                <table className=\"w-full text-left border-collapse min-w-[900px]\">\n                  <thead className=\"bg-[#F8FAFC] border-b border-slate-200\">\n                    <tr className=\"text-[9px] md:text-[11px] font-black uppercase tracking-widest text-slate-400\">\n                      <th className=\"px-4 md:px-8 py-4\">Resource</th>\n                      <th className=\"px-4 md:px-8 py-4\">Link (URL)</th>\n                      <th className=\"px-4 md:px-8 py-4 w-[180px]\">Category</th>\n                      <th className=\"px-4 md:px-8 py-4 w-[180px]\">Sub-Category</th>\n                      <th className=\"px-4 md:px-8 py-4 text-right w-[160px]\">Actions</th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"divide-y divide-slate-100 bg-white\">\n                    {resources.map((res, idx) => {\n                      const isEditing = editingId === res.id;\n                      const activeCol = collections.find(c => c.id === res.category);\n                      const availableSubCategories = activeCol?.subCategories || [];\n                      return (\n                        <tr key={res.id} className={`group transition-colors ${isEditing ? 'bg-blue-50/40' : 'hover:bg-slate-50/50'}`}>\n                          <td className=\"px-4 md:px-8 py-5\">\n                            {isEditing ? (\n                              <div className=\"space-y-1.5 max-w-xs\">\n                                <input className=\"w-full font-bold text-[#0F172A] text-sm outline-none border-b-2 border-blue-400 bg-transparent py-0.5\" value={res.title} onChange={e => handleUpdateResource(res.id, 'title', e.target.value)} />\n                                <textarea className=\"w-full text-[11px] text-slate-500 bg-transparent outline-none resize-none\" value={res.description} onChange={e => handleUpdateResource(res.id, 'description', e.target.value)} rows={2} />\n                              </div>\n                            ) : (\n                              <div className=\"max-w-[180px] md:max-w-xs\">\n                                <div className=\"font-bold text-[#0F172A] text-sm group-hover:text-blue-600 transition-colors truncate\">{res.title}</div>\n                                <div className=\"text-[10px] md:text-[11px] text-slate-400 font-medium line-clamp-1\">{res.description}</div>\n                              </div>\n                            )}\n                          </td>\n                          <td className=\"px-4 md:px-8 py-5\">\n                            {isEditing ? (\n                              <div className=\"space-y-1.5\">\n                                <input className=\"w-full text-[11px] text-blue-500 font-bold outline-none bg-white border border-blue-100 rounded px-2 py-1\" value={res.url} onChange={e => handleUpdateResource(res.id, 'url', e.target.value)} />\n                                <div className=\"text-[9px] text-slate-400 font-black uppercase\">{res.domain}</div>\n                              </div>\n                            ) : (\n                              <div className=\"max-w-[150px] md:max-w-[200px]\">\n                                <div className=\"text-[11px] text-blue-600 font-bold truncate\">{res.url}</div>\n                                <div className=\"text-[9px] text-slate-400 font-bold uppercase tracking-wider\">{res.domain}</div>\n                              </div>\n                            )}\n                          </td>\n                          <td className=\"px-4 md:px-8 py-5 w-[180px]\">\n                            {isEditing ? (\n                              <select className=\"text-[10px] font-black px-2 py-1.5 rounded bg-white border border-blue-200 text-blue-600 uppercase tracking-widest outline-none w-full shadow-sm\" value={res.category} onChange={e => { handleUpdateResource(res.id, 'category', e.target.value); handleUpdateResource(res.id, 'subCategory', 'all'); }}>\n                                {collections.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}\n                              </select>\n                            ) : (\n                              <span className=\"text-[9px] md:text-[10px] font-black px-2 py-1.5 rounded bg-slate-100 text-slate-500 uppercase tracking-widest inline-block w-full text-center\">{activeCol?.name || 'General'}</span>\n                            )}\n                          </td>\n                          <td className=\"px-4 md:px-8 py-5 w-[180px]\">\n                            {isEditing ? (\n                              <select className=\"text-[10px] font-black px-2 py-1.5 rounded bg-white border border-blue-200 text-blue-600 uppercase tracking-widest outline-none w-full shadow-sm\" value={res.subCategory || 'all'} onChange={e => handleUpdateResource(res.id, 'subCategory', e.target.value)}>\n                                <option value=\"all\">ALL</option>\n                                {availableSubCategories.map(s => <option key={s} value={s}>{s.toUpperCase()}</option>)}\n                              </select>\n                            ) : (\n                              <span className=\"text-[9px] md:text-[10px] font-black px-2 py-1.5 rounded bg-slate-100 text-slate-500 uppercase tracking-widest inline-block w-full text-center\">{res.subCategory?.toUpperCase() || 'ALL'}</span>\n                            )}\n                          </td>\n                          <td className=\"px-4 md:px-8 py-5 text-right w-[160px]\">\n                            <div className=\"flex justify-end items-center gap-1.5 md:gap-2\">\n                              <div className=\"flex flex-col gap-1 mr-1\">\n                                <button onClick={() => moveResource(idx, 'up')} disabled={idx === 0} className=\"p-1 hover:bg-slate-100 rounded text-slate-300 hover:text-[#2563EB] disabled:opacity-20 transition-all cursor-pointer\"><svg className=\"w-3 h-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={4}><path d=\"M5 15l7-7 7 7\" /></svg></button>\n                                <button onClick={() => moveResource(idx, 'down')} disabled={idx === resources.length - 1} className=\"p-1 hover:bg-slate-100 rounded text-slate-300 hover:text-[#2563EB] disabled:opacity-20 transition-all cursor-pointer\"><svg className=\"w-3 h-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={4}><path d=\"M19 9l-7 7-7-7\" /></svg></button>\n                              </div>\n                              <button onClick={() => setEditingId(isEditing ? null : res.id)} className={`flex items-center gap-1.5 px-3 md:px-4 py-1.5 md:py-2 rounded-xl text-[10px] md:text-[12px] font-bold transition-all ${isEditing ? 'bg-emerald-500 text-white shadow-md' : 'bg-slate-50 text-slate-400 hover:bg-slate-100'}`}>{isEditing ? 'Save' : 'Adjust'}</button>\n                              <button onClick={() => handleDeleteResource(res.id)} className=\"p-1.5 md:p-2.5 bg-slate-50 text-slate-300 hover:text-red-500 hover:bg-red-50 transition-all rounded-xl cursor-pointer\"><svg className=\"w-4 h-4 md:w-5 md:h-5 pointer-events-none\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}><path d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" /></svg></button>\n                            </div>\n                          </td>\n                        </tr>\n                      );\n                    })}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {activeTab === 'collections' && (\n          <div className=\"space-y-6 md:space-y-8\">\n            <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\n              <h2 className=\"text-[24px] md:text-[28px] font-[900] text-[#0F172A] tracking-tight\">Organization</h2>\n              <button onClick={handleAddCollection} className=\"w-full sm:w-auto bg-[#2563EB] text-white px-6 md:px-8 py-2.5 md:py-3 rounded-full text-[11px] md:text-[12px] font-black uppercase tracking-widest shadow-lg hover:opacity-90 transition-all\">New Collection</button>\n            </div>\n            <div className=\"grid grid-cols-1 gap-4 md:gap-6\">\n              {collections.map((col, idx) => {\n                const isEditing = editingCollectionId === col.id;\n                return (\n                  <div key={col.id} className={`p-5 md:p-8 rounded-[20px] md:rounded-[32px] border transition-all ${isEditing ? 'border-blue-400 bg-blue-50/10 ring-4 ring-blue-50 shadow-sm' : 'border-slate-100 bg-white hover:border-blue-200'}`}>\n                    <div className=\"flex flex-col gap-6\">\n                      <div className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center gap-3 md:gap-5\">\n                          <div className=\"text-xl md:text-2xl w-10 h-10 md:w-14 md:h-14 flex items-center justify-center bg-slate-50 rounded-[14px] md:rounded-[20px] shadow-sm\">\n                            {isEditing ? <input className=\"w-6 text-center bg-transparent border-b border-blue-400 outline-none\" value={col.icon} onChange={e => handleUpdateCollection(col.id, 'icon', e.target.value)} maxLength={2} /> : col.icon}\n                          </div>\n                          <div>\n                            {isEditing ? <input className=\"text-[16px] md:text-[20px] font-black text-[#0F172A] bg-transparent border-b-2 border-blue-400 outline-none\" value={col.name} onChange={e => handleUpdateCollection(col.id, 'name', e.target.value)} /> : <div className=\"text-[16px] md:text-[20px] font-black text-[#0F172A]\">{col.name}</div>}\n                            <div className=\"text-[9px] md:text-[11px] font-bold text-slate-400 uppercase tracking-widest mt-0.5 md:mt-1\">ID: {col.id}</div>\n                          </div>\n                        </div>\n                        <div className=\"flex items-center gap-1.5 md:gap-2\">\n                          <div className=\"flex items-center bg-slate-50 p-1 rounded-xl border border-slate-100 gap-1\">\n                            <button onClick={() => moveCollection(idx, 'up')} disabled={idx === 0} className=\"p-2 text-slate-400 hover:text-[#2563EB] hover:bg-white rounded-lg transition-all disabled:opacity-10 cursor-pointer\"><svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={3}><path d=\"M5 15l7-7 7 7\" /></svg></button>\n                            <button onClick={() => moveCollection(idx, 'down')} disabled={idx === collections.length - 1} className=\"p-2 text-slate-400 hover:text-[#2563EB] hover:bg-white rounded-lg transition-all disabled:opacity-10 cursor-pointer\"><svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={3}><path d=\"M19 9l-7 7-7-7\" /></svg></button>\n                          </div>\n                          <button onClick={() => setEditingCollectionId(isEditing ? null : col.id)} className={`px-3 md:px-5 py-1.5 md:py-2.5 rounded-xl text-[10px] md:text-[12px] font-bold transition-all ${isEditing ? 'bg-emerald-500 text-white' : 'bg-slate-50 text-slate-500 hover:bg-slate-100'}`}>{isEditing ? 'Save' : 'Adjust'}</button>\n                          <button onClick={() => handleDeleteCollection(col.id)} className=\"p-1.5 md:p-2.5 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-xl transition-all cursor-pointer\"><svg className=\"w-4 h-4 md:w-5 md:h-5 pointer-events-none\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}><path d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" /></svg></button>\n                        </div>\n                      </div>\n                      <div className=\"border-t border-slate-100 pt-4\">\n                        <div className=\"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3\">Sub-categories</div>\n                        <div className=\"flex flex-wrap gap-2 mb-4\">\n                          {(col.subCategories || []).map((sub, index) => (\n                            <div key={`${col.id}-sub-${index}`} className=\"flex items-center gap-2 bg-slate-50 border border-slate-100 px-3 py-1.5 rounded-full group/sub transition-all\">\n                              {isEditing && (\n                                <button onClick={() => moveSubCategory(col.id, index, 'left')} disabled={index === 0} className=\"text-slate-300 hover:text-blue-500 disabled:opacity-20 cursor-pointer\"><svg className=\"w-3 h-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={4}><path d=\"M15 19l-7-7 7-7\" /></svg></button>\n                              )}\n                              {isEditing ? (\n                                <input className=\"text-[11px] font-bold text-blue-600 bg-transparent outline-none w-24 tracking-tight\" value={sub} onChange={(e) => handleUpdateSubCategoryName(col.id, index, e.target.value)} />\n                              ) : (\n                                <span className=\"text-[11px] font-bold text-slate-600 tracking-tight\">{sub}</span>\n                              )}\n                              {isEditing && (\n                                <div className=\"flex items-center gap-1.5 ml-1\">\n                                  <button onClick={() => moveSubCategory(col.id, index, 'right')} disabled={index === (col.subCategories?.length || 0) - 1} className=\"text-slate-300 hover:text-blue-500 disabled:opacity-20 cursor-pointer\"><svg className=\"w-3 h-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={4}><path d=\"M9 5l7 7-7 7\" /></svg></button>\n                                  <button onClick={() => handleRemoveSubCategory(col.id, index)} className=\"text-slate-300 hover:text-red-500 transition-colors cursor-pointer\"><svg className=\"w-3 h-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={3}><path d=\"M6 18L18 6M6 6l12 12\" /></svg></button>\n                                </div>\n                              )}\n                            </div>\n                          ))}\n                        </div>\n                        {isEditing && (\n                          <div className=\"flex gap-2 max-w-sm\">\n                            <input className=\"flex-1 px-4 py-2 rounded-xl bg-white border border-slate-200 outline-none focus:ring-4 focus:ring-[#2563EB]/10 transition-all font-bold text-xs\" placeholder=\"Add sub-category...\" value={newSubCategory} onChange={(e) => setNewSubCategory(e.target.value)} onKeyDown={(e) => e.key === 'Enter' && handleAddSubCategory(col.id)} />\n                            <button onClick={() => handleAddSubCategory(col.id)} className=\"px-4 py-2 bg-slate-800 text-white rounded-xl text-[10px] font-black uppercase tracking-widest hover:bg-black transition-all\">Add</button>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n        )}\n\n        {activeTab === 'settings' && (\n          <div className=\"space-y-6 md:space-y-8\">\n            <h2 className=\"text-[24px] md:text-[28px] font-[900] text-[#0F172A] tracking-tight\">Sync & Repository Settings</h2>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div className=\"bg-slate-50 rounded-[20px] md:rounded-[32px] p-6 md:p-10 border border-slate-100 flex flex-col h-full\">\n                <div className=\"flex justify-between items-start mb-4\">\n                  <div>\n                    <h3 className=\"text-lg md:text-xl font-black text-[#0F172A] mb-1.5\">GitHub Synchronization</h3>\n                    <p className=\"text-slate-500 text-[13px] md:text-sm\">Download the current project state as a <strong>data.ts</strong> file.</p>\n                  </div>\n                  <div className={`px-3 py-1.5 rounded-full text-[9px] font-black uppercase tracking-widest ${isOutOfSync ? 'bg-amber-100 text-amber-600 animate-pulse' : 'bg-emerald-100 text-emerald-600'}`}>\n                    {isOutOfSync ? 'Sync Needed' : 'In Sync'}\n                  </div>\n                </div>\n                <div className=\"bg-white/50 p-4 rounded-2xl border border-slate-200 mb-6 space-y-3\">\n                  <div className=\"flex justify-between items-center text-[10px] font-black uppercase tracking-widest\">\n                    <span className=\"text-slate-400\">Source (data.ts):</span>\n                    <span className=\"text-slate-800\">{sourceVersion}</span>\n                  </div>\n                  <div className=\"flex justify-between items-center text-[10px] font-black uppercase tracking-widest\">\n                    <span className=\"text-slate-400\">Local (Browser):</span>\n                    <span className=\"text-slate-800\">{localVersion}</span>\n                  </div>\n                </div>\n                <div className=\"flex flex-col gap-3 mt-auto\">\n                  <button onClick={handleExportDataFile} className=\"w-full bg-[#0F172A] text-white px-8 py-4 rounded-2xl text-[12px] font-black uppercase tracking-widest shadow-lg hover:bg-black transition-all\">Export data.ts</button>\n                  <button onClick={handleResetCache} className=\"w-full bg-white border border-red-200 text-red-500 px-8 py-4 rounded-2xl text-[11px] font-black uppercase tracking-widest hover:bg-red-50 transition-all\">Reset Cache</button>\n                </div>\n              </div>\n\n              <div className=\"bg-slate-50 rounded-[20px] md:rounded-[32px] p-6 md:p-10 border border-slate-100\">\n                <h3 className=\"text-lg md:text-xl font-black text-[#0F172A] mb-1.5 md:mb-2\">Tagline Keywords</h3>\n                <div className=\"flex flex-wrap gap-2 md:gap-3 mb-6 md:mb-8\">\n                  {taglineWords.map((word, idx) => (\n                    <div key={idx} className=\"flex items-center gap-2 md:gap-3 bg-white px-4 md:px-6 py-2 md:py-3 rounded-xl md:rounded-2xl border border-slate-200 shadow-sm\">\n                      <span className=\"text-[13px] md:text-[15px] font-black text-slate-800 tracking-tight\">{word}</span>\n                      <button onClick={() => handleRemoveTagline(idx)} className=\"text-slate-300 hover:text-red-500 transition-colors cursor-pointer\"><svg className=\"w-4 h-4 md:w-5 md:h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={3}><path d=\"M6 18L18 6M6 6l12 12\" /></svg></button>\n                    </div>\n                  ))}\n                </div>\n                <div className=\"flex flex-col sm:flex-row gap-2 md:gap-3\">\n                  <input className=\"flex-1 px-5 md:px-6 py-3 md:py-4 rounded-xl md:rounded-2xl bg-white border border-slate-200 outline-none font-bold\" placeholder=\"Add Keyword...\" value={newTaglineWord} onChange={(e) => setNewTaglineWord(e.target.value)} onKeyDown={(e) => e.key === 'Enter' && handleAddTagline()} />\n                  <button onClick={handleAddTagline} className=\"px-6 md:px-8 py-3 md:py-4 bg-[#0F172A] text-white rounded-xl md:rounded-2xl text-[12px] md:text-[14px] font-black uppercase tracking-widest hover:bg-black transition-all\">Add</button>\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default AdminDashboard;\n"
            }
          ]
        },
        {
          "path": "App.tsx",
          "generationType": 1,
          "isDone": true,
          "description": "Overhauled the contribution functionality. Users can now add multiple suggestions to a list and then export that list as a CSV file to be emailed for review. Added detailed instructions to the modal.",
          "diffs": [
            {
              "target": "",
              "replacement": "\nimport React, { useState, useMemo, useEffect } from 'react';\nimport Sidebar from './components/Sidebar';\nimport ResourceCard from './components/ResourceCard';\nimport AdminDashboard from './components/AdminDashboard';\nimport { COLLECTIONS as initialCollections, RESOURCES as initialResources, TAGLINE_WORDS as initialTaglines, REPO_VERSION } from './data';\nimport { Resource, Collection, Theme } from './types';\n\nconst BRAND_BLUE = '#2563EB';\nconst DARK_NAVY = '#121A26';\n\nconst t = {\n  welcome: \"Welcome to\",\n  intro: \"The repository of open-source tools & resources for Health Economics and Outcomes Research\",\n  select: \"Select a collection to begin ðŸ‘‡\",\n  contributeBtn: \"Contribute to HEORepo\",\n  archive: \"Archive\",\n  vault: \"Vault\",\n  deck: \"Deck\",\n  search: \"Search...\",\n  items: \"ITEMS\",\n  adminPanel: \"ADMIN CONTROL PANEL\",\n  fullRepo: \"FULL REPOSITORY\",\n  exitAdmin: \"Exit Admin\",\n  management: \"Management\",\n  emptyTitle: \"Empty Archive\",\n  emptyDesc: \"Adjust your filters or try a different search term.\",\n  version: \"VERSION\",\n  adminMode: \"ADMIN MODE\",\n  adminPortal: \"Admin Portal\",\n  adminPortalDesc: \"Enter system password to access management tools.\",\n  password: \"Password\",\n  incorrectPassword: \"Incorrect Password\",\n  cancel: \"Cancel\",\n  confirm: \"Confirm\",\n  contributeTitle: \"Contribute\",\n  contributeDesc: \"Suggest high-quality HEOR resources. Please input your suggestions below, then click 'Export CSV' and email the resulting file to contact@heorepo.com for review.\",\n  title: \"Title\",\n  url: \"URL\",\n  suggestedCol: \"Suggested Collection\",\n  description: \"Description\",\n  yourName: \"Your Name\",\n  creditName: \"Credit my name\",\n  addToList: \"Add to List\",\n  exportCsv: \"Export CSV\",\n  subReceived: \"Export Successful\",\n  subReceivedDesc: \"CSV exported. Please email it to contact@heorepo.com\",\n  allResources: \"All Resources\"\n};\n\nconst sanitizeData = (str: string): string => {\n  if (typeof str !== 'string') return '';\n  return str.replace(/<[^>]*>?/gm, '').trim();\n};\n\nconst isValidLink = (url: string): boolean => {\n  try {\n    const parsed = new URL(url.startsWith('http') ? url : `https://${url}`);\n    return parsed.protocol === 'http:' || parsed.protocol === 'https:';\n  } catch {\n    return false;\n  }\n};\n\nconst escapeCSV = (val: string | undefined): string => {\n  if (!val) return '\"\"';\n  const str = val.toString().replace(/\"/g, '\"\"');\n  return `\"${str}\"`;\n};\n\nconst App: React.FC = () => {\n  const [activeTheme, setActiveTheme] = useState<string>('landing');\n  const [activeSubCategory, setActiveSubCategory] = useState<string>('all');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [isSidebarOpen, setIsSidebarOpen] = useState(false);\n  \n  const [isAdmin, setIsAdmin] = useState(false);\n  const [showLoginModal, setShowLoginModal] = useState(false);\n  const [password, setPassword] = useState('');\n  const [loginError, setLoginError] = useState(false);\n\n  const shouldResetCache = useMemo(() => {\n    const savedVersionStr = localStorage.getItem('heo_repo_version');\n    const savedVersion = savedVersionStr ? parseInt(savedVersionStr) : 0;\n    const currentVersion = REPO_VERSION || 0;\n    return currentVersion > savedVersion;\n  }, []);\n\n  const [collections, setCollections] = useState<Collection[]>(() => {\n    try {\n      if (shouldResetCache) return initialCollections;\n      const saved = localStorage.getItem('heo_collections');\n      return saved ? JSON.parse(saved) : initialCollections;\n    } catch { return initialCollections; }\n  });\n  \n  const [resources, setResources] = useState<Resource[]>(() => {\n    try {\n      if (shouldResetCache) return initialResources;\n      const saved = localStorage.getItem('heo_resources');\n      return saved ? JSON.parse(saved) : initialResources;\n    } catch { return initialResources; }\n  });\n  \n  const [taglineWords, setTaglineWords] = useState<string[]>(() => {\n    try {\n      if (shouldResetCache) return initialTaglines;\n      const saved = localStorage.getItem('heo_tagline');\n      return saved ? JSON.parse(saved) : initialTaglines;\n    } catch { return initialTaglines; }\n  });\n\n  useEffect(() => {\n    if (searchQuery.toLowerCase() === 'admin') {\n      setSearchQuery('');\n      setShowLoginModal(true);\n    }\n  }, [searchQuery]);\n\n  useEffect(() => {\n    try {\n      localStorage.setItem('heo_collections', JSON.stringify(collections));\n      localStorage.setItem('heo_resources', JSON.stringify(resources));\n      localStorage.setItem('heo_tagline', JSON.stringify(taglineWords));\n      localStorage.setItem('heo_repo_version', (REPO_VERSION || 0).toString());\n    } catch (e) {}\n  }, [collections, resources, taglineWords]);\n\n  useEffect(() => {\n    setActiveSubCategory('all');\n  }, [activeTheme]);\n\n  const handleLogin = () => {\n    if (password.trim() === '123456') {\n      setIsAdmin(true);\n      setShowLoginModal(false);\n      setPassword('');\n      setLoginError(false);\n      setActiveTheme('admin-deck');\n    } else {\n      setLoginError(true);\n    }\n  };\n\n  const handleLogout = () => {\n    setIsAdmin(false);\n    if (activeTheme === 'admin-deck') {\n      setActiveTheme('landing');\n    }\n  };\n\n  const [showContributeModal, setShowContributeModal] = useState(false);\n  const [suggestionList, setSuggestionList] = useState<any[]>([]);\n  const [contributionData, setContributionData] = useState({ \n    title: '', \n    url: '', \n    description: '', \n    userName: '', \n    category: Theme.GENERAL, \n    wantsCredit: true \n  });\n  const [contributionSuccess, setContributionSuccess] = useState(false);\n\n  const handleAddSuggestionToList = () => {\n    if (!contributionData.title || !contributionData.url) {\n      alert(\"Please provide at least a title and a valid URL.\");\n      return;\n    }\n    if (!isValidLink(contributionData.url)) {\n      alert(\"Please provide a secure and valid URL.\");\n      return;\n    }\n\n    setSuggestionList(prev => [...prev, {\n      title: sanitizeData(contributionData.title),\n      url: contributionData.url,\n      description: sanitizeData(contributionData.description),\n      userName: sanitizeData(contributionData.userName),\n      category: contributionData.category,\n      wantsCredit: contributionData.wantsCredit\n    }]);\n\n    setContributionData({ \n      title: '', \n      url: '', \n      description: '', \n      userName: contributionData.userName, \n      category: Theme.GENERAL, \n      wantsCredit: contributionData.wantsCredit \n    });\n  };\n\n  const handleRemoveFromList = (idx: number) => {\n    setSuggestionList(prev => prev.filter((_, i) => i !== idx));\n  };\n\n  const handleExportCSV = () => {\n    if (suggestionList.length === 0) {\n      alert(\"Add at least one suggestion to the list before exporting.\");\n      return;\n    }\n\n    const headers = ['Title', 'Description', 'URL', 'Contributor', 'Category', 'SubCategory'];\n    const csvRows = suggestionList.map(item => [\n      escapeCSV(item.title),\n      escapeCSV(item.description),\n      escapeCSV(item.url),\n      escapeCSV(item.wantsCredit ? item.userName : 'Anonymous'),\n      escapeCSV(item.category),\n      escapeCSV('all')\n    ].join(\",\"));\n\n    const csvContent = [headers.join(\",\"), ...csvRows].join(\"\\n\");\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement(\"a\");\n    link.setAttribute(\"href\", url);\n    link.setAttribute(\"download\", `heorepo_suggestions_${new Date().getTime()}.csv`);\n    link.click();\n\n    setContributionSuccess(true);\n    setTimeout(() => {\n      setShowContributeModal(false);\n      setContributionSuccess(false);\n      setSuggestionList([]);\n    }, 4000);\n  };\n\n  const filteredResources = useMemo(() => {\n    return resources.filter(res => {\n      const matchesTheme = activeTheme === 'all' || res.category === activeTheme;\n      const matchesSubCategory = activeSubCategory === 'all' || res.subCategory?.toLowerCase() === activeSubCategory.toLowerCase();\n      const matchesSearch = res.title.toLowerCase().includes(searchQuery.toLowerCase()) || \n                            res.description.toLowerCase().includes(searchQuery.toLowerCase());\n      return matchesTheme && matchesSubCategory && matchesSearch;\n    });\n  }, [activeTheme, activeSubCategory, searchQuery, resources]);\n\n  const currentCollection = useMemo(() => collections.find(c => c.id === activeTheme), [activeTheme, collections]);\n  const isAdminDeckActive = activeTheme === 'admin-deck' && isAdmin;\n  const isLandingActive = activeTheme === 'landing';\n  const collectionName = isAdminDeckActive ? t.management : (activeTheme === 'all' ? t.archive : currentCollection?.name || t.archive);\n  \n  const subCategoryFilters = useMemo(() => {\n    if (!currentCollection) return [];\n    return [...(currentCollection.subCategories || []), 'All'];\n  }, [currentCollection]);\n\n  return (\n    <div className=\"flex h-screen bg-[#FCFDFF] text-slate-900 overflow-hidden font-['Inter'] antialiased relative\">\n      <Sidebar \n        collections={collections} activeTheme={activeTheme} onThemeSelect={setActiveTheme} \n        isOpen={isSidebarOpen} onClose={() => setIsSidebarOpen(false)}\n        onAdminClick={() => isAdmin ? handleLogout() : null} isAdminActive={isAdmin} taglineWords={taglineWords}\n      />\n\n      <main className=\"flex-1 flex flex-col overflow-hidden\">\n        {!isLandingActive && (\n          <header className=\"bg-white px-4 md:px-8 pt-4 md:pt-8 pb-5 border-b border-[#F1F5F9]/60 relative z-30\">\n            <div className=\"max-w-[1440px] mx-auto\">\n              <div className=\"flex items-center justify-between mb-4 lg:hidden\">\n                <div className=\"flex items-center font-[900] text-[26px] tracking-[-0.04em] leading-none select-none cursor-pointer\" onClick={() => setActiveTheme('landing')}>\n                  <span style={{ color: DARK_NAVY }}>HEO</span>\n                  <span style={{ backgroundImage: `linear-gradient(to right, ${DARK_NAVY} 50%, ${BRAND_BLUE} 50%)`, WebkitBackgroundClip: 'text', WebkitTextFillColor: 'transparent', display: 'inline-block', position: 'relative', padding: '0 0.2em', margin: '0 -0.2em' }}>R</span>\n                  <span style={{ color: BRAND_BLUE }}>epo</span>\n                  <div className=\"ml-[2px] self-end\" style={{ backgroundColor: BRAND_BLUE, width: '6.5px', height: '6.5px', marginBottom: '3px' }}></div>\n                </div>\n                <button onClick={() => setIsSidebarOpen(true)} className=\"p-2 hover:bg-slate-50 rounded-xl transition-colors\"><svg className=\"w-6 h-6 text-slate-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2.5}><path d=\"M4 6h16M4 12h16M4 18h16\" /></svg></button>\n              </div>\n\n              <div className=\"flex flex-col md:flex-row md:items-end justify-between gap-4 md:gap-8 mb-6\">\n                <div className=\"flex flex-col gap-2 md:gap-3\">\n                  <div className=\"flex items-center gap-3 md:gap-4\">\n                    <div className=\"px-3 py-1 rounded-full bg-[#EFF6FF] border border-[#2563EB]/20 text-[9px] md:text-[10px] font-[800] tracking-[0.12em] md:tracking-[0.15em] text-[#2563EB] uppercase\">\n                      {isAdminDeckActive ? t.adminPanel : (activeTheme === 'all' ? t.fullRepo : (currentCollection?.name.toUpperCase() || 'UNKNOWN'))}\n                    </div>\n                    {!isAdminDeckActive && <div className=\"text-[9px] md:text-[10px] font-[800] tracking-[0.12em] md:tracking-[0.15em] text-[#64748B] uppercase\">{filteredResources.length} {t.items}</div>}\n                  </div>\n                  <h1 className=\"text-[32px] md:text-[48px] font-[900] tracking-[-0.04em] leading-[0.9] text-[#0F172A]\">{collectionName} <span className=\"text-[#D1D5DB] font-[900]\">{isAdminDeckActive ? t.deck : t.vault}</span></h1>\n                </div>\n\n                <div className=\"flex flex-col sm:flex-row items-stretch sm:items-center gap-3 md:gap-6 pb-1\">\n                  {!isAdminDeckActive && (\n                    <div className=\"relative w-full sm:w-[280px] md:w-[380px]\">\n                      <div className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-[#94A3B8]\"><svg className=\"h-4 w-4 md:h-5 md:w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2.5}><path d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" /></svg></div>\n                      <input type=\"text\" placeholder={t.search} className=\"block w-full pl-10 md:pl-12 pr-6 py-2.5 md:py-3.5 bg-[#F8FAFC] border border-[#F1F5F9] rounded-full text-[14px] md:text-[15px] font-medium text-[#1E293B] focus:ring-1 focus:ring-[#4F46E5] focus:bg-white outline-none shadow-sm transition-all placeholder-[#94A3B8]\" value={searchQuery} onChange={(e) => setSearchQuery(e.target.value)} />\n                    </div>\n                  )}\n                  <button onClick={() => isAdmin ? handleLogout() : setShowContributeModal(true)} className={`flex items-center justify-center gap-2 px-6 md:px-8 py-2.5 md:py-3.5 ${isAdminDeckActive ? 'bg-[#0F172A]' : 'bg-[#2563EB]'} text-white text-[14px] md:text-[15px] font-[700] rounded-full hover:opacity-90 transition-all shadow-md active:scale-[0.96]`}><svg className=\"w-4 h-4 md:w-5 md:h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={3}><path d={isAdminDeckActive ? \"M15 19l-7-7 7-7\" : \"M12 4v16m8-8H4\"} /></svg><span className=\"whitespace-nowrap\">{isAdminDeckActive ? t.exitAdmin : t.contributeBtn}</span></button>\n                </div>\n              </div>\n\n              {!isAdminDeckActive && subCategoryFilters.length > 0 && (\n                <div className=\"min-h-[48px] flex items-center overflow-hidden\">\n                  <div className=\"flex items-center gap-2 md:gap-3 overflow-x-auto pb-2 -mx-4 px-4 scrollbar-hide snap-x snap-mandatory\">\n                    {subCategoryFilters.map((sub) => {\n                      const filterValue = sub.toLowerCase() === 'all' ? 'all' : sub;\n                      const isSelected = activeSubCategory === filterValue;\n                      return (\n                        <button key={sub} onClick={() => setActiveSubCategory(filterValue)} className={`px-5 md:px-6 py-2 md:py-2.5 rounded-full text-[10px] md:text-[11px] font-[800] tracking-[0.1em] uppercase whitespace-nowrap active:scale-95 border transition-all duration-300 snap-center ${isSelected ? 'bg-[#0F172A] text-white border-[#0F172A] shadow-lg shadow-slate-200' : 'bg-white text-[#475569] border-[#E2E8F0] hover:border-[#CBD5E1]'}`}>{sub}</button>\n                      );\n                    })}\n                  </div>\n                </div>\n              )}\n            </div>\n          </header>\n        )}\n\n        <div className=\"flex-1 overflow-y-auto px-4 md:px-8 py-6 md:py-10 scroll-smooth\">\n          <div className=\"max-w-[1440px] mx-auto h-full\">\n            {isLandingActive ? (\n              <div className=\"flex flex-col items-center justify-center h-full text-center animate-card-entry pb-20 select-none relative overflow-visible\">\n                <div className=\"absolute inset-0 pointer-events-none overflow-visible\">\n                   <span className=\"absolute top-[20%] left-[15%] text-4xl animate-float opacity-40 md:opacity-100\">ðŸŽ‰</span>\n                   <span className=\"absolute top-[15%] right-[20%] text-4xl animate-float opacity-40 md:opacity-100\">ðŸ“Š</span>\n                   <span className=\"absolute bottom-[30%] left-[20%] text-4xl animate-float opacity-40 md:opacity-100\">ðŸš€</span>\n                   <span className=\"absolute bottom-[40%] right-[15%] text-4xl animate-float opacity-40 md:opacity-100\">ðŸ’Š</span>\n                </div>\n                <span className=\"text-lg md:text-2xl font-[600] text-slate-400 mb-2 md:mb-4 block tracking-tight relative z-10\">{t.welcome}</span>\n                <div className=\"flex flex-col items-center mb-6 md:mb-10 relative z-10\">\n                  <div className=\"flex items-center justify-center font-[900] text-[56px] md:text-[110px] tracking-[-0.04em] leading-none\">\n                    <span style={{ color: DARK_NAVY }}>HEO</span>\n                    <span style={{ backgroundImage: `linear-gradient(to right, ${DARK_NAVY} 50%, ${BRAND_BLUE} 50%)`, WebkitBackgroundClip: 'text', WebkitTextFillColor: 'transparent', display: 'inline-block', position: 'relative', padding: '0 0.2em', margin: '0 -0.2em' }}>R</span>\n                    <span style={{ color: BRAND_BLUE }}>epo</span>\n                    <div className=\"ml-[4px] md:ml-[10px] self-end\" style={{ backgroundColor: BRAND_BLUE, width: '14px', height: '14px', marginBottom: '8px' }}></div>\n                  </div>\n                  <div className=\"max-w-3xl flex flex-col items-center px-4\">\n                    <p className=\"text-[14px] md:text-[19px] text-slate-500 font-medium mt-4 md:mt-6 leading-relaxed\">The repository of open-source tools & resources for Health Economics and Outcomes Research.</p>\n                  </div>\n                  <div className=\"mt-12 flex flex-col items-center gap-6 w-full max-w-xl px-4 relative z-10\">\n                    <p className=\"text-slate-400 font-bold text-xs uppercase tracking-[0.2em]\">{t.select}</p>\n                    <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-4 w-full\">\n                      {collections.map(col => (\n                        <button key={col.id} onClick={() => setActiveTheme(col.id)} className=\"flex flex-col items-center justify-center p-6 bg-white border border-slate-100 rounded-[24px] hover:border-blue-400 hover:shadow-xl hover:-translate-y-1 transition-all duration-300 group\">\n                          <span className=\"text-3xl mb-3 group-hover:scale-110 transition-transform\">{col.icon}</span>\n                          <span className=\"text-[11px] font-black uppercase tracking-widest text-slate-600 group-hover:text-blue-600\">{col.name}</span>\n                        </button>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ) : isAdminDeckActive ? (\n              <AdminDashboard resources={resources} setResources={setResources} collections={collections} setCollections={setCollections} taglineWords={taglineWords} setTaglineWords={setTaglineWords} />\n            ) : (\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 md:gap-8 auto-rows-fr\">\n                {filteredResources.length > 0 ? filteredResources.map((res, idx) => (<ResourceCard key={res.id} resource={res} index={idx} />)) : (\n                  <div className=\"col-span-full py-20 text-center\">\n                    <div className=\"w-20 h-20 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-6\"><svg className=\"w-10 h-10 text-slate-300\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}><path d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" /></svg></div>\n                    <h3 className=\"text-xl font-black text-slate-800 mb-2\">{t.emptyTitle}</h3>\n                    <p className=\"text-slate-500 max-w-md mx-auto\">{t.emptyDesc}</p>\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n        </div>\n      </main>\n\n      {showLoginModal && (\n        <div className=\"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300\">\n          <div className=\"bg-white rounded-[32px] p-8 md:p-10 w-full max-w-md shadow-2xl border border-white/20 animate-in zoom-in-95 duration-300\">\n            <h2 className=\"text-2xl font-black text-slate-900 mb-2\">{t.adminPortal}</h2>\n            <div className=\"space-y-4\">\n              <div>\n                <input type=\"text\" value={password} onChange={(e) => setPassword(e.target.value)} onKeyDown={(e) => e.key === 'Enter' && handleLogin()} className={`w-full px-6 py-4 rounded-2xl bg-slate-50 border ${loginError ? 'border-red-500' : 'border-slate-100'} focus:ring-4 focus:ring-blue-500/10 focus:bg-white outline-none transition-all font-bold`} placeholder=\"Enter Password\" autoFocus />\n                {loginError && <p className=\"text-red-500 text-[11px] font-bold mt-2 ml-1\">{t.incorrectPassword}</p>}\n              </div>\n              <div className=\"flex gap-3 pt-2\">\n                <button onClick={() => setShowLoginModal(false)} className=\"flex-1 px-6 py-4 rounded-2xl bg-slate-100 text-slate-600 font-bold hover:bg-slate-200 transition-all\">{t.cancel}</button>\n                <button onClick={handleLogin} className=\"flex-1 px-6 py-4 rounded-2xl bg-[#2563EB] text-white font-bold hover:opacity-90 transition-all\">{t.confirm}</button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {showContributeModal && (\n        <div className=\"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300 overflow-y-auto\">\n          <div className=\"bg-white rounded-[32px] p-8 md:p-10 w-full max-w-2xl shadow-2xl border border-white/20 animate-in zoom-in-95 duration-300 my-8\">\n            {contributionSuccess ? (\n              <div className=\"text-center py-10 animate-in zoom-in duration-500\">\n                <div className=\"w-20 h-20 bg-emerald-100 text-emerald-600 rounded-full flex items-center justify-center mx-auto mb-6\"><svg className=\"w-10 h-10\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={3}><path d=\"M5 13l4 4L19 7\" /></svg></div>\n                <h2 className=\"text-2xl font-black text-slate-900 mb-2\">{t.subReceived}</h2>\n                <p className=\"text-slate-500\">{t.subReceivedDesc}</p>\n              </div>\n            ) : (\n              <>\n                <div className=\"flex justify-between items-start mb-6\">\n                  <div>\n                    <h2 className=\"text-2xl font-black text-slate-900 mb-1\">{t.contributeTitle}</h2>\n                    <p className=\"text-slate-500 text-sm leading-relaxed\">{t.contributeDesc}</p>\n                  </div>\n                  <button onClick={() => setShowContributeModal(false)} className=\"p-2 hover:bg-slate-100 rounded-full text-slate-400 transition-colors\"><svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2.5}><path d=\"M6 18L18 6M6 6l12 12\" /></svg></button>\n                </div>\n\n                <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n                  <div className=\"space-y-4\">\n                    <div className=\"bg-slate-50/50 p-6 rounded-[24px] border border-slate-100 space-y-4\">\n                      <div>\n                        <label className=\"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1\">{t.title}</label>\n                        <input className=\"w-full px-5 py-3 rounded-xl bg-white border border-slate-200 focus:ring-4 focus:ring-blue-500/10 outline-none font-bold text-sm\" value={contributionData.title} onChange={e => setContributionData({...contributionData, title: e.target.value})} placeholder=\"Resource name\" />\n                      </div>\n                      <div>\n                        <label className=\"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1\">{t.url}</label>\n                        <input className=\"w-full px-5 py-3 rounded-xl bg-white border border-slate-200 focus:ring-4 focus:ring-blue-500/10 outline-none font-bold text-sm\" value={contributionData.url} onChange={e => setContributionData({...contributionData, url: e.target.value})} placeholder=\"https://...\" />\n                      </div>\n                      <div>\n                        <label className=\"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1\">{t.suggestedCol}</label>\n                        <select className=\"w-full px-5 py-3 rounded-xl bg-white border border-slate-200 focus:ring-4 focus:ring-blue-500/10 outline-none font-bold text-sm\" value={contributionData.category} onChange={e => setContributionData({...contributionData, category: e.target.value as any})}>\n                          {collections.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}\n                        </select>\n                      </div>\n                      <div>\n                        <label className=\"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1\">{t.description}</label>\n                        <textarea rows={2} className=\"w-full px-5 py-3 rounded-xl bg-white border border-slate-200 focus:ring-4 focus:ring-blue-500/10 outline-none font-bold text-sm resize-none\" value={contributionData.description} onChange={e => setContributionData({...contributionData, description: e.target.value})} placeholder=\"Briefly describe...\" />\n                      </div>\n                      <div>\n                        <label className=\"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1\">{t.yourName}</label>\n                        <input className=\"w-full px-5 py-3 rounded-xl bg-white border border-slate-200 font-bold text-sm mb-2\" value={contributionData.userName} onChange={e => setContributionData({...contributionData, userName: e.target.value})} placeholder=\"Your Name\" />\n                        <label className=\"flex items-center gap-2 cursor-pointer\">\n                          <input type=\"checkbox\" className=\"w-4 h-4 rounded\" checked={contributionData.wantsCredit} onChange={e => setContributionData({...contributionData, wantsCredit: e.target.checked})} />\n                          <span className=\"text-xs font-bold text-slate-500\">{t.creditName}</span>\n                        </label>\n                      </div>\n                      <button onClick={handleAddSuggestionToList} className=\"w-full bg-[#0F172A] text-white py-3 rounded-xl font-black uppercase tracking-widest text-[11px] hover:bg-black transition-all\">Add to List</button>\n                    </div>\n                  </div>\n\n                  <div className=\"flex flex-col h-full min-h-[400px]\">\n                    <div className=\"flex-1 overflow-y-auto pr-2 space-y-3 scrollbar-hide\">\n                      <div className=\"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1 flex justify-between\">\n                        <span>List of Suggestions</span>\n                        <span className=\"text-blue-600\">{suggestionList.length}</span>\n                      </div>\n                      {suggestionList.length === 0 ? (\n                        <div className=\"h-full min-h-[200px] border-2 border-dashed border-slate-100 rounded-[24px] flex items-center justify-center text-slate-300 font-bold text-xs italic\">Empty list.</div>\n                      ) : (\n                        suggestionList.map((item, idx) => (\n                          <div key={idx} className=\"p-4 bg-white border border-slate-100 rounded-2xl shadow-sm relative group\">\n                            <button onClick={() => handleRemoveFromList(idx)} className=\"absolute top-2 right-2 p-1 text-slate-300 hover:text-red-500\"><svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path d=\"M6 18L18 6M6 6l12 12\" /></svg></button>\n                            <div className=\"font-black text-slate-800 text-[13px] truncate pr-6\">{item.title}</div>\n                            <div className=\"text-[10px] text-blue-500 font-bold truncate\">{item.url}</div>\n                          </div>\n                        ))\n                      )}\n                    </div>\n                    <button onClick={handleExportCSV} disabled={suggestionList.length === 0} className={`w-full mt-6 py-4 rounded-2xl font-black uppercase tracking-widest shadow-lg transition-all ${suggestionList.length > 0 ? 'bg-[#2563EB] text-white shadow-blue-500/20 hover:opacity-90' : 'bg-slate-100 text-slate-400 cursor-not-allowed'}`}>Export CSV</button>\n                  </div>\n                </div>\n              </>\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default App;\n"
            }
          ]
        }
      ]
    },
    "createdTimestamp": {
      "seconds": 1770186284,
      "nanos": 248000000
    },
    "doneTimestamp": {
      "seconds": 1770186285,
      "nanos": 701000000
    }
  },
  {
    "id": 34,
    "author": "user",
    "payload": {
      "type": "text",
      "text": "change nothing else:\nin welcome page,\n1. the H\\E\\O\\R alphabets are bold and theme blue coluor\n2. change a line after ...tools & resources\n3. add ðŸ“ˆ and ðŸ’‰ to the icons in welcome page around the logo, left and right",
      "files": [],
      "fileUploads": [],
      "cssBlocks": [],
      "cMarkNode": {}
    },
    "createdTimestamp": {
      "seconds": 1770186591,
      "nanos": 506000000
    }
  },
  {
    "id": 35,
    "author": "model",
    "payload": {
      "type": "thinking",
      "text": "**Updating the Welcome Page**\n\nI'm currently focused on the welcome page redesign for HEORepo. My priority is styling the \"H/E/O/R\" letters. I'm going to make them bold and apply the blue theme color. I'll then incorporate a line break after \"tools & resources\" to improve readability of the introduction section of the page.\n\n\n**Enhancing the Visual Appeal**\n\nI'm now integrating floating icons, specifically a chart (ðŸ“ˆ) and a syringe (ðŸ’‰), around the logo for added visual interest. I've also updated the landing page's intro text to emphasize \"H\", \"E\", \"O\", and \"R\" using bold blue styling. I've added a line break for improved readability. The adjustments are being applied to `App.tsx` and now incorporate the updated text and new emojis.\n\n\n",
      "cMarkNode": {}
    },
    "createdTimestamp": {
      "seconds": 1770186591,
      "nanos": 506000000
    },
    "doneTimestamp": {
      "seconds": 1770186608,
      "nanos": 179000000
    }
  },
  {
    "id": 36,
    "author": "model",
    "payload": {
      "type": "generationTable",
      "entries": [
        {
          "path": "App.tsx",
          "generationType": 1,
          "isDone": true,
          "description": "Updated the landing page: styled HEOR alphabets as bold/blue, added a line break in the intro, and added more floating emojis (ðŸ“ˆ and ðŸ’‰) around the logo.",
          "diffs": [
            {
              "target": "",
              "replacement": "\nimport React, { useState, useMemo, useEffect } from 'react';\nimport Sidebar from './components/Sidebar';\nimport ResourceCard from './components/ResourceCard';\nimport AdminDashboard from './components/AdminDashboard';\nimport { COLLECTIONS as initialCollections, RESOURCES as initialResources, TAGLINE_WORDS as initialTaglines, REPO_VERSION } from './data';\nimport { Resource, Collection, Theme } from './types';\n\nconst BRAND_BLUE = '#2563EB';\nconst DARK_NAVY = '#121A26';\n\nconst t = {\n  welcome: \"Welcome to\",\n  intro: \"The repository of open-source tools & resources for Health Economics and Outcomes Research\",\n  select: \"Select a collection to begin ðŸ‘‡\",\n  contributeBtn: \"Contribute to HEORepo\",\n  archive: \"Archive\",\n  vault: \"Vault\",\n  deck: \"Deck\",\n  search: \"Search...\",\n  items: \"ITEMS\",\n  adminPanel: \"ADMIN CONTROL PANEL\",\n  fullRepo: \"FULL REPOSITORY\",\n  exitAdmin: \"Exit Admin\",\n  management: \"Management\",\n  emptyTitle: \"Empty Archive\",\n  emptyDesc: \"Adjust your filters or try a different search term.\",\n  version: \"VERSION\",\n  adminMode: \"ADMIN MODE\",\n  adminPortal: \"Admin Portal\",\n  adminPortalDesc: \"Enter system password to access management tools.\",\n  password: \"Password\",\n  incorrectPassword: \"Incorrect Password\",\n  cancel: \"Cancel\",\n  confirm: \"Confirm\",\n  contributeTitle: \"Contribute\",\n  contributeDesc: \"Suggest high-quality HEOR resources. Please input your suggestions below, then click 'Export CSV' and email the resulting file to contact@heorepo.com for review.\",\n  title: \"Title\",\n  url: \"URL\",\n  suggestedCol: \"Suggested Collection\",\n  description: \"Description\",\n  yourName: \"Your Name\",\n  creditName: \"Credit my name\",\n  addToList: \"Add to List\",\n  exportCsv: \"Export CSV\",\n  subReceived: \"Export Successful\",\n  subReceivedDesc: \"CSV exported. Please email it to contact@heorepo.com\",\n  allResources: \"All Resources\"\n};\n\nconst sanitizeData = (str: string): string => {\n  if (typeof str !== 'string') return '';\n  return str.replace(/<[^>]*>?/gm, '').trim();\n};\n\nconst isValidLink = (url: string): boolean => {\n  try {\n    const parsed = new URL(url.startsWith('http') ? url : `https://${url}`);\n    return parsed.protocol === 'http:' || parsed.protocol === 'https:';\n  } catch {\n    return false;\n  }\n};\n\nconst escapeCSV = (val: string | undefined): string => {\n  if (!val) return '\"\"';\n  const str = val.toString().replace(/\"/g, '\"\"');\n  return `\"${str}\"`;\n};\n\nconst App: React.FC = () => {\n  const [activeTheme, setActiveTheme] = useState<string>('landing');\n  const [activeSubCategory, setActiveSubCategory] = useState<string>('all');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [isSidebarOpen, setIsSidebarOpen] = useState(false);\n  \n  const [isAdmin, setIsAdmin] = useState(false);\n  const [showLoginModal, setShowLoginModal] = useState(false);\n  const [password, setPassword] = useState('');\n  const [loginError, setLoginError] = useState(false);\n\n  const shouldResetCache = useMemo(() => {\n    const savedVersionStr = localStorage.getItem('heo_repo_version');\n    const savedVersion = savedVersionStr ? parseInt(savedVersionStr) : 0;\n    const currentVersion = REPO_VERSION || 0;\n    return currentVersion > savedVersion;\n  }, []);\n\n  const [collections, setCollections] = useState<Collection[]>(() => {\n    try {\n      if (shouldResetCache) return initialCollections;\n      const saved = localStorage.getItem('heo_collections');\n      return saved ? JSON.parse(saved) : initialCollections;\n    } catch { return initialCollections; }\n  });\n  \n  const [resources, setResources] = useState<Resource[]>(() => {\n    try {\n      if (shouldResetCache) return initialResources;\n      const saved = localStorage.getItem('heo_resources');\n      return saved ? JSON.parse(saved) : initialResources;\n    } catch { return initialResources; }\n  });\n  \n  const [taglineWords, setTaglineWords] = useState<string[]>(() => {\n    try {\n      if (shouldResetCache) return initialTaglines;\n      const saved = localStorage.getItem('heo_tagline');\n      return saved ? JSON.parse(saved) : initialTaglines;\n    } catch { return initialTaglines; }\n  });\n\n  useEffect(() => {\n    if (searchQuery.toLowerCase() === 'admin') {\n      setSearchQuery('');\n      setShowLoginModal(true);\n    }\n  }, [searchQuery]);\n\n  useEffect(() => {\n    try {\n      localStorage.setItem('heo_collections', JSON.stringify(collections));\n      localStorage.setItem('heo_resources', JSON.stringify(resources));\n      localStorage.setItem('heo_tagline', JSON.stringify(taglineWords));\n      localStorage.setItem('heo_repo_version', (REPO_VERSION || 0).toString());\n    } catch (e) {}\n  }, [collections, resources, taglineWords]);\n\n  useEffect(() => {\n    setActiveSubCategory('all');\n  }, [activeTheme]);\n\n  const handleLogin = () => {\n    if (password.trim() === '123456') {\n      setIsAdmin(true);\n      setShowLoginModal(false);\n      setPassword('');\n      setLoginError(false);\n      setActiveTheme('admin-deck');\n    } else {\n      setLoginError(true);\n    }\n  };\n\n  const handleLogout = () => {\n    setIsAdmin(false);\n    if (activeTheme === 'admin-deck') {\n      setActiveTheme('landing');\n    }\n  };\n\n  const [showContributeModal, setShowContributeModal] = useState(false);\n  const [suggestionList, setSuggestionList] = useState<any[]>([]);\n  const [contributionData, setContributionData] = useState({ \n    title: '', \n    url: '', \n    description: '', \n    userName: '', \n    category: Theme.GENERAL, \n    wantsCredit: true \n  });\n  const [contributionSuccess, setContributionSuccess] = useState(false);\n\n  const handleAddSuggestionToList = () => {\n    if (!contributionData.title || !contributionData.url) {\n      alert(\"Please provide at least a title and a valid URL.\");\n      return;\n    }\n    if (!isValidLink(contributionData.url)) {\n      alert(\"Please provide a secure and valid URL.\");\n      return;\n    }\n\n    setSuggestionList(prev => [...prev, {\n      title: sanitizeData(contributionData.title),\n      url: contributionData.url,\n      description: sanitizeData(contributionData.description),\n      userName: sanitizeData(contributionData.userName),\n      category: contributionData.category,\n      wantsCredit: contributionData.wantsCredit\n    }]);\n\n    setContributionData({ \n      title: '', \n      url: '', \n      description: '', \n      userName: contributionData.userName, \n      category: Theme.GENERAL, \n      wantsCredit: contributionData.wantsCredit \n    });\n  };\n\n  const handleRemoveFromList = (idx: number) => {\n    setSuggestionList(prev => prev.filter((_, i) => i !== idx));\n  };\n\n  const handleExportCSV = () => {\n    if (suggestionList.length === 0) {\n      alert(\"Add at least one suggestion to the list before exporting.\");\n      return;\n    }\n\n    const headers = ['Title', 'Description', 'URL', 'Contributor', 'Category', 'SubCategory'];\n    const csvRows = suggestionList.map(item => [\n      escapeCSV(item.title),\n      escapeCSV(item.description),\n      escapeCSV(item.url),\n      escapeCSV(item.wantsCredit ? item.userName : 'Anonymous'),\n      escapeCSV(item.category),\n      escapeCSV('all')\n    ].join(\",\"));\n\n    const csvContent = [headers.join(\",\"), ...csvRows].join(\"\\n\");\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement(\"a\");\n    link.setAttribute(\"href\", url);\n    link.setAttribute(\"download\", `heorepo_suggestions_${new Date().getTime()}.csv`);\n    link.click();\n\n    setContributionSuccess(true);\n    setTimeout(() => {\n      setShowContributeModal(false);\n      setContributionSuccess(false);\n      setSuggestionList([]);\n    }, 4000);\n  };\n\n  const filteredResources = useMemo(() => {\n    return resources.filter(res => {\n      const matchesTheme = activeTheme === 'all' || res.category === activeTheme;\n      const matchesSubCategory = activeSubCategory === 'all' || res.subCategory?.toLowerCase() === activeSubCategory.toLowerCase();\n      const matchesSearch = res.title.toLowerCase().includes(searchQuery.toLowerCase()) || \n                            res.description.toLowerCase().includes(searchQuery.toLowerCase());\n      return matchesTheme && matchesSubCategory && matchesSearch;\n    });\n  }, [activeTheme, activeSubCategory, searchQuery, resources]);\n\n  const currentCollection = useMemo(() => collections.find(c => c.id === activeTheme), [activeTheme, collections]);\n  const isAdminDeckActive = activeTheme === 'admin-deck' && isAdmin;\n  const isLandingActive = activeTheme === 'landing';\n  const collectionName = isAdminDeckActive ? t.management : (activeTheme === 'all' ? t.archive : currentCollection?.name || t.archive);\n  \n  const subCategoryFilters = useMemo(() => {\n    if (!currentCollection) return [];\n    return [...(currentCollection.subCategories || []), 'All'];\n  }, [currentCollection]);\n\n  return (\n    <div className=\"flex h-screen bg-[#FCFDFF] text-slate-900 overflow-hidden font-['Inter'] antialiased relative\">\n      <Sidebar \n        collections={collections} activeTheme={activeTheme} onThemeSelect={setActiveTheme} \n        isOpen={isSidebarOpen} onClose={() => setIsSidebarOpen(false)}\n        onAdminClick={() => isAdmin ? handleLogout() : null} isAdminActive={isAdmin} taglineWords={taglineWords}\n      />\n\n      <main className=\"flex-1 flex flex-col overflow-hidden\">\n        {!isLandingActive && (\n          <header className=\"bg-white px-4 md:px-8 pt-4 md:pt-8 pb-5 border-b border-[#F1F5F9]/60 relative z-30\">\n            <div className=\"max-w-[1440px] mx-auto\">\n              <div className=\"flex items-center justify-between mb-4 lg:hidden\">\n                <div className=\"flex items-center font-[900] text-[26px] tracking-[-0.04em] leading-none select-none cursor-pointer\" onClick={() => setActiveTheme('landing')}>\n                  <span style={{ color: DARK_NAVY }}>HEO</span>\n                  <span style={{ backgroundImage: `linear-gradient(to right, ${DARK_NAVY} 50%, ${BRAND_BLUE} 50%)`, WebkitBackgroundClip: 'text', WebkitTextFillColor: 'transparent', display: 'inline-block', position: 'relative', padding: '0 0.2em', margin: '0 -0.2em' }}>R</span>\n                  <span style={{ color: BRAND_BLUE }}>epo</span>\n                  <div className=\"ml-[2px] self-end\" style={{ backgroundColor: BRAND_BLUE, width: '6.5px', height: '6.5px', marginBottom: '3px' }}></div>\n                </div>\n                <button onClick={() => setIsSidebarOpen(true)} className=\"p-2 hover:bg-slate-50 rounded-xl transition-colors\"><svg className=\"w-6 h-6 text-slate-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2.5}><path d=\"M4 6h16M4 12h16M4 18h16\" /></svg></button>\n              </div>\n\n              <div className=\"flex flex-col md:flex-row md:items-end justify-between gap-4 md:gap-8 mb-6\">\n                <div className=\"flex flex-col gap-2 md:gap-3\">\n                  <div className=\"flex items-center gap-3 md:gap-4\">\n                    <div className=\"px-3 py-1 rounded-full bg-[#EFF6FF] border border-[#2563EB]/20 text-[9px] md:text-[10px] font-[800] tracking-[0.12em] md:tracking-[0.15em] text-[#2563EB] uppercase\">\n                      {isAdminDeckActive ? t.adminPanel : (activeTheme === 'all' ? t.fullRepo : (currentCollection?.name.toUpperCase() || 'UNKNOWN'))}\n                    </div>\n                    {!isAdminDeckActive && <div className=\"text-[9px] md:text-[10px] font-[800] tracking-[0.12em] md:tracking-[0.15em] text-[#64748B] uppercase\">{filteredResources.length} {t.items}</div>}\n                  </div>\n                  <h1 className=\"text-[32px] md:text-[48px] font-[900] tracking-[-0.04em] leading-[0.9] text-[#0F172A]\">{collectionName} <span className=\"text-[#D1D5DB] font-[900]\">{isAdminDeckActive ? t.deck : t.vault}</span></h1>\n                </div>\n\n                <div className=\"flex flex-col sm:flex-row items-stretch sm:items-center gap-3 md:gap-6 pb-1\">\n                  {!isAdminDeckActive && (\n                    <div className=\"relative w-full sm:w-[280px] md:w-[380px]\">\n                      <div className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-[#94A3B8]\"><svg className=\"h-4 w-4 md:h-5 md:w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2.5}><path d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" /></svg></div>\n                      <input type=\"text\" placeholder={t.search} className=\"block w-full pl-10 md:pl-12 pr-6 py-2.5 md:py-3.5 bg-[#F8FAFC] border border-[#F1F5F9] rounded-full text-[14px] md:text-[15px] font-medium text-[#1E293B] focus:ring-1 focus:ring-[#4F46E5] focus:bg-white outline-none shadow-sm transition-all placeholder-[#94A3B8]\" value={searchQuery} onChange={(e) => setSearchQuery(e.target.value)} />\n                    </div>\n                  )}\n                  <button onClick={() => isAdmin ? handleLogout() : setShowContributeModal(true)} className={`flex items-center justify-center gap-2 px-6 md:px-8 py-2.5 md:py-3.5 ${isAdminDeckActive ? 'bg-[#0F172A]' : 'bg-[#2563EB]'} text-white text-[14px] md:text-[15px] font-[700] rounded-full hover:opacity-90 transition-all shadow-md active:scale-[0.96]`}><svg className=\"w-4 h-4 md:w-5 md:h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={3}><path d={isAdminDeckActive ? \"M15 19l-7-7 7-7\" : \"M12 4v16m8-8H4\"} /></svg><span className=\"whitespace-nowrap\">{isAdminDeckActive ? t.exitAdmin : t.contributeBtn}</span></button>\n                </div>\n              </div>\n\n              {!isAdminDeckActive && subCategoryFilters.length > 0 && (\n                <div className=\"min-h-[48px] flex items-center overflow-hidden\">\n                  <div className=\"flex items-center gap-2 md:gap-3 overflow-x-auto pb-2 -mx-4 px-4 scrollbar-hide snap-x snap-mandatory\">\n                    {subCategoryFilters.map((sub) => {\n                      const filterValue = sub.toLowerCase() === 'all' ? 'all' : sub;\n                      const isSelected = activeSubCategory === filterValue;\n                      return (\n                        <button key={sub} onClick={() => setActiveSubCategory(filterValue)} className={`px-5 md:px-6 py-2 md:py-2.5 rounded-full text-[10px] md:text-[11px] font-[800] tracking-[0.1em] uppercase whitespace-nowrap active:scale-95 border transition-all duration-300 snap-center ${isSelected ? 'bg-[#0F172A] text-white border-[#0F172A] shadow-lg shadow-slate-200' : 'bg-white text-[#475569] border-[#E2E8F0] hover:border-[#CBD5E1]'}`}>{sub}</button>\n                      );\n                    })}\n                  </div>\n                </div>\n              )}\n            </div>\n          </header>\n        )}\n\n        <div className=\"flex-1 overflow-y-auto px-4 md:px-8 py-6 md:py-10 scroll-smooth\">\n          <div className=\"max-w-[1440px] mx-auto h-full\">\n            {isLandingActive ? (\n              <div className=\"flex flex-col items-center justify-center h-full text-center animate-card-entry pb-20 select-none relative overflow-visible\">\n                <div className=\"absolute inset-0 pointer-events-none overflow-visible\">\n                   <span className=\"absolute top-[20%] left-[15%] text-4xl animate-float opacity-40 md:opacity-100\">ðŸŽ‰</span>\n                   <span className=\"absolute top-[15%] right-[20%] text-4xl animate-float opacity-40 md:opacity-100\">ðŸ“Š</span>\n                   <span className=\"absolute bottom-[30%] left-[20%] text-4xl animate-float opacity-40 md:opacity-100\">ðŸš€</span>\n                   <span className=\"absolute bottom-[40%] right-[15%] text-4xl animate-float opacity-40 md:opacity-100\">ðŸ’Š</span>\n                   <span className=\"absolute top-[45%] left-[5%] text-3xl animate-float opacity-30 md:opacity-80\" style={{ animationDelay: '0.2s' }}>ðŸ“ˆ</span>\n                   <span className=\"absolute top-[35%] right-[5%] text-3xl animate-float opacity-30 md:opacity-80\" style={{ animationDelay: '0.7s' }}>ðŸ’‰</span>\n                </div>\n                <span className=\"text-lg md:text-2xl font-[600] text-slate-400 mb-2 md:mb-4 block tracking-tight relative z-10\">{t.welcome}</span>\n                <div className=\"flex flex-col items-center mb-6 md:mb-10 relative z-10\">\n                  <div className=\"flex items-center justify-center font-[900] text-[56px] md:text-[110px] tracking-[-0.04em] leading-none\">\n                    <span style={{ color: DARK_NAVY }}>HEO</span>\n                    <span style={{ backgroundImage: `linear-gradient(to right, ${DARK_NAVY} 50%, ${BRAND_BLUE} 50%)`, WebkitBackgroundClip: 'text', WebkitTextFillColor: 'transparent', display: 'inline-block', position: 'relative', padding: '0 0.2em', margin: '0 -0.2em' }}>R</span>\n                    <span style={{ color: BRAND_BLUE }}>epo</span>\n                    <div className=\"ml-[4px] md:ml-[10px] self-end\" style={{ backgroundColor: BRAND_BLUE, width: '14px', height: '14px', marginBottom: '8px' }}></div>\n                  </div>\n                  <div className=\"max-w-3xl flex flex-col items-center px-4\">\n                    <p className=\"text-[14px] md:text-[19px] text-slate-500 font-medium mt-4 md:mt-6 leading-relaxed\">\n                      The repository of open-source tools & resources <br /> for <span style={{ color: BRAND_BLUE, fontWeight: 900 }}>H</span>ealth <span style={{ color: BRAND_BLUE, fontWeight: 900 }}>E</span>conomics and <span style={{ color: BRAND_BLUE, fontWeight: 900 }}>O</span>utcomes <span style={{ color: BRAND_BLUE, fontWeight: 900 }}>R</span>esearch.\n                    </p>\n                  </div>\n                  <div className=\"mt-12 flex flex-col items-center gap-6 w-full max-w-xl px-4 relative z-10\">\n                    <p className=\"text-slate-400 font-bold text-xs uppercase tracking-[0.2em]\">{t.select}</p>\n                    <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-4 w-full\">\n                      {collections.map(col => (\n                        <button key={col.id} onClick={() => setActiveTheme(col.id)} className=\"flex flex-col items-center justify-center p-6 bg-white border border-slate-100 rounded-[24px] hover:border-blue-400 hover:shadow-xl hover:-translate-y-1 transition-all duration-300 group\">\n                          <span className=\"text-3xl mb-3 group-hover:scale-110 transition-transform\">{col.icon}</span>\n                          <span className=\"text-[11px] font-black uppercase tracking-widest text-slate-600 group-hover:text-blue-600\">{col.name}</span>\n                        </button>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ) : isAdminDeckActive ? (\n              <AdminDashboard resources={resources} setResources={setResources} collections={collections} setCollections={setCollections} taglineWords={taglineWords} setTaglineWords={setTaglineWords} />\n            ) : (\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 md:gap-8 auto-rows-fr\">\n                {filteredResources.length > 0 ? filteredResources.map((res, idx) => (<ResourceCard key={res.id} resource={res} index={idx} />)) : (\n                  <div className=\"col-span-full py-20 text-center\">\n                    <div className=\"w-20 h-20 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-6\"><svg className=\"w-10 h-10 text-slate-300\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}><path d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" /></svg></div>\n                    <h3 className=\"text-xl font-black text-slate-800 mb-2\">{t.emptyTitle}</h3>\n                    <p className=\"text-slate-500 max-w-md mx-auto\">{t.emptyDesc}</p>\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n        </div>\n      </main>\n\n      {showLoginModal && (\n        <div className=\"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300\">\n          <div className=\"bg-white rounded-[32px] p-8 md:p-10 w-full max-w-md shadow-2xl border border-white/20 animate-in zoom-in-95 duration-300\">\n            <h2 className=\"text-2xl font-black text-slate-900 mb-2\">{t.adminPortal}</h2>\n            <div className=\"space-y-4\">\n              <div>\n                <input type=\"text\" value={password} onChange={(e) => setPassword(e.target.value)} onKeyDown={(e) => e.key === 'Enter' && handleLogin()} className={`w-full px-6 py-4 rounded-2xl bg-slate-50 border ${loginError ? 'border-red-500' : 'border-slate-100'} focus:ring-4 focus:ring-blue-500/10 focus:bg-white outline-none transition-all font-bold`} placeholder=\"Enter Password\" autoFocus />\n                {loginError && <p className=\"text-red-500 text-[11px] font-bold mt-2 ml-1\">{t.incorrectPassword}</p>}\n              </div>\n              <div className=\"flex gap-3 pt-2\">\n                <button onClick={() => setShowLoginModal(false)} className=\"flex-1 px-6 py-4 rounded-2xl bg-slate-100 text-slate-600 font-bold hover:bg-slate-200 transition-all\">{t.cancel}</button>\n                <button onClick={handleLogin} className=\"flex-1 px-6 py-4 rounded-2xl bg-[#2563EB] text-white font-bold hover:opacity-90 transition-all\">{t.confirm}</button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {showContributeModal && (\n        <div className=\"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300 overflow-y-auto\">\n          <div className=\"bg-white rounded-[32px] p-8 md:p-10 w-full max-w-2xl shadow-2xl border border-white/20 animate-in zoom-in-95 duration-300 my-8\">\n            {contributionSuccess ? (\n              <div className=\"text-center py-10 animate-in zoom-in duration-500\">\n                <div className=\"w-20 h-20 bg-emerald-100 text-emerald-600 rounded-full flex items-center justify-center mx-auto mb-6\"><svg className=\"w-10 h-10\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={3}><path d=\"M5 13l4 4L19 7\" /></svg></div>\n                <h2 className=\"text-2xl font-black text-slate-900 mb-2\">{t.subReceived}</h2>\n                <p className=\"text-slate-500\">{t.subReceivedDesc}</p>\n              </div>\n            ) : (\n              <>\n                <div className=\"flex justify-between items-start mb-6\">\n                  <div>\n                    <h2 className=\"text-2xl font-black text-slate-900 mb-1\">{t.contributeTitle}</h2>\n                    <p className=\"text-slate-500 text-sm leading-relaxed\">{t.contributeDesc}</p>\n                  </div>\n                  <button onClick={() => setShowContributeModal(false)} className=\"p-2 hover:bg-slate-100 rounded-full text-slate-400 transition-colors\"><svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2.5}><path d=\"M6 18L18 6M6 6l12 12\" /></svg></button>\n                </div>\n\n                <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n                  <div className=\"space-y-4\">\n                    <div className=\"bg-slate-50/50 p-6 rounded-[24px] border border-slate-100 space-y-4\">\n                      <div>\n                        <label className=\"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1\">{t.title}</label>\n                        <input className=\"w-full px-5 py-3 rounded-xl bg-white border border-slate-200 focus:ring-4 focus:ring-blue-500/10 outline-none font-bold text-sm\" value={contributionData.title} onChange={e => setContributionData({...contributionData, title: e.target.value})} placeholder=\"Resource name\" />\n                      </div>\n                      <div>\n                        <label className=\"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1\">{t.url}</label>\n                        <input className=\"w-full px-5 py-3 rounded-xl bg-white border border-slate-200 focus:ring-4 focus:ring-blue-500/10 outline-none font-bold text-sm\" value={contributionData.url} onChange={e => setContributionData({...contributionData, url: e.target.value})} placeholder=\"https://...\" />\n                      </div>\n                      <div>\n                        <label className=\"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1\">{t.suggestedCol}</label>\n                        <select className=\"w-full px-5 py-3 rounded-xl bg-white border border-slate-200 focus:ring-4 focus:ring-blue-500/10 outline-none font-bold text-sm\" value={contributionData.category} onChange={e => setContributionData({...contributionData, category: e.target.value as any})}>\n                          {collections.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}\n                        </select>\n                      </div>\n                      <div>\n                        <label className=\"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1\">{t.description}</label>\n                        <textarea rows={2} className=\"w-full px-5 py-3 rounded-xl bg-white border border-slate-200 focus:ring-4 focus:ring-blue-500/10 outline-none font-bold text-sm resize-none\" value={contributionData.description} onChange={e => setContributionData({...contributionData, description: e.target.value})} placeholder=\"Briefly describe...\" />\n                      </div>\n                      <div>\n                        <label className=\"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1\">{t.yourName}</label>\n                        <input className=\"w-full px-5 py-3 rounded-xl bg-white border border-slate-200 font-bold text-sm mb-2\" value={contributionData.userName} onChange={e => setContributionData({...contributionData, userName: e.target.value})} placeholder=\"Your Name\" />\n                        <label className=\"flex items-center gap-2 cursor-pointer\">\n                          <input type=\"checkbox\" className=\"w-4 h-4 rounded\" checked={contributionData.wantsCredit} onChange={e => setContributionData({...contributionData, wantsCredit: e.target.checked})} />\n                          <span className=\"text-xs font-bold text-slate-500\">{t.creditName}</span>\n                        </label>\n                      </div>\n                      <button onClick={handleAddSuggestionToList} className=\"w-full bg-[#0F172A] text-white py-3 rounded-xl font-black uppercase tracking-widest text-[11px] hover:bg-black transition-all\">Add to List</button>\n                    </div>\n                  </div>\n\n                  <div className=\"flex flex-col h-full min-h-[400px]\">\n                    <div className=\"flex-1 overflow-y-auto pr-2 space-y-3 scrollbar-hide\">\n                      <div className=\"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1 flex justify-between\">\n                        <span>List of Suggestions</span>\n                        <span className=\"text-blue-600\">{suggestionList.length}</span>\n                      </div>\n                      {suggestionList.length === 0 ? (\n                        <div className=\"h-full min-h-[200px] border-2 border-dashed border-slate-100 rounded-[24px] flex items-center justify-center text-slate-300 font-bold text-xs italic\">Empty list.</div>\n                      ) : (\n                        suggestionList.map((item, idx) => (\n                          <div key={idx} className=\"p-4 bg-white border border-slate-100 rounded-2xl shadow-sm relative group\">\n                            <button onClick={() => handleRemoveFromList(idx)} className=\"absolute top-2 right-2 p-1 text-slate-300 hover:text-red-500\"><svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path d=\"M6 18L18 6M6 6l12 12\" /></svg></button>\n                            <div className=\"font-black text-slate-800 text-[13px] truncate pr-6\">{item.title}</div>\n                            <div className=\"text-[10px] text-blue-500 font-bold truncate\">{item.url}</div>\n                          </div>\n                        ))\n                      )}\n                    </div>\n                    <button onClick={handleExportCSV} disabled={suggestionList.length === 0} className={`w-full mt-6 py-4 rounded-2xl font-black uppercase tracking-widest shadow-lg transition-all ${suggestionList.length > 0 ? 'bg-[#2563EB] text-white shadow-blue-500/20 hover:opacity-90' : 'bg-slate-100 text-slate-400 cursor-not-allowed'}`}>Export CSV</button>\n                  </div>\n                </div>\n              </>\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default App;\n"
            }
          ]
        }
      ]
    },
    "createdTimestamp": {
      "seconds": 1770186608,
      "nanos": 179000000
    },
    "doneTimestamp": {
      "seconds": 1770186649,
      "nanos": 319000000
    }
  },
  {
    "id": 37,
    "author": "user",
    "payload": {
      "type": "text",
      "text": "add a little eastern egg that clicking on the dot of the logo at the welcome page the dot will drop, change nothing else",
      "files": [],
      "fileUploads": [],
      "cssBlocks": [],
      "cMarkNode": {}
    },
    "createdTimestamp": {
      "seconds": 1770187483,
      "nanos": 487000000
    }
  },
  {
    "id": 38,
    "author": "model",
    "payload": {
      "type": "thinking",
      "text": "**Considering Easter Egg Implementation**\n\nI'm currently focused on incorporating an Easter egg into the application. The goal is to make the dot in the welcome page logo \"drop\" upon clicking it. I've pinpointed the relevant section of code, specifically within `App.tsx`, where the logo is rendered inside a `div` when `isLandingActive` is true. Now, I'm thinking how to hook this interaction.\n\n\n**Analyzing Dot Interaction**\n\nI've examined the logo's structure within `App.tsx` closely. The dot, a `div` element with a blue background, is the target. I'm planning to introduce a state variable to monitor clicks on it. An `onClick` handler will be added to the dot `div`. The \"drop\" effect will be triggered by applying a CSS class or inline style that governs the falling animation. I'm focusing on defining this animation in `index.css`.\n\n\n**Refining Animation Approach**\n\nI'm now refining the animation implementation, trying to stay within the \"change nothing else\" constraint. I initially considered defining the animation in `index.css`, but now I'm thinking of adding it directly in the component using a style object, though I have to consider consistency. Ultimately, I'll add the animation to the `index.html` to be sure to comply. The animation itself will be a `drop` keyframe animation.\n\n\n**Finalizing Dot Implementation**\n\nI'm now integrating the Easter egg. I've placed the state and click logic within `App.tsx` because the requirement specifies the landing page logo. I've added the `drop` animation to `index.html`. My approach uses a state variable `isDotDropped` to control the animation via a conditional class name. I've also incorporated the animation keyframes in CSS within the `index.html`. Finally, I'm using `transform` to move the dot and rotate it, and `opacity` to hide it.\n\n\n**Revising Animation Definition**\n\nI'm now iterating on the drop animation. The current focus is on refining the `cubic-bezier` timing function within the inline style; I'm using `cubic-bezier(0.5, 0, 1, 1)` because it approximates the gravity curve. I've also re-confirmed that `index.html` is the most appropriate spot to define the `@keyframes drop` rule. I've re-reviewed the constraint to \"change nothing else\" which refers to the content of the request, and will proceed.\n\n\n**Confirming Scope Compliance**\n\nI'm now making final checks to ensure I adhere to \"change nothing else.\" After re-examining the code, specifically the welcome page logo within `App.tsx`, I am confident I can proceed as planned. I'll add the Easter egg to `index.html`. It should be fine. I'll focus state management within `App.tsx`.\n\n\n",
      "cMarkNode": {}
    },
    "createdTimestamp": {
      "seconds": 1770187483,
      "nanos": 488000000
    },
    "doneTimestamp": {
      "seconds": 1770187507,
      "nanos": 558000000
    }
  },
  {
    "id": 39,
    "author": "model",
    "payload": {
      "type": "generationTable",
      "entries": [
        {
          "path": "index.html",
          "generationType": 1,
          "isDone": true,
          "description": "Added a 'drop' keyframe animation for the Easter egg.",
          "diffs": [
            {
              "target": "",
              "replacement": "<!DOCTYPE html>\n<html lang=\"en\">\n  <head>\n    <meta charset=\"UTF-8\" />\n    <meta name=\"viewport\" content=\"width=device-width, initial-scale=1.0\" />\n    <title>HEORepo - HEOR Resource Hub</title>\n    <script src=\"https://cdn.tailwindcss.com\"></script>\n    <link href=\"https://fonts.googleapis.com/css2?family=Inter:wght@400;500;600;700;800;900&display=swap\" rel=\"stylesheet\">\n    <style>\n      body {\n        font-family: 'Inter', sans-serif;\n        background-color: #fcfdfe;\n        -webkit-font-smoothing: antialiased;\n      }\n\n      @keyframes slideUpFade {\n        from {\n          opacity: 0;\n          transform: translateY(12px);\n        }\n        to {\n          opacity: 1;\n          transform: translateY(0);\n        }\n      }\n\n      @keyframes float {\n        0%, 100% {\n          transform: translateY(0px) rotate(0deg);\n        }\n        50% {\n          transform: translateY(-10px) rotate(5deg);\n        }\n      }\n\n      @keyframes drop {\n        0% { transform: translateY(0) rotate(0deg); }\n        100% { transform: translateY(1000px) rotate(450deg); opacity: 0; }\n      }\n\n      .animate-card-entry {\n        animation: slideUpFade 0.5s cubic-bezier(0.16, 1, 0.3, 1) forwards;\n      }\n\n      .animate-float {\n        animation: float 3s ease-in-out infinite;\n      }\n\n      .animate-drop {\n        animation: drop 1.5s cubic-bezier(0.5, 0, 1, 1) forwards;\n        pointer-events: none;\n      }\n\n      .scrollbar-hide::-webkit-scrollbar {\n        display: none;\n      }\n      .scrollbar-hide {\n        -ms-overflow-style: none;\n        scrollbar-width: none;\n      }\n\n      /* Smooth transitions for all interactive elements */\n      * {\n        transition-timing-function: cubic-bezier(0.4, 0, 0.2, 1);\n      }\n    </style>\n    <script type=\"importmap\">\n    {\n      \"imports\": {\n        \"react-dom/\": \"https://esm.sh/react-dom@^19.2.3/\",\n        \"react/\": \"https://esm.sh/react@^19.2.3/\",\n        \"react\": \"https://esm.sh/react@^19.2.3\"\n      }\n    }\n    </script>\n  </head>\n  <body>\n    <div id=\"root\"></div>\n  </body>\n</html>"
            }
          ]
        },
        {
          "path": "App.tsx",
          "generationType": 1,
          "isDone": true,
          "description": "Added state to track the dropped dot Easter egg and applied the animation to the logo dot on the welcome page.",
          "diffs": [
            {
              "target": "",
              "replacement": "\nimport React, { useState, useMemo, useEffect } from 'react';\nimport Sidebar from './components/Sidebar';\nimport ResourceCard from './components/ResourceCard';\nimport AdminDashboard from './components/AdminDashboard';\nimport { COLLECTIONS as initialCollections, RESOURCES as initialResources, TAGLINE_WORDS as initialTaglines, REPO_VERSION } from './data';\nimport { Resource, Collection, Theme } from './types';\n\nconst BRAND_BLUE = '#2563EB';\nconst DARK_NAVY = '#121A26';\n\nconst t = {\n  welcome: \"Welcome to\",\n  intro: \"The repository of open-source tools & resources for Health Economics and Outcomes Research\",\n  select: \"Select a collection to begin ðŸ‘‡\",\n  contributeBtn: \"Contribute to HEORepo\",\n  archive: \"Archive\",\n  vault: \"Vault\",\n  deck: \"Deck\",\n  search: \"Search...\",\n  items: \"ITEMS\",\n  adminPanel: \"ADMIN CONTROL PANEL\",\n  fullRepo: \"FULL REPOSITORY\",\n  exitAdmin: \"Exit Admin\",\n  management: \"Management\",\n  emptyTitle: \"Empty Archive\",\n  emptyDesc: \"Adjust your filters or try a different search term.\",\n  version: \"VERSION\",\n  adminMode: \"ADMIN MODE\",\n  adminPortal: \"Admin Portal\",\n  adminPortalDesc: \"Enter system password to access management tools.\",\n  password: \"Password\",\n  incorrectPassword: \"Incorrect Password\",\n  cancel: \"Cancel\",\n  confirm: \"Confirm\",\n  contributeTitle: \"Contribute\",\n  contributeDesc: \"Suggest high-quality HEOR resources. Please input your suggestions below, then click 'Export CSV' and email the resulting file to contact@heorepo.com for review.\",\n  title: \"Title\",\n  url: \"URL\",\n  suggestedCol: \"Suggested Collection\",\n  description: \"Description\",\n  yourName: \"Your Name\",\n  creditName: \"Credit my name\",\n  addToList: \"Add to List\",\n  exportCsv: \"Export CSV\",\n  subReceived: \"Export Successful\",\n  subReceivedDesc: \"CSV exported. Please email it to contact@heorepo.com\",\n  allResources: \"All Resources\"\n};\n\nconst sanitizeData = (str: string): string => {\n  if (typeof str !== 'string') return '';\n  return str.replace(/<[^>]*>?/gm, '').trim();\n};\n\nconst isValidLink = (url: string): boolean => {\n  try {\n    const parsed = new URL(url.startsWith('http') ? url : `https://${url}`);\n    return parsed.protocol === 'http:' || parsed.protocol === 'https:';\n  } catch {\n    return false;\n  }\n};\n\nconst escapeCSV = (val: string | undefined): string => {\n  if (!val) return '\"\"';\n  const str = val.toString().replace(/\"/g, '\"\"');\n  return `\"${str}\"`;\n};\n\nconst App: React.FC = () => {\n  const [activeTheme, setActiveTheme] = useState<string>('landing');\n  const [activeSubCategory, setActiveSubCategory] = useState<string>('all');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [isSidebarOpen, setIsSidebarOpen] = useState(false);\n  const [isDotDropped, setIsDotDropped] = useState(false);\n  \n  const [isAdmin, setIsAdmin] = useState(false);\n  const [showLoginModal, setShowLoginModal] = useState(false);\n  const [password, setPassword] = useState('');\n  const [loginError, setLoginError] = useState(false);\n\n  const shouldResetCache = useMemo(() => {\n    const savedVersionStr = localStorage.getItem('heo_repo_version');\n    const savedVersion = savedVersionStr ? parseInt(savedVersionStr) : 0;\n    const currentVersion = REPO_VERSION || 0;\n    return currentVersion > savedVersion;\n  }, []);\n\n  const [collections, setCollections] = useState<Collection[]>(() => {\n    try {\n      if (shouldResetCache) return initialCollections;\n      const saved = localStorage.getItem('heo_collections');\n      return saved ? JSON.parse(saved) : initialCollections;\n    } catch { return initialCollections; }\n  });\n  \n  const [resources, setResources] = useState<Resource[]>(() => {\n    try {\n      if (shouldResetCache) return initialResources;\n      const saved = localStorage.getItem('heo_resources');\n      return saved ? JSON.parse(saved) : initialResources;\n    } catch { return initialResources; }\n  });\n  \n  const [taglineWords, setTaglineWords] = useState<string[]>(() => {\n    try {\n      if (shouldResetCache) return initialTaglines;\n      const saved = localStorage.getItem('heo_tagline');\n      return saved ? JSON.parse(saved) : initialTaglines;\n    } catch { return initialTaglines; }\n  });\n\n  useEffect(() => {\n    if (searchQuery.toLowerCase() === 'admin') {\n      setSearchQuery('');\n      setShowLoginModal(true);\n    }\n  }, [searchQuery]);\n\n  useEffect(() => {\n    try {\n      localStorage.setItem('heo_collections', JSON.stringify(collections));\n      localStorage.setItem('heo_resources', JSON.stringify(resources));\n      localStorage.setItem('heo_tagline', JSON.stringify(taglineWords));\n      localStorage.setItem('heo_repo_version', (REPO_VERSION || 0).toString());\n    } catch (e) {}\n  }, [collections, resources, taglineWords]);\n\n  useEffect(() => {\n    setActiveSubCategory('all');\n    if (activeTheme !== 'landing') {\n      setIsDotDropped(false);\n    }\n  }, [activeTheme]);\n\n  const handleLogin = () => {\n    if (password.trim() === '123456') {\n      setIsAdmin(true);\n      setShowLoginModal(false);\n      setPassword('');\n      setLoginError(false);\n      setActiveTheme('admin-deck');\n    } else {\n      setLoginError(true);\n    }\n  };\n\n  const handleLogout = () => {\n    setIsAdmin(false);\n    if (activeTheme === 'admin-deck') {\n      setActiveTheme('landing');\n    }\n  };\n\n  const [showContributeModal, setShowContributeModal] = useState(false);\n  const [suggestionList, setSuggestionList] = useState<any[]>([]);\n  const [contributionData, setContributionData] = useState({ \n    title: '', \n    url: '', \n    description: '', \n    userName: '', \n    category: Theme.GENERAL, \n    wantsCredit: true \n  });\n  const [contributionSuccess, setContributionSuccess] = useState(false);\n\n  const handleAddSuggestionToList = () => {\n    if (!contributionData.title || !contributionData.url) {\n      alert(\"Please provide at least a title and a valid URL.\");\n      return;\n    }\n    if (!isValidLink(contributionData.url)) {\n      alert(\"Please provide a secure and valid URL.\");\n      return;\n    }\n\n    setSuggestionList(prev => [...prev, {\n      title: sanitizeData(contributionData.title),\n      url: contributionData.url,\n      description: sanitizeData(contributionData.description),\n      userName: sanitizeData(contributionData.userName),\n      category: contributionData.category,\n      wantsCredit: contributionData.wantsCredit\n    }]);\n\n    setContributionData({ \n      title: '', \n      url: '', \n      description: '', \n      userName: contributionData.userName, \n      category: Theme.GENERAL, \n      wantsCredit: contributionData.wantsCredit \n    });\n  };\n\n  const handleRemoveFromList = (idx: number) => {\n    setSuggestionList(prev => prev.filter((_, i) => i !== idx));\n  };\n\n  const handleExportCSV = () => {\n    if (suggestionList.length === 0) {\n      alert(\"Add at least one suggestion to the list before exporting.\");\n      return;\n    }\n\n    const headers = ['Title', 'Description', 'URL', 'Contributor', 'Category', 'SubCategory'];\n    const csvRows = suggestionList.map(item => [\n      escapeCSV(item.title),\n      escapeCSV(item.description),\n      escapeCSV(item.url),\n      escapeCSV(item.wantsCredit ? item.userName : 'Anonymous'),\n      escapeCSV(item.category),\n      escapeCSV('all')\n    ].join(\",\"));\n\n    const csvContent = [headers.join(\",\"), ...csvRows].join(\"\\n\");\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement(\"a\");\n    link.setAttribute(\"href\", url);\n    link.setAttribute(\"download\", `heorepo_suggestions_${new Date().getTime()}.csv`);\n    link.click();\n\n    setContributionSuccess(true);\n    setTimeout(() => {\n      setShowContributeModal(false);\n      setContributionSuccess(false);\n      setSuggestionList([]);\n    }, 4000);\n  };\n\n  const filteredResources = useMemo(() => {\n    return resources.filter(res => {\n      const matchesTheme = activeTheme === 'all' || res.category === activeTheme;\n      const matchesSubCategory = activeSubCategory === 'all' || res.subCategory?.toLowerCase() === activeSubCategory.toLowerCase();\n      const matchesSearch = res.title.toLowerCase().includes(searchQuery.toLowerCase()) || \n                            res.description.toLowerCase().includes(searchQuery.toLowerCase());\n      return matchesTheme && matchesSubCategory && matchesSearch;\n    });\n  }, [activeTheme, activeSubCategory, searchQuery, resources]);\n\n  const currentCollection = useMemo(() => collections.find(c => c.id === activeTheme), [activeTheme, collections]);\n  const isAdminDeckActive = activeTheme === 'admin-deck' && isAdmin;\n  const isLandingActive = activeTheme === 'landing';\n  const collectionName = isAdminDeckActive ? t.management : (activeTheme === 'all' ? t.archive : currentCollection?.name || t.archive);\n  \n  const subCategoryFilters = useMemo(() => {\n    if (!currentCollection) return [];\n    return [...(currentCollection.subCategories || []), 'All'];\n  }, [currentCollection]);\n\n  return (\n    <div className=\"flex h-screen bg-[#FCFDFF] text-slate-900 overflow-hidden font-['Inter'] antialiased relative\">\n      <Sidebar \n        collections={collections} activeTheme={activeTheme} onThemeSelect={setActiveTheme} \n        isOpen={isSidebarOpen} onClose={() => setIsSidebarOpen(false)}\n        onAdminClick={() => isAdmin ? handleLogout() : null} isAdminActive={isAdmin} taglineWords={taglineWords}\n      />\n\n      <main className=\"flex-1 flex flex-col overflow-hidden\">\n        {!isLandingActive && (\n          <header className=\"bg-white px-4 md:px-8 pt-4 md:pt-8 pb-5 border-b border-[#F1F5F9]/60 relative z-30\">\n            <div className=\"max-w-[1440px] mx-auto\">\n              <div className=\"flex items-center justify-between mb-4 lg:hidden\">\n                <div className=\"flex items-center font-[900] text-[26px] tracking-[-0.04em] leading-none select-none cursor-pointer\" onClick={() => setActiveTheme('landing')}>\n                  <span style={{ color: DARK_NAVY }}>HEO</span>\n                  <span style={{ backgroundImage: `linear-gradient(to right, ${DARK_NAVY} 50%, ${BRAND_BLUE} 50%)`, WebkitBackgroundClip: 'text', WebkitTextFillColor: 'transparent', display: 'inline-block', position: 'relative', padding: '0 0.2em', margin: '0 -0.2em' }}>R</span>\n                  <span style={{ color: BRAND_BLUE }}>epo</span>\n                  <div className=\"ml-[2px] self-end\" style={{ backgroundColor: BRAND_BLUE, width: '6.5px', height: '6.5px', marginBottom: '3px' }}></div>\n                </div>\n                <button onClick={() => setIsSidebarOpen(true)} className=\"p-2 hover:bg-slate-50 rounded-xl transition-colors\"><svg className=\"w-6 h-6 text-slate-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2.5}><path d=\"M4 6h16M4 12h16M4 18h16\" /></svg></button>\n              </div>\n\n              <div className=\"flex flex-col md:flex-row md:items-end justify-between gap-4 md:gap-8 mb-6\">\n                <div className=\"flex flex-col gap-2 md:gap-3\">\n                  <div className=\"flex items-center gap-3 md:gap-4\">\n                    <div className=\"px-3 py-1 rounded-full bg-[#EFF6FF] border border-[#2563EB]/20 text-[9px] md:text-[10px] font-[800] tracking-[0.12em] md:tracking-[0.15em] text-[#2563EB] uppercase\">\n                      {isAdminDeckActive ? t.adminPanel : (activeTheme === 'all' ? t.fullRepo : (currentCollection?.name.toUpperCase() || 'UNKNOWN'))}\n                    </div>\n                    {!isAdminDeckActive && <div className=\"text-[9px] md:text-[10px] font-[800] tracking-[0.12em] md:tracking-[0.15em] text-[#64748B] uppercase\">{filteredResources.length} {t.items}</div>}\n                  </div>\n                  <h1 className=\"text-[32px] md:text-[48px] font-[900] tracking-[-0.04em] leading-[0.9] text-[#0F172A]\">{collectionName} <span className=\"text-[#D1D5DB] font-[900]\">{isAdminDeckActive ? t.deck : t.vault}</span></h1>\n                </div>\n\n                <div className=\"flex flex-col sm:flex-row items-stretch sm:items-center gap-3 md:gap-6 pb-1\">\n                  {!isAdminDeckActive && (\n                    <div className=\"relative w-full sm:w-[280px] md:w-[380px]\">\n                      <div className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-[#94A3B8]\"><svg className=\"h-4 w-4 md:h-5 md:w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2.5}><path d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" /></svg></div>\n                      <input type=\"text\" placeholder={t.search} className=\"block w-full pl-10 md:pl-12 pr-6 py-2.5 md:py-3.5 bg-[#F8FAFC] border border-[#F1F5F9] rounded-full text-[14px] md:text-[15px] font-medium text-[#1E293B] focus:ring-1 focus:ring-[#4F46E5] focus:bg-white outline-none shadow-sm transition-all placeholder-[#94A3B8]\" value={searchQuery} onChange={(e) => setSearchQuery(e.target.value)} />\n                    </div>\n                  )}\n                  <button onClick={() => isAdmin ? handleLogout() : setShowContributeModal(true)} className={`flex items-center justify-center gap-2 px-6 md:px-8 py-2.5 md:py-3.5 ${isAdminDeckActive ? 'bg-[#0F172A]' : 'bg-[#2563EB]'} text-white text-[14px] md:text-[15px] font-[700] rounded-full hover:opacity-90 transition-all shadow-md active:scale-[0.96]`}><svg className=\"w-4 h-4 md:w-5 md:h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={3}><path d={isAdminDeckActive ? \"M15 19l-7-7 7-7\" : \"M12 4v16m8-8H4\"} /></svg><span className=\"whitespace-nowrap\">{isAdminDeckActive ? t.exitAdmin : t.contributeBtn}</span></button>\n                </div>\n              </div>\n\n              {!isAdminDeckActive && subCategoryFilters.length > 0 && (\n                <div className=\"min-h-[48px] flex items-center overflow-hidden\">\n                  <div className=\"flex items-center gap-2 md:gap-3 overflow-x-auto pb-2 -mx-4 px-4 scrollbar-hide snap-x snap-mandatory\">\n                    {subCategoryFilters.map((sub) => {\n                      const filterValue = sub.toLowerCase() === 'all' ? 'all' : sub;\n                      const isSelected = activeSubCategory === filterValue;\n                      return (\n                        <button key={sub} onClick={() => setActiveSubCategory(filterValue)} className={`px-5 md:px-6 py-2 md:py-2.5 rounded-full text-[10px] md:text-[11px] font-[800] tracking-[0.1em] uppercase whitespace-nowrap active:scale-95 border transition-all duration-300 snap-center ${isSelected ? 'bg-[#0F172A] text-white border-[#0F172A] shadow-lg shadow-slate-200' : 'bg-white text-[#475569] border-[#E2E8F0] hover:border-[#CBD5E1]'}`}>{sub}</button>\n                      );\n                    })}\n                  </div>\n                </div>\n              )}\n            </div>\n          </header>\n        )}\n\n        <div className=\"flex-1 overflow-y-auto px-4 md:px-8 py-6 md:py-10 scroll-smooth\">\n          <div className=\"max-w-[1440px] mx-auto h-full\">\n            {isLandingActive ? (\n              <div className=\"flex flex-col items-center justify-center h-full text-center animate-card-entry pb-20 select-none relative overflow-visible\">\n                <div className=\"absolute inset-0 pointer-events-none overflow-visible\">\n                   <span className=\"absolute top-[20%] left-[15%] text-4xl animate-float opacity-40 md:opacity-100\">ðŸŽ‰</span>\n                   <span className=\"absolute top-[15%] right-[20%] text-4xl animate-float opacity-40 md:opacity-100\">ðŸ“Š</span>\n                   <span className=\"absolute bottom-[30%] left-[20%] text-4xl animate-float opacity-40 md:opacity-100\">ðŸš€</span>\n                   <span className=\"absolute bottom-[40%] right-[15%] text-4xl animate-float opacity-40 md:opacity-100\">ðŸ’Š</span>\n                   <span className=\"absolute top-[45%] left-[5%] text-3xl animate-float opacity-30 md:opacity-80\" style={{ animationDelay: '0.2s' }}>ðŸ“ˆ</span>\n                   <span className=\"absolute top-[35%] right-[5%] text-3xl animate-float opacity-30 md:opacity-80\" style={{ animationDelay: '0.7s' }}>ðŸ’‰</span>\n                </div>\n                <span className=\"text-lg md:text-2xl font-[600] text-slate-400 mb-2 md:mb-4 block tracking-tight relative z-10\">{t.welcome}</span>\n                <div className=\"flex flex-col items-center mb-6 md:mb-10 relative z-10\">\n                  <div className=\"flex items-center justify-center font-[900] text-[56px] md:text-[110px] tracking-[-0.04em] leading-none\">\n                    <span style={{ color: DARK_NAVY }}>HEO</span>\n                    <span style={{ backgroundImage: `linear-gradient(to right, ${DARK_NAVY} 50%, ${BRAND_BLUE} 50%)`, WebkitBackgroundClip: 'text', WebkitTextFillColor: 'transparent', display: 'inline-block', position: 'relative', padding: '0 0.2em', margin: '0 -0.2em' }}>R</span>\n                    <span style={{ color: BRAND_BLUE }}>epo</span>\n                    <div \n                      onClick={() => setIsDotDropped(true)}\n                      className={`ml-[4px] md:ml-[10px] self-end cursor-pointer transition-transform hover:scale-125 ${isDotDropped ? 'animate-drop' : ''}`} \n                      style={{ backgroundColor: BRAND_BLUE, width: '14px', height: '14px', marginBottom: '8px' }}\n                    ></div>\n                  </div>\n                  <div className=\"max-w-3xl flex flex-col items-center px-4\">\n                    <p className=\"text-[14px] md:text-[19px] text-slate-500 font-medium mt-4 md:mt-6 leading-relaxed\">\n                      The repository of open-source tools & resources <br /> for <span style={{ color: BRAND_BLUE, fontWeight: 900 }}>H</span>ealth <span style={{ color: BRAND_BLUE, fontWeight: 900 }}>E</span>conomics and <span style={{ color: BRAND_BLUE, fontWeight: 900 }}>O</span>utcomes <span style={{ color: BRAND_BLUE, fontWeight: 900 }}>R</span>esearch.\n                    </p>\n                  </div>\n                  <div className=\"mt-12 flex flex-col items-center gap-6 w-full max-w-xl px-4 relative z-10\">\n                    <p className=\"text-slate-400 font-bold text-xs uppercase tracking-[0.2em]\">{t.select}</p>\n                    <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-4 w-full\">\n                      {collections.map(col => (\n                        <button key={col.id} onClick={() => setActiveTheme(col.id)} className=\"flex flex-col items-center justify-center p-6 bg-white border border-slate-100 rounded-[24px] hover:border-blue-400 hover:shadow-xl hover:-translate-y-1 transition-all duration-300 group\">\n                          <span className=\"text-3xl mb-3 group-hover:scale-110 transition-transform\">{col.icon}</span>\n                          <span className=\"text-[11px] font-black uppercase tracking-widest text-slate-600 group-hover:text-blue-600\">{col.name}</span>\n                        </button>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ) : isAdminDeckActive ? (\n              <AdminDashboard resources={resources} setResources={setResources} collections={collections} setCollections={setCollections} taglineWords={taglineWords} setTaglineWords={setTaglineWords} />\n            ) : (\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 md:gap-8 auto-rows-fr\">\n                {filteredResources.length > 0 ? filteredResources.map((res, idx) => (<ResourceCard key={res.id} resource={res} index={idx} />)) : (\n                  <div className=\"col-span-full py-20 text-center\">\n                    <div className=\"w-20 h-20 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-6\"><svg className=\"w-10 h-10 text-slate-300\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}><path d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" /></svg></div>\n                    <h3 className=\"text-xl font-black text-slate-800 mb-2\">{t.emptyTitle}</h3>\n                    <p className=\"text-slate-500 max-w-md mx-auto\">{t.emptyDesc}</p>\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n        </div>\n      </main>\n\n      {showLoginModal && (\n        <div className=\"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300\">\n          <div className=\"bg-white rounded-[32px] p-8 md:p-10 w-full max-w-md shadow-2xl border border-white/20 animate-in zoom-in-95 duration-300\">\n            <h2 className=\"text-2xl font-black text-slate-900 mb-2\">{t.adminPortal}</h2>\n            <div className=\"space-y-4\">\n              <div>\n                <input type=\"text\" value={password} onChange={(e) => setPassword(e.target.value)} onKeyDown={(e) => e.key === 'Enter' && handleLogin()} className={`w-full px-6 py-4 rounded-2xl bg-slate-50 border ${loginError ? 'border-red-500' : 'border-slate-100'} focus:ring-4 focus:ring-blue-500/10 focus:bg-white outline-none transition-all font-bold`} placeholder=\"Enter Password\" autoFocus />\n                {loginError && <p className=\"text-red-500 text-[11px] font-bold mt-2 ml-1\">{t.incorrectPassword}</p>}\n              </div>\n              <div className=\"flex gap-3 pt-2\">\n                <button onClick={() => setShowLoginModal(false)} className=\"flex-1 px-6 py-4 rounded-2xl bg-slate-100 text-slate-600 font-bold hover:bg-slate-200 transition-all\">{t.cancel}</button>\n                <button onClick={handleLogin} className=\"flex-1 px-6 py-4 rounded-2xl bg-[#2563EB] text-white font-bold hover:opacity-90 transition-all\">{t.confirm}</button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {showContributeModal && (\n        <div className=\"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300 overflow-y-auto\">\n          <div className=\"bg-white rounded-[32px] p-8 md:p-10 w-full max-w-2xl shadow-2xl border border-white/20 animate-in zoom-in-95 duration-300 my-8\">\n            {contributionSuccess ? (\n              <div className=\"text-center py-10 animate-in zoom-in duration-500\">\n                <div className=\"w-20 h-20 bg-emerald-100 text-emerald-600 rounded-full flex items-center justify-center mx-auto mb-6\"><svg className=\"w-10 h-10\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={3}><path d=\"M5 13l4 4L19 7\" /></svg></div>\n                <h2 className=\"text-2xl font-black text-slate-900 mb-2\">{t.subReceived}</h2>\n                <p className=\"text-slate-500\">{t.subReceivedDesc}</p>\n              </div>\n            ) : (\n              <>\n                <div className=\"flex justify-between items-start mb-6\">\n                  <div>\n                    <h2 className=\"text-2xl font-black text-slate-900 mb-1\">{t.contributeTitle}</h2>\n                    <p className=\"text-slate-500 text-sm leading-relaxed\">{t.contributeDesc}</p>\n                  </div>\n                  <button onClick={() => setShowContributeModal(false)} className=\"p-2 hover:bg-slate-100 rounded-full text-slate-400 transition-colors\"><svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2.5}><path d=\"M6 18L18 6M6 6l12 12\" /></svg></button>\n                </div>\n\n                <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n                  <div className=\"space-y-4\">\n                    <div className=\"bg-slate-50/50 p-6 rounded-[24px] border border-slate-100 space-y-4\">\n                      <div>\n                        <label className=\"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1\">{t.title}</label>\n                        <input className=\"w-full px-5 py-3 rounded-xl bg-white border border-slate-200 focus:ring-4 focus:ring-blue-500/10 outline-none font-bold text-sm\" value={contributionData.title} onChange={e => setContributionData({...contributionData, title: e.target.value})} placeholder=\"Resource name\" />\n                      </div>\n                      <div>\n                        <label className=\"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1\">{t.url}</label>\n                        <input className=\"w-full px-5 py-3 rounded-xl bg-white border border-slate-200 focus:ring-4 focus:ring-blue-500/10 outline-none font-bold text-sm\" value={contributionData.url} onChange={e => setContributionData({...contributionData, url: e.target.value})} placeholder=\"https://...\" />\n                      </div>\n                      <div>\n                        <label className=\"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1\">{t.suggestedCol}</label>\n                        <select className=\"w-full px-5 py-3 rounded-xl bg-white border border-slate-200 focus:ring-4 focus:ring-blue-500/10 outline-none font-bold text-sm\" value={contributionData.category} onChange={e => setContributionData({...contributionData, category: e.target.value as any})}>\n                          {collections.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}\n                        </select>\n                      </div>\n                      <div>\n                        <label className=\"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1\">{t.description}</label>\n                        <textarea rows={2} className=\"w-full px-5 py-3 rounded-xl bg-white border border-slate-200 focus:ring-4 focus:ring-blue-500/10 outline-none font-bold text-sm resize-none\" value={contributionData.description} onChange={e => setContributionData({...contributionData, description: e.target.value})} placeholder=\"Briefly describe...\" />\n                      </div>\n                      <div>\n                        <label className=\"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1\">{t.yourName}</label>\n                        <input className=\"w-full px-5 py-3 rounded-xl bg-white border border-slate-200 font-bold text-sm mb-2\" value={contributionData.userName} onChange={e => setContributionData({...contributionData, userName: e.target.value})} placeholder=\"Your Name\" />\n                        <label className=\"flex items-center gap-2 cursor-pointer\">\n                          <input type=\"checkbox\" className=\"w-4 h-4 rounded\" checked={contributionData.wantsCredit} onChange={e => setContributionData({...contributionData, wantsCredit: e.target.checked})} />\n                          <span className=\"text-xs font-bold text-slate-500\">{t.creditName}</span>\n                        </label>\n                      </div>\n                      <button onClick={handleAddSuggestionToList} className=\"w-full bg-[#0F172A] text-white py-3 rounded-xl font-black uppercase tracking-widest text-[11px] hover:bg-black transition-all\">Add to List</button>\n                    </div>\n                  </div>\n\n                  <div className=\"flex flex-col h-full min-h-[400px]\">\n                    <div className=\"flex-1 overflow-y-auto pr-2 space-y-3 scrollbar-hide\">\n                      <div className=\"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1 flex justify-between\">\n                        <span>List of Suggestions</span>\n                        <span className=\"text-blue-600\">{suggestionList.length}</span>\n                      </div>\n                      {suggestionList.length === 0 ? (\n                        <div className=\"h-full min-h-[200px] border-2 border-dashed border-slate-100 rounded-[24px] flex items-center justify-center text-slate-300 font-bold text-xs italic\">Empty list.</div>\n                      ) : (\n                        suggestionList.map((item, idx) => (\n                          <div key={idx} className=\"p-4 bg-white border border-slate-100 rounded-2xl shadow-sm relative group\">\n                            <button onClick={() => handleRemoveFromList(idx)} className=\"absolute top-2 right-2 p-1 text-slate-300 hover:text-red-500\"><svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path d=\"M6 18L18 6M6 6l12 12\" /></svg></button>\n                            <div className=\"font-black text-slate-800 text-[13px] truncate pr-6\">{item.title}</div>\n                            <div className=\"text-[10px] text-blue-500 font-bold truncate\">{item.url}</div>\n                          </div>\n                        ))\n                      )}\n                    </div>\n                    <button onClick={handleExportCSV} disabled={suggestionList.length === 0} className={`w-full mt-6 py-4 rounded-2xl font-black uppercase tracking-widest shadow-lg transition-all ${suggestionList.length > 0 ? 'bg-[#2563EB] text-white shadow-blue-500/20 hover:opacity-90' : 'bg-slate-100 text-slate-400 cursor-not-allowed'}`}>Export CSV</button>\n                  </div>\n                </div>\n              </>\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default App;"
            }
          ]
        }
      ]
    },
    "createdTimestamp": {
      "seconds": 1770187507,
      "nanos": 559000000
    },
    "doneTimestamp": {
      "seconds": 1770187511,
      "nanos": 411000000
    }
  },
  {
    "id": 40,
    "author": "user",
    "payload": {
      "type": "text",
      "text": "add a change log icon to the bottom left of the welcome page, which admin can adjust",
      "files": [],
      "fileUploads": [],
      "cssBlocks": [],
      "cMarkNode": {}
    },
    "createdTimestamp": {
      "seconds": 1770191190,
      "nanos": 424000000
    }
  },
  {
    "id": 41,
    "author": "model",
    "payload": {
      "type": "thinking",
      "text": "**Considering Admin Adjustment**\n\nI'm now focusing on how the \"change log\" icon and its associated content can be made adjustable by the admin. This necessitates adding new data to the repository, which is a key consideration. I'm exploring the implications of storing the change log content and how the admin will interact with that data to update the feature.\n\n\n",
      "cMarkNode": {}
    },
    "createdTimestamp": {
      "seconds": 1770191190,
      "nanos": 424000000
    },
    "doneTimestamp": {
      "seconds": 1770191202,
      "nanos": 253000000
    }
  },
  {
    "id": 42,
    "author": "model",
    "payload": {
      "type": "generationTable",
      "entries": [
        {
          "path": "data.ts",
          "generationType": 1,
          "isDone": true,
          "description": "Added CHANGE_LOG export to store repository updates.",
          "diffs": [
            {
              "target": "",
              "replacement": "import { Collection, Resource, Theme } from './types';\n\n/**\n * HEORepo Repository Data\n * Updated: 28/01/2026\n * REPO_VERSION is used to trigger cache resets for all users when you push to GitHub.\n */\n\nexport const REPO_VERSION = 1769663499949;\n\nexport const COLLECTIONS: Collection[] = [\n  {\n    \"id\": Theme.ECONOMIC_MODELING,\n    \"name\": \"Modelling\",\n    \"icon\": \"âš–ï¸\",\n    \"description\": \"Economic modeling, cost-effectiveness, and simulations.\",\n    \"subCategories\": [\n      \"Decision Tree\",\n      \"Markov\",\n      \"PSA\"\n    ]\n  },\n  {\n    \"id\": Theme.SURVIVAL_ANALYSIS,\n    \"name\": \"Survival Analysis\",\n    \"icon\": \"ðŸ“ˆ\",\n    \"description\": \"Evidence-based survival extrapolation and KM analysis.\",\n    \"subCategories\": [\n      \"KM-IPD\",\n      \"Extrapolation\"\n    ]\n  },\n  {\n    \"id\": Theme.SYSTEMATIC_REVIEWS,\n    \"name\": \"Meta-Analysis\",\n    \"icon\": \"â›“ï¸\",\n    \"description\": \"Evidence synthesis and systematic review methodologies.\",\n    \"subCategories\": [\n      \"Tutorials\",\n      \"Resources\",\n      \"Network Meta-analysis\"\n    ]\n  },\n  {\n    \"id\": Theme.GENERAL,\n    \"name\": \"General\",\n    \"icon\": \"ðŸ“¦\",\n    \"description\": \"Broad HEOR resources and foundational materials.\",\n    \"subCategories\": []\n  }\n];\n\nexport const RESOURCES: Resource[] = [\n  {\n    \"id\": \"26ki8shqh\",\n    \"title\": \"Network Meta-Analysis for Decision-Making\",\n    \"description\": \"This book can be used as an introduction to evidence synthesis and network meta-analysis, its key properties and policy implications. Examples and advanced methods are also presented for the more experienced reader.\",\n    \"contributor\": \"Admin\",\n    \"url\": \"https://www.agropustaka.id/wp-content/uploads/2020/04/agropustaka.id_buku_Network-Meta-Analysis-for-Decision-Making.pdf\",\n    \"domain\": \"WWW.AGROPUSTAKA.ID\",\n    \"imageUrl\": \"https://images.unsplash.com/photo-1551288049-bbda38a594a0?auto=format&fit=crop&q=80&w=600\",\n    \"addedDate\": \"28/01/2026\",\n    \"category\": Theme.SYSTEMATIC_REVIEWS,\n    \"subCategory\": \"Network Meta-analysis\"\n  },\n  {\n    \"id\": \"hewxh7smp\",\n    \"title\": \"Partitioned-Survival-Analysis_DARTH\",\n    \"description\": \"A repository contains functions useful for conducting partitioned survival analysis in R and provides a few examples.\",\n    \"contributor\": \"Admin\",\n    \"url\": \"https://github.com/DARTH-git/Partitioned-Survival-Analysis\",\n    \"domain\": \"GITHUB.COM\",\n    \"imageUrl\": \"https://images.unsplash.com/photo-1551288049-bbda38a594a0?auto=format&fit=crop&q=80&w=600\",\n    \"addedDate\": \"28/01/2026\",\n    \"category\": Theme.ECONOMIC_MODELING,\n    \"subCategory\": \"PSA\"\n  },\n  {\n    \"id\": \"anrz5j07v\",\n    \"title\": \"Youtube channel_Mirko von Hein\",\n    \"description\": \"A former consultant's channel with topics such as health economics, what it means to be a pharma consultant, and industry insights.\",\n    \"contributor\": \"Admin\",\n    \"url\": \"https://www.youtube.com/@MirkovonHein\",\n    \"domain\": \"WWW.YOUTUBE.COM\",\n    \"imageUrl\": \"https://images.unsplash.com/photo-1551288049-bbda38a594a0?auto=format&fit=crop&q=80&w=600\",\n    \"addedDate\": \"28/01/2026\",\n    \"category\": Theme.ECONOMIC_MODELING,\n    \"subCategory\": \"all\"\n  },\n  {\n    \"id\": \"lnwksnmxr\",\n    \"title\": \"HEALTHECON ALL_JISCMAIL\",\n    \"description\": \"A mail list of Health Economists in the UK, for distributing messages to all the health economics lists.\",\n    \"contributor\": \"Admin\",\n    \"url\": \"https://www.jiscmail.ac.uk/cgi-bin/webadmin?A0=HEALTHECON-ALL\",\n    \"domain\": \"WWW.JISCMAIL.AC.UK\",\n    \"imageUrl\": \"https://images.unsplash.com/photo-1551288049-bbda38a594a0?auto=format&fit=crop&q=80&w=600\",\n    \"addedDate\": \"27/01/2026\",\n    \"category\": Theme.GENERAL,\n    \"subCategory\": \"all\"\n  },\n  {\n    \"id\": \"3bz5y8qpx\",\n    \"title\": \"Decision tree tutorial_RPubs\",\n    \"description\": \"A detailed, step-by-step guide by Mark Bounthavong that teaches how to build a decision tree from scratch in R, including estimating costs, outcomes, and ICERs.\",\n    \"contributor\": \"Admin\",\n    \"url\": \"https://rpubs.com/mbounthavong/decision_tree_model_tutorial\",\n    \"domain\": \"RPUBS.COM\",\n    \"imageUrl\": \"https://images.unsplash.com/photo-1551288049-bbda38a594a0?auto=format&fit=crop&q=80&w=600\",\n    \"addedDate\": \"27/01/2026\",\n    \"category\": Theme.ECONOMIC_MODELING,\n    \"subCategory\": \"Decision Tree\"\n  },\n  {\n    \"id\": \"73le3hc79\",\n    \"title\": \"Plant A Tree_GEAR\",\n    \"description\": \"An Open Access Decision Tree Builder developed by the National University of Singapore (NUS) and HITAP. Allows for the creation of complex decision trees with unlimited branches directly in Excel.\",\n    \"contributor\": \"Admin\",\n    \"url\": \"https://www.gear4health.com/page/i/plant-a-tree\",\n    \"domain\": \"WWW.GEAR4HEALTH.COM\",\n    \"imageUrl\": \"https://images.unsplash.com/photo-1551288049-bbda38a594a0?auto=format&fit=crop&q=80&w=600\",\n    \"addedDate\": \"27/01/2026\",\n    \"category\": Theme.ECONOMIC_MODELING,\n    \"subCategory\": \"Decision Tree\"\n  },\n  {\n    \"id\": \"1x8awlfbp\",\n    \"title\": \"Network Meta-analysis_LinoSergio\",\n    \"description\": \"A tutorial of the code necessary to conduct a Network meta-analysis in R with available dataset\",\n    \"contributor\": \"Admin\",\n    \"url\": \"https://github.com/LinoSergio/Network_Meta-analysis\",\n    \"domain\": \"GITHUB.COM\",\n    \"imageUrl\": \"https://images.unsplash.com/photo-1551288049-bbda38a594a0?auto=format&fit=crop&q=80&w=600\",\n    \"addedDate\": \"27/01/2026\",\n    \"category\": Theme.SYSTEMATIC_REVIEWS,\n    \"subCategory\": \"all\"\n  },\n  {\n    \"id\": \"j8nrra4ks\",\n    \"title\": \"Open-Source Models_PharmacoEconomics\",\n    \"description\": \"A collection of papers with open-source models published in PharmacoEconomics - Open, great resource for learning and model-adjusting\",\n    \"contributor\": \"Admin\",\n    \"url\": \"https://link.springer.com/collections/ehefgabiif\",\n    \"domain\": \"SPRINGER.COM\",\n    \"imageUrl\": \"https://images.unsplash.com/photo-1551288049-bbda38a594a0?auto=format&fit=crop&q=80&w=600\",\n    \"addedDate\": \"27/01/2026\",\n    \"category\": Theme.ECONOMIC_MODELING,\n    \"subCategory\": \"all\"\n  },\n  {\n    \"id\": \"vmrtjwx99\",\n    \"title\": \"Doing Meta-Analysis in R: A Hands-on Guide\",\n    \"description\": \"A great resource for beginners to meta-analysis with practical code in R\",\n    \"contributor\": \"Admin\",\n    \"url\": \"https://doing-meta.guide/\",\n    \"domain\": \"DOING-META.GUIDE\",\n    \"imageUrl\": \"https://images.unsplash.com/photo-1551288049-bbda38a594a0?auto=format&fit=crop&q=80&w=600\",\n    \"addedDate\": \"27/01/2026\",\n    \"category\": Theme.SYSTEMATIC_REVIEWS,\n    \"subCategory\": \"Tutorials\"\n  }\n];\n\nexport const TAGLINE_WORDS: string[] = [\n  \"health economics\",\n  \"outcome research\",\n  \"markov\",\n  \"PSA\",\n  \"microsimulation\",\n  \"survival analysis\",\n  \"modelling\",\n  \"survival extrapolation\"\n];\n\nexport const CHANGE_LOG: string = \"Latest Updates:\\n- Added Change Log functionality\\n- Improved contribution flow\\n- Updated welcome page visuals\";"
            }
          ]
        },
        {
          "path": "components/AdminDashboard.tsx",
          "generationType": 1,
          "isDone": true,
          "description": "Added Change Log editor in the settings tab and included it in the data export logic.",
          "diffs": [
            {
              "target": "",
              "replacement": "import React, { useState, useEffect, useRef } from 'react';\nimport { Resource, Collection, Theme } from '../types';\nimport { REPO_VERSION, CHANGE_LOG as initialChangeLog } from '../data';\n\ninterface AdminDashboardProps {\n  resources: Resource[];\n  setResources: React.Dispatch<React.SetStateAction<Resource[]>>;\n  collections: Collection[];\n  setCollections: React.Dispatch<React.SetStateAction<Collection[]>>;\n  taglineWords: string[];\n  setTaglineWords: React.Dispatch<React.SetStateAction<string[]>>;\n  initialTab?: 'resources' | 'collections' | 'settings';\n}\n\nconst sanitizeInput = (str: string): string => {\n  if (typeof str !== 'string') return '';\n  return str.replace(/<[^>]*>?/gm, '').trim();\n};\n\nconst parseCSV = (text: string): string[][] => {\n  const result: string[][] = [];\n  let row: string[] = [];\n  let cell = '';\n  let inQuotes = false;\n\n  for (let i = 0; i < text.length; i++) {\n    const char = text[i];\n    const nextChar = text[i + 1];\n\n    if (inQuotes) {\n      if (char === '\"' && nextChar === '\"') {\n        cell += '\"';\n        i++;\n      } else if (char === '\"') {\n        inQuotes = false;\n      } else {\n        cell += char;\n      }\n    } else {\n      if (char === '\"') {\n        inQuotes = true;\n      } else if (char === ',') {\n        row.push(cell);\n        cell = '';\n      } else if (char === '\\n' || char === '\\r') {\n        if (cell !== '' || row.length > 0) {\n          row.push(cell);\n          result.push(row);\n        }\n        row = [];\n        cell = '';\n        if (char === '\\r' && nextChar === '\\n') i++;\n      } else {\n        cell += char;\n      }\n    }\n  }\n  if (cell !== '' || row.length > 0) {\n    row.push(cell);\n    result.push(row);\n  }\n  return result;\n};\n\nconst escapeCSV = (val: string | undefined): string => {\n  if (!val) return '\"\"';\n  const str = val.toString().replace(/\"/g, '\"\"');\n  return `\"${str}\"`;\n};\n\nconst AdminDashboard: React.FC<AdminDashboardProps> = ({ \n  resources, \n  setResources, \n  collections, \n  setCollections, \n  taglineWords, \n  setTaglineWords, \n  initialTab = 'resources' \n}) => {\n  const [editingId, setEditingId] = useState<string | null>(null);\n  const [editingCollectionId, setEditingCollectionId] = useState<string | null>(null);\n  const [activeTab, setActiveTab] = useState<'resources' | 'collections' | 'settings'>(initialTab as any);\n  const [newTaglineWord, setNewTaglineWord] = useState('');\n  const [newSubCategory, setNewSubCategory] = useState('');\n  const [statusMessage, setStatusMessage] = useState<{ text: string, type: 'success' | 'error' } | null>(null);\n  const fileInputRef = useRef<HTMLInputElement>(null);\n\n  const [changeLog, setChangeLog] = useState(() => {\n    const saved = localStorage.getItem('heo_change_log');\n    return saved || initialChangeLog;\n  });\n\n  useEffect(() => {\n    localStorage.setItem('heo_change_log', changeLog);\n  }, [changeLog]);\n\n  const localVersion = localStorage.getItem('heo_repo_version') || '0';\n  const sourceVersion = (REPO_VERSION || 0).toString();\n  const isOutOfSync = parseInt(sourceVersion) > parseInt(localVersion);\n\n  useEffect(() => {\n    if (initialTab && activeTab !== initialTab) {\n      setActiveTab(initialTab as any);\n    }\n  }, [initialTab]);\n\n  const showStatus = (text: string, type: 'success' | 'error' = 'success') => {\n    setStatusMessage({ text, type });\n    setTimeout(() => setStatusMessage(null), 6000);\n  };\n\n  const handleExportDataFile = () => {\n    try {\n      if (collections.length === 0 || resources.length === 0) {\n        showStatus(\"Cannot export empty repository.\", \"error\");\n        return;\n      }\n\n      const collectionsStr = JSON.stringify(collections, null, 2);\n      const resourcesStr = JSON.stringify(resources, null, 2);\n      const taglineStr = JSON.stringify(taglineWords, null, 2);\n      const currentTimestamp = Date.now();\n\n      const fileContent = `import { Collection, Resource, Theme } from './types';\n\nexport const REPO_VERSION = ${currentTimestamp};\n\nexport const COLLECTIONS: Collection[] = ${collectionsStr};\n\nexport const RESOURCES: Resource[] = ${resourcesStr};\n\nexport const TAGLINE_WORDS: string[] = ${taglineStr};\n\nexport const CHANGE_LOG: string = ${JSON.stringify(changeLog)};\n`;\n\n      const blob = new Blob([fileContent], { type: 'text/typescript' });\n      const url = URL.createObjectURL(blob);\n      const link = document.createElement(\"a\");\n      link.setAttribute(\"href\", url);\n      link.setAttribute(\"download\", \"data.ts\");\n      link.click();\n      showStatus(\"data.ts exported with new version timestamp. Push this to GitHub now!\");\n    } catch (err) {\n      showStatus(\"Export failed.\", \"error\");\n      console.error(err);\n    }\n  };\n\n  const handleResetCache = () => {\n    if (window.confirm(\"This will clear your local edits and revert to the data currently in your repository (data.ts). Continue?\")) {\n      localStorage.removeItem('heo_collections');\n      localStorage.removeItem('heo_resources');\n      localStorage.removeItem('heo_tagline');\n      localStorage.removeItem('heo_repo_version');\n      localStorage.removeItem('heo_change_log');\n      window.location.reload();\n    }\n  };\n\n  const moveResource = (index: number, direction: 'up' | 'down') => {\n    const newResources = [...resources];\n    const targetIndex = direction === 'up' ? index - 1 : index + 1;\n    if (targetIndex >= 0 && targetIndex < newResources.length) {\n      [newResources[index], newResources[targetIndex]] = [newResources[targetIndex], newResources[index]];\n      setResources(newResources);\n    }\n  };\n\n  const moveCollection = (index: number, direction: 'up' | 'down') => {\n    const newCollections = [...collections];\n    const targetIndex = direction === 'up' ? index - 1 : index + 1;\n    if (targetIndex >= 0 && targetIndex < newCollections.length) {\n      [newCollections[index], newCollections[targetIndex]] = [newCollections[targetIndex], newCollections[index]];\n      setCollections(newCollections);\n    }\n  };\n\n  const moveSubCategory = (colId: string, index: number, direction: 'left' | 'right') => {\n    setCollections(prev => prev.map(col => {\n      if (col.id === colId) {\n        const newSubs = [...(col.subCategories || [])];\n        const targetIndex = direction === 'left' ? index - 1 : index + 1;\n        if (targetIndex >= 0 && targetIndex < newSubs.length) {\n          [newSubs[index], newSubs[targetIndex]] = [newSubs[targetIndex], newSubs[index]];\n          return { ...col, subCategories: newSubs };\n        }\n      }\n      return col;\n    }));\n  };\n\n  const handleDownloadTemplate = () => {\n    const headers = ['Title', 'Description', 'URL', 'Contributor', 'Category', 'SubCategory'];\n    const example = ['Example Analysis', 'Resource description.', 'https://example.com', 'Admin', Theme.GENERAL, 'Basics'];\n    const csvContent = [headers.join(\",\"), example.map(v => escapeCSV(v)).join(\",\")].join(\"\\n\");\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement(\"a\");\n    link.setAttribute(\"href\", url);\n    link.setAttribute(\"download\", \"heorepo_template.csv\");\n    link.click();\n  };\n\n  const handleImportCSV = (event: React.ChangeEvent<HTMLInputElement>) => {\n    const file = event.target.files?.[0];\n    if (!file) return;\n    const reader = new FileReader();\n    reader.onload = (e) => {\n      try {\n        const text = e.target?.result as string;\n        const rows = parseCSV(text);\n        if (rows.length < 2) {\n          showStatus(\"CSV has no data rows.\", \"error\");\n          return;\n        }\n\n        const importedResources: Resource[] = [];\n        const existingUrls = new Set(resources.map(r => r.url.toLowerCase()));\n        let skipped = 0;\n\n        for (let i = 1; i < rows.length; i++) {\n          const row = rows[i];\n          if (row.length < 3) continue;\n\n          const title = row[0]?.trim();\n          const desc = row[1]?.trim();\n          const urlStr = row[2]?.trim();\n          const contributor = row[3]?.trim() || 'Admin';\n          const catId = row[4]?.trim() || Theme.GENERAL;\n          const subCat = row[5]?.trim() || 'all';\n\n          if (!title || !urlStr || existingUrls.has(urlStr.toLowerCase())) {\n            skipped++;\n            continue;\n          }\n\n          let domain = 'UNKNOWN';\n          try {\n            const urlToTest = urlStr.startsWith('http') ? urlStr : `https://${urlStr}`;\n            domain = new URL(urlToTest).hostname.toUpperCase();\n          } catch (e) {}\n\n          importedResources.push({\n            id: Math.random().toString(36).substr(2, 9),\n            title,\n            description: desc || '',\n            url: urlStr,\n            domain,\n            imageUrl: 'https://images.unsplash.com/photo-1460925895917-afdab827c52f?auto=format&fit=crop&q=80&w=600',\n            addedDate: new Date().toLocaleDateString('en-GB'),\n            contributor,\n            category: collections.some(c => c.id === catId) ? catId : (collections[0]?.id || Theme.GENERAL),\n            subCategory: subCat\n          });\n        }\n\n        if (importedResources.length > 0) {\n          setResources(prev => [...importedResources, ...prev]);\n          showStatus(`Imported ${importedResources.length} resources. Skipped ${skipped} (duplicates/invalid).`);\n        } else {\n          showStatus(`No new resources were found in the CSV.`, \"error\");\n        }\n      } catch (err) {\n        showStatus(\"Error parsing CSV. Check file formatting.\", \"error\");\n      }\n    };\n    reader.readAsText(file);\n    if (fileInputRef.current) fileInputRef.current.value = '';\n  };\n\n  const handleUpdateResource = (id: string, field: keyof Resource, value: any) => {\n    setResources(prev => prev.map(res => {\n      if (res.id === id) {\n        let finalValue = value;\n        if (typeof value === 'string' && (field === 'title' || field === 'description' || field === 'contributor')) {\n          finalValue = value.replace(/<[^>]*>?/gm, '');\n        }\n        const updated = { ...res, [field]: finalValue };\n        if (field === 'url') {\n          try {\n            const urlToTest = value.startsWith('http') ? value : `https://${value}`;\n            updated.domain = new URL(urlToTest).hostname.toUpperCase();\n          } catch (e) {}\n        }\n        return updated;\n      }\n      return res;\n    }));\n  };\n\n  const handleDeleteResource = (id: string) => {\n    if (!window.confirm(\"Delete this resource?\")) return;\n    setResources(prev => prev.filter(res => res.id !== id));\n    if (editingId === id) setEditingId(null);\n  };\n\n  const handleAddResource = () => {\n    const defaultCategory = collections.length > 0 ? collections[0].id : Theme.GENERAL;\n    const newRes: Resource = {\n      id: Math.random().toString(36).substr(2, 9),\n      title: 'New Resource',\n      description: 'Enter description...',\n      contributor: 'Admin',\n      url: 'https://',\n      domain: 'NEW.COM',\n      imageUrl: 'https://images.unsplash.com/photo-1551288049-bbda38a594a0?auto=format&fit=crop&q=80&w=600',\n      addedDate: new Date().toLocaleDateString('en-GB'),\n      category: defaultCategory,\n      subCategory: 'all'\n    };\n    setResources(prev => [newRes, ...prev]);\n    setEditingId(newRes.id);\n    setActiveTab('resources');\n  };\n\n  const handleUpdateCollection = (id: string, field: keyof Collection, value: any) => {\n    setCollections(prev => prev.map(col => {\n      if (col.id === id) {\n        let finalValue = value;\n        if (typeof value === 'string' && (field === 'name' || field === 'description')) {\n          finalValue = value.replace(/<[^>]*>?/gm, '');\n        }\n        return { ...col, [field]: finalValue };\n      }\n      return col;\n    }));\n  };\n\n  const handleUpdateSubCategoryName = (colId: string, index: number, newName: string) => {\n    setCollections(prev => prev.map(col => {\n      if (col.id === colId) {\n        const newSubs = [...(col.subCategories || [])];\n        newSubs[index] = newName.replace(/<[^>]*>?/gm, '');\n        return { ...col, subCategories: newSubs };\n      }\n      return col;\n    }));\n  };\n\n  const handleAddSubCategory = (colId: string) => {\n    const cleanSub = sanitizeInput(newSubCategory).trim();\n    if (!cleanSub) return;\n    if (cleanSub.toLowerCase() === 'all') {\n      alert(\"'All' is a reserved system filter and cannot be added as a custom subcategory.\");\n      return;\n    }\n    setCollections(prev => prev.map(col => {\n      if (col.id === colId) {\n        const subs = col.subCategories || [];\n        if (subs.includes(cleanSub)) return col;\n        return { ...col, subCategories: [...subs, cleanSub] };\n      }\n      return col;\n    }));\n    setNewSubCategory('');\n  };\n\n  const handleRemoveSubCategory = (colId: string, index: number) => {\n    setCollections(prev => prev.map(col => {\n      if (col.id === colId) {\n        const subName = (col.subCategories || [])[index];\n        setResources(r => r.map(res => res.category === colId && res.subCategory === subName ? { ...res, subCategory: 'all' } : res));\n        return { ...col, subCategories: (col.subCategories || []).filter((_, i) => i !== index) };\n      }\n      return col;\n    }));\n  };\n\n  const handleDeleteCollection = (id: string) => {\n    if (!window.confirm(\"Move resources to General and delete?\")) return;\n    setCollections(prev => prev.filter(c => c.id !== id));\n    setResources(prev => prev.map(res => res.category === id ? { ...res, category: Theme.GENERAL, subCategory: 'all' } : res));\n    if (editingCollectionId === id) setEditingCollectionId(null);\n  };\n\n  const handleAddCollection = () => {\n    const newId = `custom-${Math.random().toString(36).substr(2, 5)}`;\n    const newCol: Collection = { id: newId, name: 'New Category', icon: 'ðŸ“', description: '', subCategories: ['General'] };\n    setCollections(prev => [...prev, newCol]);\n    setEditingCollectionId(newId);\n    setActiveTab('collections');\n  };\n\n  const handleAddTagline = () => {\n    const cleanWord = sanitizeInput(newTaglineWord).trim();\n    if (cleanWord) {\n      setTaglineWords(prev => [...prev, cleanWord]);\n      setNewTaglineWord('');\n    }\n  };\n\n  const handleRemoveTagline = (index: number) => {\n    if (taglineWords.length > 1) setTaglineWords(prev => prev.filter((_, i) => i !== index));\n  };\n\n  return (\n    <div className=\"bg-white rounded-[24px] md:rounded-[32px] border border-slate-200 shadow-xl overflow-hidden animate-card-entry ring-1 ring-black/5\">\n      <div className=\"flex bg-slate-50/50 border-b border-slate-200 p-2 gap-1.5 md:gap-2 overflow-x-auto scrollbar-hide\">\n        {['resources', 'collections', 'settings'].map((tab) => (\n          <button \n            key={tab}\n            onClick={() => setActiveTab(tab as any)} \n            className={`flex-1 py-2.5 md:py-3 px-4 md:px-6 rounded-xl md:rounded-2xl text-[10px] md:text-[12px] font-[800] uppercase tracking-wider transition-all duration-300 whitespace-nowrap relative ${activeTab === tab ? 'bg-white text-[#2563EB] shadow-sm border border-slate-200' : 'text-slate-500 hover:text-slate-700'}`}\n          >\n            {tab === 'resources' ? 'Vault' : tab.charAt(0).toUpperCase() + tab.slice(1)}\n          </button>\n        ))}\n      </div>\n\n      <div className=\"p-4 md:p-10\">\n        {activeTab === 'resources' && (\n          <div className=\"space-y-6 md:space-y-8\">\n            <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\n              <div>\n                <h2 className=\"text-[24px] md:text-[28px] font-[900] text-[#0F172A] tracking-tight\">Management</h2>\n                <div className=\"flex items-center gap-2 mt-1 min-h-[24px]\">\n                  {statusMessage ? (\n                    <span className={`text-[11px] font-black px-3 py-1 rounded-full animate-pulse uppercase tracking-widest ${statusMessage.type === 'success' ? 'bg-emerald-50 text-emerald-600' : 'bg-red-50 text-red-600'}`}>\n                      {statusMessage.text}\n                    </span>\n                  ) : (\n                    <p className=\"text-slate-500 text-xs md:text-sm\">Manage resources locally. Click 'Export data.ts' to update the GitHub repository.</p>\n                  )}\n                </div>\n              </div>\n              <div className=\"flex flex-wrap items-center gap-2 w-full sm:w-auto\">\n                <input type=\"file\" ref={fileInputRef} onChange={handleImportCSV} accept=\".csv\" className=\"hidden\" />\n                <div className=\"flex bg-slate-100 p-1 rounded-full border border-slate-200\">\n                   <button onClick={handleDownloadTemplate} className=\"px-4 py-2 hover:bg-white hover:shadow-sm rounded-full text-[9px] md:text-[10px] font-black uppercase tracking-widest text-slate-500 transition-all\">CSV Temp</button>\n                   <button onClick={() => fileInputRef.current?.click()} className=\"px-4 py-2 hover:bg-white hover:shadow-sm rounded-full text-[9px] md:text-[10px] font-black uppercase tracking-widest text-slate-500 transition-all\">CSV Imp</button>\n                   <button onClick={handleExportDataFile} className=\"px-4 py-2 bg-emerald-50 text-emerald-600 hover:bg-emerald-100 rounded-full text-[9px] md:text-[10px] font-black uppercase tracking-widest transition-all\">Export data.ts</button>\n                </div>\n                <button onClick={handleAddResource} className=\"bg-[#2563EB] text-white px-6 md:px-8 py-2.5 md:py-3 rounded-full text-[11px] md:text-[12px] font-black uppercase tracking-widest shadow-lg hover:opacity-90 active:scale-95 transition-all\">Add New</button>\n              </div>\n            </div>\n            \n            <div className=\"rounded-[16px] md:rounded-[24px] border border-slate-200 overflow-hidden shadow-sm\">\n              <div className=\"overflow-x-auto\">\n                <table className=\"w-full text-left border-collapse min-w-[900px]\">\n                  <thead className=\"bg-[#F8FAFC] border-b border-slate-200\">\n                    <tr className=\"text-[9px] md:text-[11px] font-black uppercase tracking-widest text-slate-400\">\n                      <th className=\"px-4 md:px-8 py-4\">Resource</th>\n                      <th className=\"px-4 md:px-8 py-4\">Link (URL)</th>\n                      <th className=\"px-4 md:px-8 py-4 w-[180px]\">Category</th>\n                      <th className=\"px-4 md:px-8 py-4 w-[180px]\">Sub-Category</th>\n                      <th className=\"px-4 md:px-8 py-4 text-right w-[160px]\">Actions</th>\n                    </tr>\n                  </thead>\n                  <tbody className=\"divide-y divide-slate-100 bg-white\">\n                    {resources.map((res, idx) => {\n                      const isEditing = editingId === res.id;\n                      const activeCol = collections.find(c => c.id === res.category);\n                      const availableSubCategories = activeCol?.subCategories || [];\n                      return (\n                        <tr key={res.id} className={`group transition-colors ${isEditing ? 'bg-blue-50/40' : 'hover:bg-slate-50/50'}`}>\n                          <td className=\"px-4 md:px-8 py-5\">\n                            {isEditing ? (\n                              <div className=\"space-y-1.5 max-w-xs\">\n                                <input className=\"w-full font-bold text-[#0F172A] text-sm outline-none border-b-2 border-blue-400 bg-transparent py-0.5\" value={res.title} onChange={e => handleUpdateResource(res.id, 'title', e.target.value)} />\n                                <textarea className=\"w-full text-[11px] text-slate-500 bg-transparent outline-none resize-none\" value={res.description} onChange={e => handleUpdateResource(res.id, 'description', e.target.value)} rows={2} />\n                              </div>\n                            ) : (\n                              <div className=\"max-w-[180px] md:max-w-xs\">\n                                <div className=\"font-bold text-[#0F172A] text-sm group-hover:text-blue-600 transition-colors truncate\">{res.title}</div>\n                                <div className=\"text-[10px] md:text-[11px] text-slate-400 font-medium line-clamp-1\">{res.description}</div>\n                              </div>\n                            )}\n                          </td>\n                          <td className=\"px-4 md:px-8 py-5\">\n                            {isEditing ? (\n                              <div className=\"space-y-1.5\">\n                                <input className=\"w-full text-[11px] text-blue-500 font-bold outline-none bg-white border border-blue-100 rounded px-2 py-1\" value={res.url} onChange={e => handleUpdateResource(res.id, 'url', e.target.value)} />\n                                <div className=\"text-[9px] text-slate-400 font-black uppercase\">{res.domain}</div>\n                              </div>\n                            ) : (\n                              <div className=\"max-w-[150px] md:max-w-[200px]\">\n                                <div className=\"text-[11px] text-blue-600 font-bold truncate\">{res.url}</div>\n                                <div className=\"text-[9px] text-slate-400 font-bold uppercase tracking-wider\">{res.domain}</div>\n                              </div>\n                            )}\n                          </td>\n                          <td className=\"px-4 md:px-8 py-5 w-[180px]\">\n                            {isEditing ? (\n                              <select className=\"text-[10px] font-black px-2 py-1.5 rounded bg-white border border-blue-200 text-blue-600 uppercase tracking-widest outline-none w-full shadow-sm\" value={res.category} onChange={e => { handleUpdateResource(res.id, 'category', e.target.value); handleUpdateResource(res.id, 'subCategory', 'all'); }}>\n                                {collections.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}\n                              </select>\n                            ) : (\n                              <span className=\"text-[9px] md:text-[10px] font-black px-2 py-1.5 rounded bg-slate-100 text-slate-500 uppercase tracking-widest inline-block w-full text-center\">{activeCol?.name || 'General'}</span>\n                            )}\n                          </td>\n                          <td className=\"px-4 md:px-8 py-5 w-[180px]\">\n                            {isEditing ? (\n                              <select className=\"text-[10px] font-black px-2 py-1.5 rounded bg-white border border-blue-200 text-blue-600 uppercase tracking-widest outline-none w-full shadow-sm\" value={res.subCategory || 'all'} onChange={e => handleUpdateResource(res.id, 'subCategory', e.target.value)}>\n                                <option value=\"all\">ALL</option>\n                                {availableSubCategories.map(s => <option key={s} value={s}>{s.toUpperCase()}</option>)}\n                              </select>\n                            ) : (\n                              <span className=\"text-[9px] md:text-[10px] font-black px-2 py-1.5 rounded bg-slate-100 text-slate-500 uppercase tracking-widest inline-block w-full text-center\">{res.subCategory?.toUpperCase() || 'ALL'}</span>\n                            )}\n                          </td>\n                          <td className=\"px-4 md:px-8 py-5 text-right w-[160px]\">\n                            <div className=\"flex justify-end items-center gap-1.5 md:gap-2\">\n                              <div className=\"flex flex-col gap-1 mr-1\">\n                                <button onClick={() => moveResource(idx, 'up')} disabled={idx === 0} className=\"p-1 hover:bg-slate-100 rounded text-slate-300 hover:text-[#2563EB] disabled:opacity-20 transition-all cursor-pointer\"><svg className=\"w-3 h-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={4}><path d=\"M5 15l7-7 7 7\" /></svg></button>\n                                <button onClick={() => moveResource(idx, 'down')} disabled={idx === resources.length - 1} className=\"p-1 hover:bg-slate-100 rounded text-slate-300 hover:text-[#2563EB] disabled:opacity-20 transition-all cursor-pointer\"><svg className=\"w-3 h-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={4}><path d=\"M19 9l-7 7-7-7\" /></svg></button>\n                              </div>\n                              <button onClick={() => setEditingId(isEditing ? null : res.id)} className={`flex items-center gap-1.5 px-3 md:px-4 py-1.5 md:py-2 rounded-xl text-[10px] md:text-[12px] font-bold transition-all ${isEditing ? 'bg-emerald-500 text-white shadow-md' : 'bg-slate-50 text-slate-400 hover:bg-slate-100'}`}>{isEditing ? 'Save' : 'Adjust'}</button>\n                              <button onClick={() => handleDeleteResource(res.id)} className=\"p-1.5 md:p-2.5 bg-slate-50 text-slate-300 hover:text-red-500 hover:bg-red-50 transition-all rounded-xl cursor-pointer\"><svg className=\"w-4 h-4 md:w-5 md:h-5 pointer-events-none\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}><path d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" /></svg></button>\n                            </div>\n                          </td>\n                        </tr>\n                      );\n                    })}\n                  </tbody>\n                </table>\n              </div>\n            </div>\n          </div>\n        )}\n\n        {activeTab === 'collections' && (\n          <div className=\"space-y-6 md:space-y-8\">\n            <div className=\"flex flex-col sm:flex-row justify-between items-start sm:items-center gap-4\">\n              <h2 className=\"text-[24px] md:text-[28px] font-[900] text-[#0F172A] tracking-tight\">Organization</h2>\n              <button onClick={handleAddCollection} className=\"w-full sm:w-auto bg-[#2563EB] text-white px-6 md:px-8 py-2.5 md:py-3 rounded-full text-[11px] md:text-[12px] font-black uppercase tracking-widest shadow-lg hover:opacity-90 transition-all\">New Collection</button>\n            </div>\n            <div className=\"grid grid-cols-1 gap-4 md:gap-6\">\n              {collections.map((col, idx) => {\n                const isEditing = editingCollectionId === col.id;\n                return (\n                  <div key={col.id} className={`p-5 md:p-8 rounded-[20px] md:rounded-[32px] border transition-all ${isEditing ? 'border-blue-400 bg-blue-50/10 ring-4 ring-blue-50 shadow-sm' : 'border-slate-100 bg-white hover:border-blue-200'}`}>\n                    <div className=\"flex flex-col gap-6\">\n                      <div className=\"flex items-center justify-between\">\n                        <div className=\"flex items-center gap-3 md:gap-5\">\n                          <div className=\"text-xl md:text-2xl w-10 h-10 md:w-14 md:h-14 flex items-center justify-center bg-slate-50 rounded-[14px] md:rounded-[20px] shadow-sm\">\n                            {isEditing ? <input className=\"w-6 text-center bg-transparent border-b border-blue-400 outline-none\" value={col.icon} onChange={e => handleUpdateCollection(col.id, 'icon', e.target.value)} maxLength={2} /> : col.icon}\n                          </div>\n                          <div>\n                            {isEditing ? <input className=\"text-[16px] md:text-[20px] font-black text-[#0F172A] bg-transparent border-b-2 border-blue-400 outline-none\" value={col.name} onChange={e => handleUpdateCollection(col.id, 'name', e.target.value)} /> : <div className=\"text-[16px] md:text-[20px] font-black text-[#0F172A]\">{col.name}</div>}\n                            <div className=\"text-[9px] md:text-[11px] font-bold text-slate-400 uppercase tracking-widest mt-0.5 md:mt-1\">ID: {col.id}</div>\n                          </div>\n                        </div>\n                        <div className=\"flex items-center gap-1.5 md:gap-2\">\n                          <div className=\"flex items-center bg-slate-50 p-1 rounded-xl border border-slate-100 gap-1\">\n                            <button onClick={() => moveCollection(idx, 'up')} disabled={idx === 0} className=\"p-2 text-slate-400 hover:text-[#2563EB] hover:bg-white rounded-lg transition-all disabled:opacity-10 cursor-pointer\"><svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={3}><path d=\"M5 15l7-7 7 7\" /></svg></button>\n                            <button onClick={() => moveCollection(idx, 'down')} disabled={idx === collections.length - 1} className=\"p-2 text-slate-400 hover:text-[#2563EB] hover:bg-white rounded-lg transition-all disabled:opacity-10 cursor-pointer\"><svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={3}><path d=\"M19 9l-7 7-7-7\" /></svg></button>\n                          </div>\n                          <button onClick={() => setEditingCollectionId(isEditing ? null : col.id)} className={`px-3 md:px-5 py-1.5 md:py-2.5 rounded-xl text-[10px] md:text-[12px] font-bold transition-all ${isEditing ? 'bg-emerald-500 text-white' : 'bg-slate-50 text-slate-500 hover:bg-slate-100'}`}>{isEditing ? 'Save' : 'Adjust'}</button>\n                          <button onClick={() => handleDeleteCollection(col.id)} className=\"p-1.5 md:p-2.5 text-slate-300 hover:text-red-500 hover:bg-red-50 rounded-xl transition-all cursor-pointer\"><svg className=\"w-4 h-4 md:w-5 md:h-5 pointer-events-none\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}><path d=\"M19 7l-.867 12.142A2 2 0 0116.138 21H7.862a2 2 0 01-1.995-1.858L5 7m5 4v6m4-6v6m1-10V4a1 1 0 00-1-1h-4a1 1 0 00-1 1v3M4 7h16\" /></svg></button>\n                        </div>\n                      </div>\n                      <div className=\"border-t border-slate-100 pt-4\">\n                        <div className=\"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-3\">Sub-categories</div>\n                        <div className=\"flex flex-wrap gap-2 mb-4\">\n                          {(col.subCategories || []).map((sub, index) => (\n                            <div key={`${col.id}-sub-${index}`} className=\"flex items-center gap-2 bg-slate-50 border border-slate-100 px-3 py-1.5 rounded-full group/sub transition-all\">\n                              {isEditing && (\n                                <button onClick={() => moveSubCategory(col.id, index, 'left')} disabled={index === 0} className=\"text-slate-300 hover:text-blue-500 disabled:opacity-20 cursor-pointer\"><svg className=\"w-3 h-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={4}><path d=\"M15 19l-7-7 7-7\" /></svg></button>\n                              )}\n                              {isEditing ? (\n                                <input className=\"text-[11px] font-bold text-blue-600 bg-transparent outline-none w-24 tracking-tight\" value={sub} onChange={(e) => handleUpdateSubCategoryName(col.id, index, e.target.value)} />\n                              ) : (\n                                <span className=\"text-[11px] font-bold text-slate-600 tracking-tight\">{sub}</span>\n                              )}\n                              {isEditing && (\n                                <div className=\"flex items-center gap-1.5 ml-1\">\n                                  <button onClick={() => moveSubCategory(col.id, index, 'right')} disabled={index === (col.subCategories?.length || 0) - 1} className=\"text-slate-300 hover:text-blue-500 disabled:opacity-20 cursor-pointer\"><svg className=\"w-3 h-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={4}><path d=\"M9 5l7 7-7 7\" /></svg></button>\n                                  <button onClick={() => handleRemoveSubCategory(col.id, index)} className=\"text-slate-300 hover:text-red-500 transition-colors cursor-pointer\"><svg className=\"w-3 h-3\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={3}><path d=\"M6 18L18 6M6 6l12 12\" /></svg></button>\n                                </div>\n                              )}\n                            </div>\n                          ))}\n                        </div>\n                        {isEditing && (\n                          <div className=\"flex gap-2 max-w-sm\">\n                            <input className=\"flex-1 px-4 py-2 rounded-xl bg-white border border-slate-200 outline-none focus:ring-4 focus:ring-[#2563EB]/10 transition-all font-bold text-xs\" placeholder=\"Add sub-category...\" value={newSubCategory} onChange={(e) => setNewSubCategory(e.target.value)} onKeyDown={(e) => e.key === 'Enter' && handleAddSubCategory(col.id)} />\n                            <button onClick={() => handleAddSubCategory(col.id)} className=\"px-4 py-2 bg-slate-800 text-white rounded-xl text-[10px] font-black uppercase tracking-widest hover:bg-black transition-all\">Add</button>\n                          </div>\n                        )}\n                      </div>\n                    </div>\n                  </div>\n                );\n              })}\n            </div>\n          </div>\n        )}\n\n        {activeTab === 'settings' && (\n          <div className=\"space-y-6 md:space-y-8\">\n            <h2 className=\"text-[24px] md:text-[28px] font-[900] text-[#0F172A] tracking-tight\">Sync & Repository Settings</h2>\n            <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n              <div className=\"bg-slate-50 rounded-[20px] md:rounded-[32px] p-6 md:p-10 border border-slate-100 flex flex-col h-full\">\n                <div className=\"flex justify-between items-start mb-4\">\n                  <div>\n                    <h3 className=\"text-lg md:text-xl font-black text-[#0F172A] mb-1.5\">GitHub Synchronization</h3>\n                    <p className=\"text-slate-500 text-[13px] md:text-sm\">Download the current project state as a <strong>data.ts</strong> file.</p>\n                  </div>\n                  <div className={`px-3 py-1.5 rounded-full text-[9px] font-black uppercase tracking-widest ${isOutOfSync ? 'bg-amber-100 text-amber-600 animate-pulse' : 'bg-emerald-100 text-emerald-600'}`}>\n                    {isOutOfSync ? 'Sync Needed' : 'In Sync'}\n                  </div>\n                </div>\n                <div className=\"bg-white/50 p-4 rounded-2xl border border-slate-200 mb-6 space-y-3\">\n                  <div className=\"flex justify-between items-center text-[10px] font-black uppercase tracking-widest\">\n                    <span className=\"text-slate-400\">Source (data.ts):</span>\n                    <span className=\"text-slate-800\">{sourceVersion}</span>\n                  </div>\n                  <div className=\"flex justify-between items-center text-[10px] font-black uppercase tracking-widest\">\n                    <span className=\"text-slate-400\">Local (Browser):</span>\n                    <span className=\"text-slate-800\">{localVersion}</span>\n                  </div>\n                </div>\n                <div className=\"flex flex-col gap-3 mt-auto\">\n                  <button onClick={handleExportDataFile} className=\"w-full bg-[#0F172A] text-white px-8 py-4 rounded-2xl text-[12px] font-black uppercase tracking-widest shadow-lg hover:bg-black transition-all\">Export data.ts</button>\n                  <button onClick={handleResetCache} className=\"w-full bg-white border border-red-200 text-red-500 px-8 py-4 rounded-2xl text-[11px] font-black uppercase tracking-widest hover:bg-red-50 transition-all\">Reset Cache</button>\n                </div>\n              </div>\n\n              <div className=\"space-y-6\">\n                <div className=\"bg-slate-50 rounded-[20px] md:rounded-[32px] p-6 md:p-10 border border-slate-100\">\n                  <h3 className=\"text-lg md:text-xl font-black text-[#0F172A] mb-1.5 md:mb-2\">Tagline Keywords</h3>\n                  <div className=\"flex flex-wrap gap-2 md:gap-3 mb-6 md:mb-8\">\n                    {taglineWords.map((word, idx) => (\n                      <div key={idx} className=\"flex items-center gap-2 md:gap-3 bg-white px-4 md:px-6 py-2 md:py-3 rounded-xl md:rounded-2xl border border-slate-200 shadow-sm\">\n                        <span className=\"text-[13px] md:text-[15px] font-black text-slate-800 tracking-tight\">{word}</span>\n                        <button onClick={() => handleRemoveTagline(idx)} className=\"text-slate-300 hover:text-red-500 transition-colors cursor-pointer\"><svg className=\"w-4 h-4 md:w-5 md:h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={3}><path d=\"M6 18L18 6M6 6l12 12\" /></svg></button>\n                      </div>\n                    ))}\n                  </div>\n                  <div className=\"flex flex-col sm:flex-row gap-2 md:gap-3\">\n                    <input className=\"flex-1 px-5 md:px-6 py-3 md:py-4 rounded-xl md:rounded-2xl bg-white border border-slate-200 outline-none font-bold\" placeholder=\"Add Keyword...\" value={newTaglineWord} onChange={(e) => setNewTaglineWord(e.target.value)} onKeyDown={(e) => e.key === 'Enter' && handleAddTagline()} />\n                    <button onClick={handleAddTagline} className=\"px-6 md:px-8 py-3 md:py-4 bg-[#0F172A] text-white rounded-xl md:rounded-2xl text-[12px] md:text-[14px] font-black uppercase tracking-widest hover:bg-black transition-all\">Add</button>\n                  </div>\n                </div>\n\n                <div className=\"bg-slate-50 rounded-[20px] md:rounded-[32px] p-6 md:p-10 border border-slate-100\">\n                  <h3 className=\"text-lg md:text-xl font-black text-[#0F172A] mb-1.5 md:mb-2\">Change Log</h3>\n                  <p className=\"text-slate-500 text-[13px] md:text-sm mb-4\">Update the release notes visible to users.</p>\n                  <textarea \n                    className=\"w-full px-5 py-4 rounded-2xl bg-white border border-slate-200 outline-none focus:ring-4 focus:ring-blue-500/10 transition-all font-medium text-sm md:text-base resize-none\" \n                    rows={5} \n                    value={changeLog} \n                    onChange={(e) => setChangeLog(e.target.value)}\n                    placeholder=\"Describe recent changes...\"\n                  />\n                </div>\n              </div>\n            </div>\n          </div>\n        )}\n      </div>\n    </div>\n  );\n};\n\nexport default AdminDashboard;"
            }
          ]
        },
        {
          "path": "App.tsx",
          "generationType": 1,
          "isDone": true,
          "description": "Added change log icon and modal to the welcome page. Content is editable by admin.",
          "diffs": [
            {
              "target": "",
              "replacement": "\nimport React, { useState, useMemo, useEffect } from 'react';\nimport Sidebar from './components/Sidebar';\nimport ResourceCard from './components/ResourceCard';\nimport AdminDashboard from './components/AdminDashboard';\nimport { COLLECTIONS as initialCollections, RESOURCES as initialResources, TAGLINE_WORDS as initialTaglines, REPO_VERSION, CHANGE_LOG as initialChangeLog } from './data';\nimport { Resource, Collection, Theme } from './types';\n\nconst BRAND_BLUE = '#2563EB';\nconst DARK_NAVY = '#121A26';\n\nconst t = {\n  welcome: \"Welcome to\",\n  intro: \"The repository of open-source tools & resources for Health Economics and Outcomes Research\",\n  select: \"Select a collection to begin ðŸ‘‡\",\n  contributeBtn: \"Contribute to HEORepo\",\n  archive: \"Archive\",\n  vault: \"Vault\",\n  deck: \"Deck\",\n  search: \"Search...\",\n  items: \"ITEMS\",\n  adminPanel: \"ADMIN CONTROL PANEL\",\n  fullRepo: \"FULL REPOSITORY\",\n  exitAdmin: \"Exit Admin\",\n  management: \"Management\",\n  emptyTitle: \"Empty Archive\",\n  emptyDesc: \"Adjust your filters or try a different search term.\",\n  version: \"VERSION\",\n  adminMode: \"ADMIN MODE\",\n  adminPortal: \"Admin Portal\",\n  adminPortalDesc: \"Enter system password to access management tools.\",\n  password: \"Password\",\n  incorrectPassword: \"Incorrect Password\",\n  cancel: \"Cancel\",\n  confirm: \"Confirm\",\n  contributeTitle: \"Contribute\",\n  contributeDesc: \"Suggest high-quality HEOR resources. Please input your suggestions below, then click 'Export CSV' and email the resulting file to contact@heorepo.com for review.\",\n  title: \"Title\",\n  url: \"URL\",\n  suggestedCol: \"Suggested Collection\",\n  description: \"Description\",\n  yourName: \"Your Name\",\n  creditName: \"Credit my name\",\n  addToList: \"Add to List\",\n  exportCsv: \"Export CSV\",\n  subReceived: \"Export Successful\",\n  subReceivedDesc: \"CSV exported. Please email it to contact@heorepo.com\",\n  allResources: \"All Resources\",\n  changeLog: \"Change Log\"\n};\n\nconst sanitizeData = (str: string): string => {\n  if (typeof str !== 'string') return '';\n  return str.replace(/<[^>]*>?/gm, '').trim();\n};\n\nconst isValidLink = (url: string): boolean => {\n  try {\n    const parsed = new URL(url.startsWith('http') ? url : `https://${url}`);\n    return parsed.protocol === 'http:' || parsed.protocol === 'https:';\n  } catch {\n    return false;\n  }\n};\n\nconst escapeCSV = (val: string | undefined): string => {\n  if (!val) return '\"\"';\n  const str = val.toString().replace(/\"/g, '\"\"');\n  return `\"${str}\"`;\n};\n\nconst App: React.FC = () => {\n  const [activeTheme, setActiveTheme] = useState<string>('landing');\n  const [activeSubCategory, setActiveSubCategory] = useState<string>('all');\n  const [searchQuery, setSearchQuery] = useState('');\n  const [isSidebarOpen, setIsSidebarOpen] = useState(false);\n  const [isDotDropped, setIsDotDropped] = useState(false);\n  const [showChangeLog, setShowChangeLog] = useState(false);\n  \n  const [isAdmin, setIsAdmin] = useState(false);\n  const [showLoginModal, setShowLoginModal] = useState(false);\n  const [password, setPassword] = useState('');\n  const [loginError, setLoginError] = useState(false);\n\n  const shouldResetCache = useMemo(() => {\n    const savedVersionStr = localStorage.getItem('heo_repo_version');\n    const savedVersion = savedVersionStr ? parseInt(savedVersionStr) : 0;\n    const currentVersion = REPO_VERSION || 0;\n    return currentVersion > savedVersion;\n  }, []);\n\n  const [collections, setCollections] = useState<Collection[]>(() => {\n    try {\n      if (shouldResetCache) return initialCollections;\n      const saved = localStorage.getItem('heo_collections');\n      return saved ? JSON.parse(saved) : initialCollections;\n    } catch { return initialCollections; }\n  });\n  \n  const [resources, setResources] = useState<Resource[]>(() => {\n    try {\n      if (shouldResetCache) return initialResources;\n      const saved = localStorage.getItem('heo_resources');\n      return saved ? JSON.parse(saved) : initialResources;\n    } catch { return initialResources; }\n  });\n  \n  const [taglineWords, setTaglineWords] = useState<string[]>(() => {\n    try {\n      if (shouldResetCache) return initialTaglines;\n      const saved = localStorage.getItem('heo_tagline');\n      return saved ? JSON.parse(saved) : initialTaglines;\n    } catch { return initialTaglines; }\n  });\n\n  const [changeLogContent, setChangeLogContent] = useState(() => {\n    const saved = localStorage.getItem('heo_change_log');\n    return saved || initialChangeLog;\n  });\n\n  useEffect(() => {\n    if (searchQuery.toLowerCase() === 'admin') {\n      setSearchQuery('');\n      setShowLoginModal(true);\n    }\n  }, [searchQuery]);\n\n  useEffect(() => {\n    try {\n      localStorage.setItem('heo_collections', JSON.stringify(collections));\n      localStorage.setItem('heo_resources', JSON.stringify(resources));\n      localStorage.setItem('heo_tagline', JSON.stringify(taglineWords));\n      localStorage.setItem('heo_repo_version', (REPO_VERSION || 0).toString());\n      localStorage.setItem('heo_change_log', changeLogContent);\n    } catch (e) {}\n  }, [collections, resources, taglineWords, changeLogContent]);\n\n  useEffect(() => {\n    setActiveSubCategory('all');\n    if (activeTheme !== 'landing') {\n      setIsDotDropped(false);\n    }\n  }, [activeTheme]);\n\n  const handleLogin = () => {\n    if (password.trim() === '123456') {\n      setIsAdmin(true);\n      setShowLoginModal(false);\n      setPassword('');\n      setLoginError(false);\n      setActiveTheme('admin-deck');\n    } else {\n      setLoginError(true);\n    }\n  };\n\n  const handleLogout = () => {\n    setIsAdmin(false);\n    if (activeTheme === 'admin-deck') {\n      setActiveTheme('landing');\n    }\n  };\n\n  const [showContributeModal, setShowContributeModal] = useState(false);\n  const [suggestionList, setSuggestionList] = useState<any[]>([]);\n  const [contributionData, setContributionData] = useState({ \n    title: '', \n    url: '', \n    description: '', \n    userName: '', \n    category: Theme.GENERAL, \n    wantsCredit: true \n  });\n  const [contributionSuccess, setContributionSuccess] = useState(false);\n\n  const handleAddSuggestionToList = () => {\n    if (!contributionData.title || !contributionData.url) {\n      alert(\"Please provide at least a title and a valid URL.\");\n      return;\n    }\n    if (!isValidLink(contributionData.url)) {\n      alert(\"Please provide a secure and valid URL.\");\n      return;\n    }\n\n    setSuggestionList(prev => [...prev, {\n      title: sanitizeData(contributionData.title),\n      url: contributionData.url,\n      description: sanitizeData(contributionData.description),\n      userName: sanitizeData(contributionData.userName),\n      category: contributionData.category,\n      wantsCredit: contributionData.wantsCredit\n    }]);\n\n    setContributionData({ \n      title: '', \n      url: '', \n      description: '', \n      userName: contributionData.userName, \n      category: Theme.GENERAL, \n      wantsCredit: contributionData.wantsCredit \n    });\n  };\n\n  const handleRemoveFromList = (idx: number) => {\n    setSuggestionList(prev => prev.filter((_, i) => i !== idx));\n  };\n\n  const handleExportCSV = () => {\n    if (suggestionList.length === 0) {\n      alert(\"Add at least one suggestion to the list before exporting.\");\n      return;\n    }\n\n    const headers = ['Title', 'Description', 'URL', 'Contributor', 'Category', 'SubCategory'];\n    const csvRows = suggestionList.map(item => [\n      escapeCSV(item.title),\n      escapeCSV(item.description),\n      escapeCSV(item.url),\n      escapeCSV(item.wantsCredit ? item.userName : 'Anonymous'),\n      escapeCSV(item.category),\n      escapeCSV('all')\n    ].join(\",\"));\n\n    const csvContent = [headers.join(\",\"), ...csvRows].join(\"\\n\");\n    const blob = new Blob([csvContent], { type: 'text/csv;charset=utf-8;' });\n    const url = URL.createObjectURL(blob);\n    const link = document.createElement(\"a\");\n    link.setAttribute(\"href\", url);\n    link.setAttribute(\"download\", `heorepo_suggestions_${new Date().getTime()}.csv`);\n    link.click();\n\n    setContributionSuccess(true);\n    setTimeout(() => {\n      setShowContributeModal(false);\n      setContributionSuccess(false);\n      setSuggestionList([]);\n    }, 4000);\n  };\n\n  const filteredResources = useMemo(() => {\n    return resources.filter(res => {\n      const matchesTheme = activeTheme === 'all' || res.category === activeTheme;\n      const matchesSubCategory = activeSubCategory === 'all' || res.subCategory?.toLowerCase() === activeSubCategory.toLowerCase();\n      const matchesSearch = res.title.toLowerCase().includes(searchQuery.toLowerCase()) || \n                            res.description.toLowerCase().includes(searchQuery.toLowerCase());\n      return matchesTheme && matchesSubCategory && matchesSearch;\n    });\n  }, [activeTheme, activeSubCategory, searchQuery, resources]);\n\n  const currentCollection = useMemo(() => collections.find(c => c.id === activeTheme), [activeTheme, collections]);\n  const isAdminDeckActive = activeTheme === 'admin-deck' && isAdmin;\n  const isLandingActive = activeTheme === 'landing';\n  const collectionName = isAdminDeckActive ? t.management : (activeTheme === 'all' ? t.archive : currentCollection?.name || t.archive);\n  \n  const subCategoryFilters = useMemo(() => {\n    if (!currentCollection) return [];\n    return [...(currentCollection.subCategories || []), 'All'];\n  }, [currentCollection]);\n\n  return (\n    <div className=\"flex h-screen bg-[#FCFDFF] text-slate-900 overflow-hidden font-['Inter'] antialiased relative\">\n      <Sidebar \n        collections={collections} activeTheme={activeTheme} onThemeSelect={setActiveTheme} \n        isOpen={isSidebarOpen} onClose={() => setIsSidebarOpen(false)}\n        onAdminClick={() => isAdmin ? handleLogout() : null} isAdminActive={isAdmin} taglineWords={taglineWords}\n      />\n\n      <main className=\"flex-1 flex flex-col overflow-hidden\">\n        {!isLandingActive && (\n          <header className=\"bg-white px-4 md:px-8 pt-4 md:pt-8 pb-5 border-b border-[#F1F5F9]/60 relative z-30\">\n            <div className=\"max-w-[1440px] mx-auto\">\n              <div className=\"flex items-center justify-between mb-4 lg:hidden\">\n                <div className=\"flex items-center font-[900] text-[26px] tracking-[-0.04em] leading-none select-none cursor-pointer\" onClick={() => setActiveTheme('landing')}>\n                  <span style={{ color: DARK_NAVY }}>HEO</span>\n                  <span style={{ backgroundImage: `linear-gradient(to right, ${DARK_NAVY} 50%, ${BRAND_BLUE} 50%)`, WebkitBackgroundClip: 'text', WebkitTextFillColor: 'transparent', display: 'inline-block', position: 'relative', padding: '0 0.2em', margin: '0 -0.2em' }}>R</span>\n                  <span style={{ color: BRAND_BLUE }}>epo</span>\n                  <div className=\"ml-[2px] self-end\" style={{ backgroundColor: BRAND_BLUE, width: '6.5px', height: '6.5px', marginBottom: '3px' }}></div>\n                </div>\n                <button onClick={() => setIsSidebarOpen(true)} className=\"p-2 hover:bg-slate-50 rounded-xl transition-colors\"><svg className=\"w-6 h-6 text-slate-600\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2.5}><path d=\"M4 6h16M4 12h16M4 18h16\" /></svg></button>\n              </div>\n\n              <div className=\"flex flex-col md:flex-row md:items-end justify-between gap-4 md:gap-8 mb-6\">\n                <div className=\"flex flex-col gap-2 md:gap-3\">\n                  <div className=\"flex items-center gap-3 md:gap-4\">\n                    <div className=\"px-3 py-1 rounded-full bg-[#EFF6FF] border border-[#2563EB]/20 text-[9px] md:text-[10px] font-[800] tracking-[0.12em] md:tracking-[0.15em] text-[#2563EB] uppercase\">\n                      {isAdminDeckActive ? t.adminPanel : (activeTheme === 'all' ? t.fullRepo : (currentCollection?.name.toUpperCase() || 'UNKNOWN'))}\n                    </div>\n                    {!isAdminDeckActive && <div className=\"text-[9px] md:text-[10px] font-[800] tracking-[0.12em] md:tracking-[0.15em] text-[#64748B] uppercase\">{filteredResources.length} {t.items}</div>}\n                  </div>\n                  <h1 className=\"text-[32px] md:text-[48px] font-[900] tracking-[-0.04em] leading-[0.9] text-[#0F172A]\">{collectionName} <span className=\"text-[#D1D5DB] font-[900]\">{isAdminDeckActive ? t.deck : t.vault}</span></h1>\n                </div>\n\n                <div className=\"flex flex-col sm:flex-row items-stretch sm:items-center gap-3 md:gap-6 pb-1\">\n                  {!isAdminDeckActive && (\n                    <div className=\"relative w-full sm:w-[280px] md:w-[380px]\">\n                      <div className=\"absolute inset-y-0 left-0 pl-4 flex items-center pointer-events-none text-[#94A3B8]\"><svg className=\"h-4 w-4 md:h-5 md:w-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2.5}><path d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" /></svg></div>\n                      <input type=\"text\" placeholder={t.search} className=\"block w-full pl-10 md:pl-12 pr-6 py-2.5 md:py-3.5 bg-[#F8FAFC] border border-[#F1F5F9] rounded-full text-[14px] md:text-[15px] font-medium text-[#1E293B] focus:ring-1 focus:ring-[#4F46E5] focus:bg-white outline-none shadow-sm transition-all placeholder-[#94A3B8]\" value={searchQuery} onChange={(e) => setSearchQuery(e.target.value)} />\n                    </div>\n                  )}\n                  <button onClick={() => isAdmin ? handleLogout() : setShowContributeModal(true)} className={`flex items-center justify-center gap-2 px-6 md:px-8 py-2.5 md:py-3.5 ${isAdminDeckActive ? 'bg-[#0F172A]' : 'bg-[#2563EB]'} text-white text-[14px] md:text-[15px] font-[700] rounded-full hover:opacity-90 transition-all shadow-md active:scale-[0.96]`}><svg className=\"w-4 h-4 md:w-5 md:h-5\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={3}><path d={isAdminDeckActive ? \"M15 19l-7-7 7-7\" : \"M12 4v16m8-8H4\"} /></svg><span className=\"whitespace-nowrap\">{isAdminDeckActive ? t.exitAdmin : t.contributeBtn}</span></button>\n                </div>\n              </div>\n\n              {!isAdminDeckActive && subCategoryFilters.length > 0 && (\n                <div className=\"min-h-[48px] flex items-center overflow-hidden\">\n                  <div className=\"flex items-center gap-2 md:gap-3 overflow-x-auto pb-2 -mx-4 px-4 scrollbar-hide snap-x snap-mandatory\">\n                    {subCategoryFilters.map((sub) => {\n                      const filterValue = sub.toLowerCase() === 'all' ? 'all' : sub;\n                      const isSelected = activeSubCategory === filterValue;\n                      return (\n                        <button key={sub} onClick={() => setActiveSubCategory(filterValue)} className={`px-5 md:px-6 py-2 md:py-2.5 rounded-full text-[10px] md:text-[11px] font-[800] tracking-[0.1em] uppercase whitespace-nowrap active:scale-95 border transition-all duration-300 snap-center ${isSelected ? 'bg-[#0F172A] text-white border-[#0F172A] shadow-lg shadow-slate-200' : 'bg-white text-[#475569] border-[#E2E8F0] hover:border-[#CBD5E1]'}`}>{sub}</button>\n                      );\n                    })}\n                  </div>\n                </div>\n              )}\n            </div>\n          </header>\n        )}\n\n        <div className=\"flex-1 overflow-y-auto px-4 md:px-8 py-6 md:py-10 scroll-smooth\">\n          <div className=\"max-w-[1440px] mx-auto h-full\">\n            {isLandingActive ? (\n              <div className=\"flex flex-col items-center justify-center h-full text-center animate-card-entry pb-20 select-none relative overflow-visible\">\n                <div className=\"absolute inset-0 pointer-events-none overflow-visible\">\n                   <span className=\"absolute top-[20%] left-[15%] text-4xl animate-float opacity-40 md:opacity-100\">ðŸŽ‰</span>\n                   <span className=\"absolute top-[15%] right-[20%] text-4xl animate-float opacity-40 md:opacity-100\">ðŸ“Š</span>\n                   <span className=\"absolute bottom-[30%] left-[20%] text-4xl animate-float opacity-40 md:opacity-100\">ðŸš€</span>\n                   <span className=\"absolute bottom-[40%] right-[15%] text-4xl animate-float opacity-40 md:opacity-100\">ðŸ’Š</span>\n                   <span className=\"absolute top-[45%] left-[5%] text-3xl animate-float opacity-30 md:opacity-80\" style={{ animationDelay: '0.2s' }}>ðŸ“ˆ</span>\n                   <span className=\"absolute top-[35%] right-[5%] text-3xl animate-float opacity-30 md:opacity-80\" style={{ animationDelay: '0.7s' }}>ðŸ’‰</span>\n                </div>\n                \n                {/* Change Log Icon - Bottom Left of landing area */}\n                <button \n                  onClick={() => setShowChangeLog(true)}\n                  className=\"fixed bottom-8 left-8 p-3 bg-white border border-slate-200 rounded-2xl text-slate-400 hover:text-blue-600 hover:border-blue-200 hover:shadow-xl transition-all duration-300 z-40 group flex items-center gap-3\"\n                  title=\"View Change Log\"\n                >\n                  <svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2.5}>\n                    <path strokeLinecap=\"round\" strokeLinejoin=\"round\" d=\"M12 6.042A8.967 8.967 0 006 3.75c-1.052 0-2.062.18-3 .512v14.257c.938-.333 1.948-.512 3-.512.18 0 .358.006.535.018a10.738 10.738 0 003.465 1.012l.401.044.401-.044a10.738 10.738 0 003.465-1.012c.177-.012.355-.018.535-.018 1.052 0 2.062.18 3 .512V4.262a8.967 8.967 0 00-6-2.22h-.038a8.967 8.967 0 00-5.962 2.22m0 0v1.5m0 12.75v1.5m11.924-15.75v1.5m0 12.75v1.5\" />\n                  </svg>\n                  <span className=\"text-[11px] font-black uppercase tracking-widest opacity-0 group-hover:opacity-100 transition-opacity whitespace-nowrap\">{t.changeLog}</span>\n                </button>\n\n                <span className=\"text-lg md:text-2xl font-[600] text-slate-400 mb-2 md:mb-4 block tracking-tight relative z-10\">{t.welcome}</span>\n                <div className=\"flex flex-col items-center mb-6 md:mb-10 relative z-10\">\n                  <div className=\"flex items-center justify-center font-[900] text-[56px] md:text-[110px] tracking-[-0.04em] leading-none\">\n                    <span style={{ color: DARK_NAVY }}>HEO</span>\n                    <span style={{ backgroundImage: `linear-gradient(to right, ${DARK_NAVY} 50%, ${BRAND_BLUE} 50%)`, WebkitBackgroundClip: 'text', WebkitTextFillColor: 'transparent', display: 'inline-block', position: 'relative', padding: '0 0.2em', margin: '0 -0.2em' }}>R</span>\n                    <span style={{ color: BRAND_BLUE }}>epo</span>\n                    <div \n                      onClick={() => setIsDotDropped(true)}\n                      className={`ml-[4px] md:ml-[10px] self-end cursor-pointer transition-transform hover:scale-125 ${isDotDropped ? 'animate-drop' : ''}`} \n                      style={{ backgroundColor: BRAND_BLUE, width: '14px', height: '14px', marginBottom: '8px' }}\n                    ></div>\n                  </div>\n                  <div className=\"max-w-3xl flex flex-col items-center px-4\">\n                    <p className=\"text-[14px] md:text-[19px] text-slate-500 font-medium mt-4 md:mt-6 leading-relaxed\">\n                      The repository of open-source tools & resources <br /> for <span style={{ color: BRAND_BLUE, fontWeight: 900 }}>H</span>ealth <span style={{ color: BRAND_BLUE, fontWeight: 900 }}>E</span>conomics and <span style={{ color: BRAND_BLUE, fontWeight: 900 }}>O</span>utcomes <span style={{ color: BRAND_BLUE, fontWeight: 900 }}>R</span>esearch.\n                    </p>\n                  </div>\n                  <div className=\"mt-12 flex flex-col items-center gap-6 w-full max-w-xl px-4 relative z-10\">\n                    <p className=\"text-slate-400 font-bold text-xs uppercase tracking-[0.2em]\">{t.select}</p>\n                    <div className=\"grid grid-cols-2 sm:grid-cols-4 gap-4 w-full\">\n                      {collections.map(col => (\n                        <button key={col.id} onClick={() => setActiveTheme(col.id)} className=\"flex flex-col items-center justify-center p-6 bg-white border border-slate-100 rounded-[24px] hover:border-blue-400 hover:shadow-xl hover:-translate-y-1 transition-all duration-300 group\">\n                          <span className=\"text-3xl mb-3 group-hover:scale-110 transition-transform\">{col.icon}</span>\n                          <span className=\"text-[11px] font-black uppercase tracking-widest text-slate-600 group-hover:text-blue-600\">{col.name}</span>\n                        </button>\n                      ))}\n                    </div>\n                  </div>\n                </div>\n              </div>\n            ) : isAdminDeckActive ? (\n              <AdminDashboard \n                resources={resources} setResources={setResources} \n                collections={collections} setCollections={setCollections} \n                taglineWords={taglineWords} setTaglineWords={setTaglineWords} \n              />\n            ) : (\n              <div className=\"grid grid-cols-1 sm:grid-cols-2 lg:grid-cols-3 xl:grid-cols-4 gap-6 md:gap-8 auto-rows-fr\">\n                {filteredResources.length > 0 ? filteredResources.map((res, idx) => (<ResourceCard key={res.id} resource={res} index={idx} />)) : (\n                  <div className=\"col-span-full py-20 text-center\">\n                    <div className=\"w-20 h-20 bg-slate-100 rounded-full flex items-center justify-center mx-auto mb-6\"><svg className=\"w-10 h-10 text-slate-300\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2}><path d=\"M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z\" /></svg></div>\n                    <h3 className=\"text-xl font-black text-slate-800 mb-2\">{t.emptyTitle}</h3>\n                    <p className=\"text-slate-500 max-w-md mx-auto\">{t.emptyDesc}</p>\n                  </div>\n                )}\n              </div>\n            )}\n          </div>\n        </div>\n      </main>\n\n      {/* Change Log Modal */}\n      {showChangeLog && (\n        <div className=\"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300\">\n          <div className=\"bg-white rounded-[32px] p-8 md:p-10 w-full max-w-md shadow-2xl border border-white/20 animate-in zoom-in-95 duration-300 max-h-[80vh] flex flex-col\">\n            <div className=\"flex justify-between items-center mb-6\">\n              <h2 className=\"text-2xl font-black text-slate-900\">{t.changeLog}</h2>\n              <button onClick={() => setShowChangeLog(false)} className=\"p-2 hover:bg-slate-100 rounded-full text-slate-400 transition-colors\">\n                <svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2.5}><path d=\"M6 18L18 6M6 6l12 12\" /></svg>\n              </button>\n            </div>\n            <div className=\"flex-1 overflow-y-auto pr-2 scrollbar-hide\">\n              <pre className=\"whitespace-pre-wrap font-sans text-slate-600 leading-relaxed text-sm\">\n                {changeLogContent}\n              </pre>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {showLoginModal && (\n        <div className=\"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300\">\n          <div className=\"bg-white rounded-[32px] p-8 md:p-10 w-full max-w-md shadow-2xl border border-white/20 animate-in zoom-in-95 duration-300\">\n            <h2 className=\"text-2xl font-black text-slate-900 mb-2\">{t.adminPortal}</h2>\n            <div className=\"space-y-4\">\n              <div>\n                <input type=\"text\" value={password} onChange={(e) => setPassword(e.target.value)} onKeyDown={(e) => e.key === 'Enter' && handleLogin()} className={`w-full px-6 py-4 rounded-2xl bg-slate-50 border ${loginError ? 'border-red-500' : 'border-slate-100'} focus:ring-4 focus:ring-blue-500/10 focus:bg-white outline-none transition-all font-bold`} placeholder=\"Enter Password\" autoFocus />\n                {loginError && <p className=\"text-red-500 text-[11px] font-bold mt-2 ml-1\">{t.incorrectPassword}</p>}\n              </div>\n              <div className=\"flex gap-3 pt-2\">\n                <button onClick={() => setShowLoginModal(false)} className=\"flex-1 px-6 py-4 rounded-2xl bg-slate-100 text-slate-600 font-bold hover:bg-slate-200 transition-all\">{t.cancel}</button>\n                <button onClick={handleLogin} className=\"flex-1 px-6 py-4 rounded-2xl bg-[#2563EB] text-white font-bold hover:opacity-90 transition-all\">{t.confirm}</button>\n              </div>\n            </div>\n          </div>\n        </div>\n      )}\n\n      {showContributeModal && (\n        <div className=\"fixed inset-0 z-[100] flex items-center justify-center p-4 bg-slate-900/60 backdrop-blur-sm animate-in fade-in duration-300 overflow-y-auto\">\n          <div className=\"bg-white rounded-[32px] p-8 md:p-10 w-full max-w-2xl shadow-2xl border border-white/20 animate-in zoom-in-95 duration-300 my-8\">\n            {contributionSuccess ? (\n              <div className=\"text-center py-10 animate-in zoom-in duration-500\">\n                <div className=\"w-20 h-20 bg-emerald-100 text-emerald-600 rounded-full flex items-center justify-center mx-auto mb-6\"><svg className=\"w-10 h-10\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={3}><path d=\"M5 13l4 4L19 7\" /></svg></div>\n                <h2 className=\"text-2xl font-black text-slate-900 mb-2\">{t.subReceived}</h2>\n                <p className=\"text-slate-500\">{t.subReceivedDesc}</p>\n              </div>\n            ) : (\n              <>\n                <div className=\"flex justify-between items-start mb-6\">\n                  <div>\n                    <h2 className=\"text-2xl font-black text-slate-900 mb-1\">{t.contributeTitle}</h2>\n                    <p className=\"text-slate-500 text-sm leading-relaxed\">{t.contributeDesc}</p>\n                  </div>\n                  <button onClick={() => setShowContributeModal(false)} className=\"p-2 hover:bg-slate-100 rounded-full text-slate-400 transition-colors\"><svg className=\"w-6 h-6\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\" strokeWidth={2.5}><path d=\"M6 18L18 6M6 6l12 12\" /></svg></button>\n                </div>\n\n                <div className=\"grid grid-cols-1 lg:grid-cols-2 gap-8\">\n                  <div className=\"space-y-4\">\n                    <div className=\"bg-slate-50/50 p-6 rounded-[24px] border border-slate-100 space-y-4\">\n                      <div>\n                        <label className=\"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1\">{t.title}</label>\n                        <input className=\"w-full px-5 py-3 rounded-xl bg-white border border-slate-200 focus:ring-4 focus:ring-blue-500/10 outline-none font-bold text-sm\" value={contributionData.title} onChange={e => setContributionData({...contributionData, title: e.target.value})} placeholder=\"Resource name\" />\n                      </div>\n                      <div>\n                        <label className=\"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1\">{t.url}</label>\n                        <input className=\"w-full px-5 py-3 rounded-xl bg-white border border-slate-200 focus:ring-4 focus:ring-blue-500/10 outline-none font-bold text-sm\" value={contributionData.url} onChange={e => setContributionData({...contributionData, url: e.target.value})} placeholder=\"https://...\" />\n                      </div>\n                      <div>\n                        <label className=\"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1\">{t.suggestedCol}</label>\n                        <select className=\"w-full px-5 py-3 rounded-xl bg-white border border-slate-200 focus:ring-4 focus:ring-blue-500/10 outline-none font-bold text-sm\" value={contributionData.category} onChange={e => setContributionData({...contributionData, category: e.target.value as any})}>\n                          {collections.map(c => <option key={c.id} value={c.id}>{c.name}</option>)}\n                        </select>\n                      </div>\n                      <div>\n                        <label className=\"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1\">{t.description}</label>\n                        <textarea rows={2} className=\"w-full px-5 py-3 rounded-xl bg-white border border-slate-200 focus:ring-4 focus:ring-blue-500/10 outline-none font-bold text-sm resize-none\" value={contributionData.description} onChange={e => setContributionData({...contributionData, description: e.target.value})} placeholder=\"Briefly describe...\" />\n                      </div>\n                      <div>\n                        <label className=\"block text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1.5 ml-1\">{t.yourName}</label>\n                        <input className=\"w-full px-5 py-3 rounded-xl bg-white border border-slate-200 font-bold text-sm mb-2\" value={contributionData.userName} onChange={e => setContributionData({...contributionData, userName: e.target.value})} placeholder=\"Your Name\" />\n                        <label className=\"flex items-center gap-2 cursor-pointer\">\n                          <input type=\"checkbox\" className=\"w-4 h-4 rounded\" checked={contributionData.wantsCredit} onChange={e => setContributionData({...contributionData, wantsCredit: e.target.checked})} />\n                          <span className=\"text-xs font-bold text-slate-500\">{t.creditName}</span>\n                        </label>\n                      </div>\n                      <button onClick={handleAddSuggestionToList} className=\"w-full bg-[#0F172A] text-white py-3 rounded-xl font-black uppercase tracking-widest text-[11px] hover:bg-black transition-all\">Add to List</button>\n                    </div>\n                  </div>\n\n                  <div className=\"flex flex-col h-full min-h-[400px]\">\n                    <div className=\"flex-1 overflow-y-auto pr-2 space-y-3 scrollbar-hide\">\n                      <div className=\"text-[10px] font-black text-slate-400 uppercase tracking-widest mb-1 flex justify-between\">\n                        <span>List of Suggestions</span>\n                        <span className=\"text-blue-600\">{suggestionList.length}</span>\n                      </div>\n                      {suggestionList.length === 0 ? (\n                        <div className=\"h-full min-h-[200px] border-2 border-dashed border-slate-100 rounded-[24px] flex items-center justify-center text-slate-300 font-bold text-xs italic\">Empty list.</div>\n                      ) : (\n                        suggestionList.map((item, idx) => (\n                          <div key={idx} className=\"p-4 bg-white border border-slate-100 rounded-2xl shadow-sm relative group\">\n                            <button onClick={() => handleRemoveFromList(idx)} className=\"absolute top-2 right-2 p-1 text-slate-300 hover:text-red-500\"><svg className=\"w-4 h-4\" fill=\"none\" viewBox=\"0 0 24 24\" stroke=\"currentColor\"><path d=\"M6 18L18 6M6 6l12 12\" /></svg></button>\n                            <div className=\"font-black text-slate-800 text-[13px] truncate pr-6\">{item.title}</div>\n                            <div className=\"text-[10px] text-blue-500 font-bold truncate\">{item.url}</div>\n                          </div>\n                        ))\n                      )}\n                    </div>\n                    <button onClick={handleExportCSV} disabled={suggestionList.length === 0} className={`w-full mt-6 py-4 rounded-2xl font-black uppercase tracking-widest shadow-lg transition-all ${suggestionList.length > 0 ? 'bg-[#2563EB] text-white shadow-blue-500/20 hover:opacity-90' : 'bg-slate-100 text-slate-400 cursor-not-allowed'}`}>Export CSV</button>\n                  </div>\n                </div>\n              </>\n            )}\n          </div>\n        </div>\n      )}\n    </div>\n  );\n};\n\nexport default App;"
            }
          ]
        }
      ]
    },
    "createdTimestamp": {
      "seconds": 1770191202,
      "nanos": 253000000
    },
    "doneTimestamp": {
      "seconds": 1770191214,
      "nanos": 825000000
    }
  }
]